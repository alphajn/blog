import{a8 as $n,a9 as jn,d as Fe,o as G,c as te,n as ot,V as Gn,_ as Ye,a5 as bt,q as Et,w as ue,e as To,D as Oe,G as Me,C as Ee,i as li,l as Ve,a6 as pi,r as ui,I as Wt,aa as po,t as ht,F as vi,R as gi,J as Pe,a as Xn,E as ct,T as qn,a7 as Kn,ab as Zn}from"./framework.009e57ad.js";import{b as Io,p as Do,l as Jn,w as Qn,f as vo,m as ut}from"./index.7e71f9e5.js";var Po={exports:{}},ci={exports:{}};/**
 * @license
 * KLineChart v9.5.4
 * Copyright (c) 2019 lihu.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */(function(m,y){(function(h,E){E(y)})($n,function(h){function E(n,e){if(I(n)||I(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=n[t],i=e[t];I(i)&&I(o)&&!P(i)&&!P(o)?E(o,i):M(e[t])&&(n[t]=e[t])}}}function T(n){if(!I(n)||!P(n))return n;var e;for(var t in e=P(n)?[]:{},n)if(Object.prototype.hasOwnProperty.call(n,t)){var o=n[t];e[t]=I(o)?T(o):o}return e}function P(n){return Object.prototype.toString.call(n)==="[object Array]"}function b(n){return typeof n=="function"}function I(n){return typeof n=="object"}function B(n){return typeof n=="number"&&!isNaN(n)}function M(n){return n!=null}function Y(n){return typeof n=="boolean"}function W(n){return typeof n=="string"}var Q,oe,se,Tt,dt,qe,Ne,Ue,Ht,nt,Bo=/\\(\\)?/g,zo=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function ee(n,e,t){if(M(n)){var o=[];e.replace(zo,function(s){for(var l=[],u=1;arguments.length>u;u++)l[u-1]=arguments[u];var c=s;return M(l[1])?c=l[2].replace(Bo,"$1"):M(l[0])&&(c=l[0].trim()),o.push(c),""});for(var i=n,r=0,a=o.length;M(i)&&a>r;)i=i==null?void 0:i[o[r++]];return M(i)?i:t??"--"}return t??"--"}function fi(n,e,t){var o=n.format(new Date(e)).split(", "),i=o[0].split("/"),r=o[1].split(":"),a={YYYY:i[2],MM:i[0],DD:i[1],HH:r[0]==="24"?"00":r[0],mm:r[1],ss:r[2]};return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(s){return a[s]})}function ie(n,e){var t=+n;return B(t)?t.toFixed(e??2):"".concat(n)}function mi(n){var e=+n;if(B(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(n)}function re(n,e){var t="".concat(n);if(e.length===0)return t;if(t.includes(".")){var o=t.split(".");return"".concat(o[0].replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(e)}),".").concat(o[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(e)})}h.LineType=void 0,(Q=h.LineType||(h.LineType={})).Dashed="dashed",Q.Solid="solid",h.PolygonType=void 0,(oe=h.PolygonType||(h.PolygonType={})).Stroke="stroke",oe.Fill="fill",oe.StrokeFill="stroke_fill",h.TooltipShowRule=void 0,(se=h.TooltipShowRule||(h.TooltipShowRule={})).Always="always",se.FollowCross="follow_cross",se.None="none",h.TooltipShowType=void 0,(Tt=h.TooltipShowType||(h.TooltipShowType={})).Standard="standard",Tt.Rect="rect",h.TooltipIconPosition=void 0,(dt=h.TooltipIconPosition||(h.TooltipIconPosition={})).Left="left",dt.Middle="middle",dt.Right="right",function(n){n.Fixed="fixed",n.Pointer="pointer"}(qe||(qe={})),h.CandleType=void 0,(Ne=h.CandleType||(h.CandleType={})).CandleSolid="candle_solid",Ne.CandleStroke="candle_stroke",Ne.CandleUpStroke="candle_up_stroke",Ne.CandleDownStroke="candle_down_stroke",Ne.Ohlc="ohlc",Ne.Area="area",h.YAxisPosition=void 0,(Ue=h.YAxisPosition||(h.YAxisPosition={})).Left="left",Ue.Right="right",h.YAxisType=void 0,(Ht=h.YAxisType||(h.YAxisType={})).Normal="normal",Ht.Percentage="percentage",Ht.Log="log",h.FormatDateType=void 0,(nt=h.FormatDateType||(h.FormatDateType={}))[nt.Tooltip=0]="Tooltip",nt[nt.Crosshair=1]="Crosshair",nt[nt.XAxis=2]="XAxis";var Yt=function(n,e){return Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])},Yt(n,e)};function $(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+e+" is not a constructor or null");function t(){this.constructor=n}Yt(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ke,O=function(){return O=Object.assign||function(n){for(var e,t=1,o=arguments.length;o>t;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},O.apply(this,arguments)};function It(n,e,t,o){return new(t||(t=Promise))(function(i,r){function a(u){try{l(o.next(u))}catch(c){r(c)}}function s(u){try{l(o.throw(u))}catch(c){r(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof t?c:new t(function(d){d(c)})).then(a,s)}l((o=o.apply(n,e||[])).next())})}function Dt(n,e){var t,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function s(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&i[3]>c[1])){a.label=c[1];break}if(c[0]===6&&i[1]>a.label){a.label=i[1],i=c;break}if(i&&i[2]>a.label){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(n,a)}catch(d){c=[6,d],o=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function pt(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var o,i,r=t.call(n),a=[];try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return a}function yi(n,e,t){if(t||arguments.length===2)for(var o,i=0,r=e.length;r>i;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError,h.ActionType=void 0,(Ke=h.ActionType||(h.ActionType={})).OnZoom="onZoom",Ke.OnScroll="onScroll",Ke.OnVisibleRangeChange="onVisibleRangeChange",Ke.OnTooltipIconClick="onTooltipIconClick",Ke.OnCrosshairChange="onCrosshairChange",Ke.OnCandleBarClick="onCandleBarClick",Ke.OnPaneDrag="onPaneDrag";var Pt,Ro=function(){function n(){this._callbacks=[]}return n.prototype.subscribe=function(e){var t;0>((t=this._callbacks.indexOf(e))!==null&&t!==void 0?t:-1)&&this._callbacks.push(e)},n.prototype.unsubscribe=function(e){var t;if(e!==void 0){var o=(t=this._callbacks.indexOf(e))!==null&&t!==void 0?t:-1;o>-1&&this._callbacks.splice(o,1)}else this._callbacks=[]},n.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},n.prototype.isEmpty=function(){return this._callbacks.length===0},n}(),Ut=1,_i=new Date().getTime();function xi(n){var e=new Date().getTime();return e===_i?++Ut:Ut=1,_i=e,"".concat(n??"").concat(e,"_").concat(Ut)}function ke(n,e){var t,o=document.createElement(n),i=e??{};for(var r in i)o.style[r]=(t=i[r])!==null&&t!==void 0?t:"";return o}function Ze(n){var e,t,o;return Math.ceil((o=(t=(e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&o!==void 0?o:2)}function Je(n,e,t){return"".concat(e??"normal"," ").concat(n??12,"px ").concat(t??"Helvetica Neue")}function vt(n,e,t,o){if(Pt===void 0){var i=document.createElement("canvas"),r=Ze(i);(Pt=i.getContext("2d")).scale(r,r)}return Pt.font=Je(e,t,o),Math.round(Pt.measureText(n).width)}function $t(n,e,t){var o=0,i=0;for(i=n.length-1;o!==i;){var r=Math.floor((i+o)/2),a=i-o,s=n[r][e];if(t===n[o][e])return o;if(t===n[i][e])return i;if(t===s)return r;if(t>s?o=r:i=r,2>=a)break}return o}function Ci(n,e){return e==null&&(e=10),+(+n).toFixed(e=Math.min(Math.max(0,e),20))}function Si(n,e,t){var o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];return n.forEach(function(i){var r,a;o[0]=Math.max((r=i[e])!==null&&r!==void 0?r:i,o[0]),o[1]=Math.min((a=i[t])!==null&&a!==void 0?a:i,o[1])}),o}function gt(n){return Math.log(n)/Math.log(10)}function Qe(n){return Math.pow(10,n)}var jt,Wo=1,Oo=50,Vo=function(){function n(e){this._dateTimeFormat=this._buildDateTimeFormat(),this._zoomEnabled=!0,this._scrollEnabled=!0,this._loading=!0,this._loadMoreCallback=null,this._more=!0,this._totalBarSpace=0,this._barSpace=6,this._offsetRightDistance=50,this._startScrollOffsetRightBarCount=0,this._minVisibleBarCount={left:2,right:2},this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._chartStore=e,this._gapBarSpace=this._calcGapBarSpace(),this._offsetRightBarCount=this._offsetRightDistance/this._barSpace}return n.prototype._calcGapBarSpace=function(){return Math.max(1,Math.min(Math.floor(.82*this._barSpace),Math.floor(this._barSpace)-1))},n.prototype.adjustVisibleRange=function(){var e,t=this._chartStore.getDataList(),o=t.length,i=this._totalBarSpace/this._barSpace,r=i-Math.min(this._minVisibleBarCount.left,o);this._offsetRightBarCount>r&&(this._offsetRightBarCount=r);var a=-o+Math.min(this._minVisibleBarCount.right,o);a>this._offsetRightBarCount&&(this._offsetRightBarCount=a);var s=Math.round(this._offsetRightBarCount+o+.5);s>o&&(s=o);var l=Math.round(s-i)-1;if(0>l&&(l=0),this._visibleRange={from:l,to:s,realFrom:this._offsetRightBarCount>0?Math.round(o+this._offsetRightBarCount-i)-1:l,realTo:s},this._chartStore.getActionStore().execute(h.ActionType.OnVisibleRangeChange,this._visibleRange),this._chartStore.adjustVisibleDataList(),l===0&&this._more&&!this._loading&&this._loadMoreCallback!==null){this._loading=!0;var u=t[0];this._loadMoreCallback((e=u==null?void 0:u.timestamp)!==null&&e!==void 0?e:null)}},n.prototype.setMore=function(e){return this._more=e,this},n.prototype.setLoading=function(e){return this._loading=e,this},n.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},n.prototype._buildDateTimeFormat=function(e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};e!==void 0&&(t.timeZone=e);var o=null;try{o=new Intl.DateTimeFormat("en",t)}catch{}return o},n.prototype.setTimezone=function(e){var t=this._buildDateTimeFormat(e);t!==null&&(this._dateTimeFormat=t)},n.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},n.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:this._gapBarSpace/2}},n.prototype.setBarSpace=function(e,t){Wo>e||e>Oo||this._barSpace===e||(this._barSpace=e,this._gapBarSpace=this._calcGapBarSpace(),t==null||t(),this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0))},n.prototype.setTotalBarSpace=function(e){return this._totalBarSpace!==e&&(this._totalBarSpace=e,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0)),this},n.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=e,this._offsetRightBarCount=e/this._barSpace,t!=null&&t&&(this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0)),this},n.prototype.resetOffsetRightDistance=function(){this.setOffsetRightDistance(this._offsetRightDistance)},n.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},n.prototype.getOffsetRightDistance=function(){return Math.max(0,this._offsetRightBarCount*this._barSpace)},n.prototype.getOffsetRightBarCount=function(){return this._offsetRightBarCount},n.prototype.setOffsetRightBarCount=function(e){return this._offsetRightBarCount=e,this},n.prototype.setLeftMinVisibleBarCount=function(e){return this._minVisibleBarCount.left=e,this},n.prototype.setRightMinVisibleBarCount=function(e){return this._minVisibleBarCount.right=e,this},n.prototype.getVisibleRange=function(){return this._visibleRange},n.prototype.startScroll=function(){this._startScrollOffsetRightBarCount=this._offsetRightBarCount},n.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace;this._chartStore.getActionStore().execute(h.ActionType.OnScroll),this._offsetRightBarCount=this._startScrollOffsetRightBarCount-t,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0)}},n.prototype.getDataByDataIndex=function(e){var t;return(t=this._chartStore.getDataList()[e])!==null&&t!==void 0?t:null},n.prototype.coordinateToFloatIndex=function(e){var t=this._chartStore.getDataList().length;return Math.round(1e6*(t+this._offsetRightBarCount-(this._totalBarSpace-e)/this._barSpace))/1e6},n.prototype.dataIndexToTimestamp=function(e){var t,o=this.getDataByDataIndex(e);return(t=o==null?void 0:o.timestamp)!==null&&t!==void 0?t:null},n.prototype.timestampToDataIndex=function(e){var t=this._chartStore.getDataList();return t.length===0?0:$t(t,"timestamp",e)},n.prototype.dataIndexToCoordinate=function(e){var t=this._chartStore.getDataList().length;return this._totalBarSpace-(t+this._offsetRightBarCount-e-.5)*this._barSpace},n.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},n.prototype.zoom=function(e,t){var o,i=this;if(this._zoomEnabled){if((t==null?void 0:t.x)===void 0){var r=this._chartStore.getTooltipStore().getCrosshair();t={x:(o=r==null?void 0:r.x)!==null&&o!==void 0?o:this._totalBarSpace/2}}this._chartStore.getActionStore().execute(h.ActionType.OnZoom);var a=this.coordinateToFloatIndex(t.x);this.setBarSpace(this._barSpace+e*(this._barSpace/10),function(){i._offsetRightBarCount+=a-i.coordinateToFloatIndex(t==null?void 0:t.x)})}},n.prototype.setZoomEnabled=function(e){return this._zoomEnabled=e,this},n.prototype.getZoomEnabled=function(){return this._zoomEnabled},n.prototype.setScrollEnabled=function(e){return this._scrollEnabled=e,this},n.prototype.getScrollEnabled=function(){return this._scrollEnabled},n.prototype.setLoadMoreCallback=function(e){return this._loadMoreCallback=e,this},n.prototype.clear=function(){this._more=!0,this._loading=!0,this._visibleRange={from:0,to:0,realFrom:0,realTo:0}},n}();function Gt(n,e,t,o,i){var r,a=e.result,s=e.figures,l=e.styles,u=ee(l,"circles",o.circles),c=u.length,d=ee(l,"bars",o.bars),p=d.length,v=ee(l,"lines",o.lines),g=v.length,f=0,_=0,x=0;s.forEach(function(C){var S;switch(C.type){case"circle":var w=u[f%c];r=O(O({},w),{color:w.noChangeColor}),f++;break;case"bar":var D=d[_%p];r=O(O({},D),{color:D.noChangeColor}),_++;break;case"line":r=v[x%g],x++}if(M(r)){var k=(S=C.styles)===null||S===void 0?void 0:S.call(C,{prev:{kLineData:n[t-1],indicatorData:a[t-1]},current:{kLineData:n[t],indicatorData:a[t]},next:{kLineData:n[t+1],indicatorData:a[t+1]}},e,o);i(C,O(O({},r),k))}})}h.IndicatorSeries=void 0,(jt=h.IndicatorSeries||(h.IndicatorSeries={})).Normal="normal",jt.Price="price",jt.Volume="volume";var wi=function(){function n(e){this.result=[],this._precisionFlag=!1;var t=e.name,o=e.shortName,i=e.series,r=e.calcParams,a=e.figures,s=e.precision,l=e.shouldOhlc,u=e.shouldFormatBigNumber,c=e.visible,d=e.minValue,p=e.maxValue,v=e.styles,g=e.extendData,f=e.regenerateFigures,_=e.createTooltipDataSource,x=e.draw;this.name=t,this.shortName=o??t,this.series=i??h.IndicatorSeries.Normal,this.precision=s??4,this.calcParams=r??[],this.figures=a??[],this.shouldOhlc=l!=null&&l,this.shouldFormatBigNumber=u!=null&&u,this.visible=c==null||c,this.minValue=d??null,this.maxValue=p??null,this.styles=v??{},this.extendData=g,this.regenerateFigures=f??null,this.createTooltipDataSource=_??null,this.draw=x??null}return n.prototype.setShortName=function(e){return this.shortName!==e&&(this.shortName=e,!0)},n.prototype.setSeries=function(e){return this.series!==e&&(this.series=e,!0)},n.prototype.setPrecision=function(e,t){var o=t!=null&&t,i=Math.floor(e);return!(i===this.precision||0>e||o&&(!o||this._precisionFlag))&&(this.precision=i,o||(this._precisionFlag=!0),!0)},n.prototype.setCalcParams=function(e){var t,o;return this.calcParams=e,this.figures=(o=(t=this.regenerateFigures)===null||t===void 0?void 0:t.call(this,e))!==null&&o!==void 0?o:this.figures,!0},n.prototype.setShouldOhlc=function(e){return this.shouldOhlc!==e&&(this.shouldOhlc=e,!0)},n.prototype.setShouldFormatBigNumber=function(e){return this.shouldFormatBigNumber!==e&&(this.shouldFormatBigNumber=e,!0)},n.prototype.setVisible=function(e){return this.visible!==e&&(this.visible=e,!0)},n.prototype.setStyles=function(e){return e!==null&&(E(this.styles,e),!0)},n.prototype.setExtendData=function(e){return this.extendData!==e&&(this.extendData=e,!0)},n.prototype.setFigures=function(e){return this.figures!==e&&(this.figures=e,!0)},n.prototype.setMinValue=function(e){return this.minValue!==e&&(this.minValue=e,!0)},n.prototype.setMaxValue=function(e){return this.maxValue!==e&&(this.maxValue=e,!0)},n.prototype.setRegenerateFigures=function(e){return this.regenerateFigures!==e&&(this.regenerateFigures=e,!0)},n.prototype.setCreateTooltipDataSource=function(e){return this.createTooltipDataSource!==e&&(this.createTooltipDataSource=e,!0)},n.prototype.setDraw=function(e){return this.draw!==e&&(this.draw=e,!0)},n.prototype.calcIndicator=function(e){return It(this,void 0,void 0,function(){var t;return Dt(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=o.sent(),this.result=t,[2,!0];case 2:return o.sent(),[2,!1];case 3:return[2]}})})},n.extend=function(e){return function(t){function o(){return t.call(this,e)||this}return $(o,t),o.prototype.calc=function(i,r){return e.calc(i,r)},o}(n)},n}(),No={name:"AVP",shortName:"AVP",series:h.IndicatorSeries.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(n){var e=0,t=0;return n.map(function(o){var i,r,a={},s=(i=o==null?void 0:o.turnover)!==null&&i!==void 0?i:0,l=(r=o==null?void 0:o.volume)!==null&&r!==void 0?r:0;return e+=s,(t+=l)!==0&&(a.avp=e/t),a})}},Ho={name:"EMA",shortName:"EMA",series:h.IndicatorSeries.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,o=e.figures,i=0,r=[];return n.map(function(a,s){var l={},u=a.close;return i+=u,t.forEach(function(c,d){c-1>s||(r[d]=s>c-1?(2*u+(c-1)*r[d])/(c+1):i/c,l[o[d].key]=r[d])}),l})}},Yo={name:"MA",shortName:"MA",series:h.IndicatorSeries.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,o=e.figures,i=[];return n.map(function(r,a){var s={},l=r.close;return t.forEach(function(u,c){var d;i[c]=((d=i[c])!==null&&d!==void 0?d:0)+l,u-1>a||(s[o[c].key]=i[c]/u,i[c]-=n[a-(u-1)].close)}),s})}},Uo={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){var o=t+1;return{key:"rsi".concat(o),title:"RSI".concat(o,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,o=e.figures,i=[],r=[];return n.map(function(a,s){var l,u={},c=((l=n[s-1])!==null&&l!==void 0?l:a).close,d=a.close-c;return t.forEach(function(p,v){var g,f,_;if(d>0?i[v]=((g=i[v])!==null&&g!==void 0?g:0)+d:r[v]=((f=r[v])!==null&&f!==void 0?f:0)+Math.abs(d),s>=p-1){u[o[v].key]=r[v]!==0?100-100/(1+i[v]/r[v]):0;var x=n[s-(p-1)],C=(_=n[s-p])!==null&&_!==void 0?_:x,S=x.close-C.close;S>0?i[v]-=S:r[v]-=Math.abs(S)}}),u})}},$o={name:"VOL",shortName:"VOL",series:h.IndicatorSeries.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(n,e,t){var o=n.current.kLineData;return{color:o.close>o.open?ee(e.styles,"bars[0].upColor",t.bars[0].upColor):o.open>o.close?ee(e.styles,"bars[0].downColor",t.bars[0].downColor):ee(e.styles,"bars[0].noChangeColor",t.bars[0].noChangeColor)}}}],regenerateFigures:function(n){var e=n.map(function(t,o){return{key:"ma".concat(o+1),title:"MA".concat(t,": "),type:"line"}});return e.push({key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(t,o,i){var r=t.current.kLineData;return{color:r.close>r.open?ee(o.styles,"bars[0].upColor",i.bars[0].upColor):r.open>r.close?ee(o.styles,"bars[0].downColor",i.bars[0].downColor):ee(o.styles,"bars[0].noChangeColor",i.bars[0].noChangeColor)}}}),e},calc:function(n,e){var t=e.calcParams,o=e.figures,i=[];return n.map(function(r,a){var s,l=(s=r.volume)!==null&&s!==void 0?s:0,u={volume:l};return t.forEach(function(c,d){var p,v;i[d]=((p=i[d])!==null&&p!==void 0?p:0)+l,c-1>a||(u[o[d].key]=i[d]/c,i[d]-=(v=n[a-(c-1)].volume)!==null&&v!==void 0?v:0)}),u})}},jo={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,o=e.figures;return n.map(function(i,r){var a={},s=i.close;return t.forEach(function(l,u){var c=l-1;if(r>=c){var d=Si(n.slice(r-c,r+1),"high","low"),p=d[0],v=p-d[1];a[o[u].key]=v===0?0:(s-p)/v*100}}),a})}},Mt={},Go=[No,{name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(n,e,t){var o,i,r,a,s,l=(i=(o=n.prev.indicatorData)===null||o===void 0?void 0:o.ao)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,u=(a=(r=n.current.indicatorData)===null||r===void 0?void 0:r.ao)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER;return{color:s=u>l?ee(e.styles,"bars[0].upColor",t.bars[0].upColor):ee(e.styles,"bars[0].downColor",t.bars[0].downColor),style:u>l?h.PolygonType.Stroke:h.PolygonType.Fill,borderColor:s}}}],calc:function(n,e){var t=e.calcParams,o=Math.max(t[0],t[1]),i=0,r=0,a=0,s=0;return n.map(function(l,u){var c,d={},p=(l.low+l.high)/2;return i+=p,r+=p,u<t[0]-1||(a=i/t[0],i-=((c=n[u-(t[0]-1)]).low+c.high)/2),u<t[1]-1||(s=r/t[1],r-=((c=n[u-(t[1]-1)]).low+c.high)/2),o-1>u||(d.ao=a-s),d})}},{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(n){return n.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(n,e){var t=e.calcParams,o=e.figures,i=[];return n.map(function(r,a){var s={},l=r.close;return t.forEach(function(u,c){var d;if(i[c]=((d=i[c])!==null&&d!==void 0?d:0)+l,a>=u-1){var p=i[c]/t[c];s[o[c].key]=(l-p)/p*100,i[c]-=n[a-(u-1)].close}}),s})}},{name:"BOLL",shortName:"BOLL",series:h.IndicatorSeries.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=t[0]-1,i=0;return n.map(function(r,a){var s={};if(i+=r.close,a>=o){s.mid=i/t[0];var l=function(u,c){var d=u.length,p=0;return u.forEach(function(v){var g=v.close-c;p+=g*g}),Math.sqrt((p=Math.abs(p))/d)}(n.slice(a-o,a+1),s.mid);s.up=s.mid+t[1]*l,s.dn=s.mid-t[1]*l,i-=n[a-o].close}return s})}},{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=0,r=0,a=0;return n.map(function(s,l){var u,c,d={},p=s.high,v=s.low,g=s.open,f=((u=n[l-1])!==null&&u!==void 0?u:s).close;if(r+=p-g,a+=g-v,o+=p-f,i+=f-v,l>=t[0]-1){d.ar=a!==0?r/a*100:0,d.br=i!==0?o/i*100:0;var _=n[l-(t[0]-1)],x=_.high,C=_.low,S=_.open,w=((c=n[l-t[0]])!==null&&c!==void 0?c:n[l-(t[0]-1)]).close;o-=x-w,i-=w-C,r-=x-S,a-=S-C}return d})}},{name:"BBI",shortName:"BBI",series:h.IndicatorSeries.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=Math.max.apply(Math,yi([],le(t),!1)),i=[],r=[];return n.map(function(a,s){var l={},u=a.close;if(t.forEach(function(d,p){var v;i[p]=((v=i[p])!==null&&v!==void 0?v:0)+u,d-1>s||(r[p]=i[p]/d,i[p]-=n[s-(d-1)].close)}),s>=o-1){var c=0;r.forEach(function(d){c+=d}),l.bbi=c/4}return l})}},{name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=t[0]-1,i=0,r=[];return n.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(i+=u,r.push(u),s>=o){var c=i/t[0],d=r.slice(s-o,s+1),p=0;d.forEach(function(g){p+=Math.abs(g-c)});var v=p/t[0];l.cci=v!==0?(u-c)/v/.015:0,i-=(n[s-o].high+n[s-o].low+n[s-o].close)/3}return l})}},{name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=Math.ceil(t[1]/2.5+1),i=Math.ceil(t[2]/2.5+1),r=Math.ceil(t[3]/2.5+1),a=Math.ceil(t[4]/2.5+1),s=0,l=[],u=0,c=[],d=0,p=[],v=0,g=[],f=[];return n.forEach(function(_,x){var C,S,w,D,k,F={},A=(C=n[x-1])!==null&&C!==void 0?C:_,L=(A.high+A.close+A.low+A.open)/4,R=Math.max(0,_.high-L),z=Math.max(0,L-_.low);t[0]-1>x||(F.cr=z!==0?R/z*100:0,s+=F.cr,u+=F.cr,d+=F.cr,v+=F.cr,t[0]+t[1]-2>x||(l.push(s/t[1]),t[0]+t[1]+o-3>x||(F.ma1=l[l.length-1-o]),s-=(S=f[x-(t[1]-1)].cr)!==null&&S!==void 0?S:0),t[0]+t[2]-2>x||(c.push(u/t[2]),t[0]+t[2]+i-3>x||(F.ma2=c[c.length-1-i]),u-=(w=f[x-(t[2]-1)].cr)!==null&&w!==void 0?w:0),t[0]+t[3]-2>x||(p.push(d/t[3]),t[0]+t[3]+r-3>x||(F.ma3=p[p.length-1-r]),d-=(D=f[x-(t[3]-1)].cr)!==null&&D!==void 0?D:0),t[0]+t[4]-2>x||(g.push(v/t[4]),t[0]+t[4]+a-3>x||(F.ma4=g[g.length-1-a]),v-=(k=f[x-(t[4]-1)].cr)!==null&&k!==void 0?k:0)),f.push(F)}),f}},{name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=Math.max(t[0],t[1]),i=0,r=0,a=0,s=[];return n.forEach(function(l,u){var c,d={},p=l.close;i+=p,r+=p;var v=0,g=0;if(t[0]-1>u||(v=i/t[0],i-=n[u-(t[0]-1)].close),t[1]-1>u||(g=r/t[1],r-=n[u-(t[1]-1)].close),u>=o-1){var f=v-g;d.dma=f,a+=f,o+t[2]-2>u||(d.ama=a/t[2],a-=(c=s[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(d)}),s}},{name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=0,r=0,a=0,s=0,l=0,u=0,c=0,d=[];return n.forEach(function(p,v){var g,f,_={},x=(g=n[v-1])!==null&&g!==void 0?g:p,C=x.close,S=p.high,w=p.low,D=S-w,k=Math.abs(S-C),F=Math.abs(C-w),A=S-x.high,L=x.low-w,R=Math.max(Math.max(D,k),F),z=A>0&&A>L?A:0,V=L>0&&L>A?L:0;if(o+=R,i+=z,r+=V,v>=t[0]-1){v>t[0]-1?(a=a-a/t[0]+R,s=s-s/t[0]+z,l=l-l/t[0]+V):(a=o,s=i,l=r);var N=0,H=0;a!==0&&(N=100*s/a,H=100*l/a),_.pdi=N,_.mdi=H;var j=0;H+N!==0&&(j=Math.abs(H-N)/(H+N)*100),u+=j,2*t[0]-2>v||(_.adx=c=v>2*t[0]-2?(c*(t[0]-1)+j)/t[0]:u/t[0],2*t[0]+t[1]-3>v||(_.adxr=(((f=d[v-(t[1]-1)].adx)!==null&&f!==void 0?f:0)+c)/2))}d.push(_)}),d}},{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=[];return n.map(function(r,a){var s,l={};if(a>0){var u=n[a-1],c=r.high,d=r.low,p=(s=r.volume)!==null&&s!==void 0?s:0,v=(c+d)/2-(u.high+u.low)/2;p===0||c-d==0?l.emv=0:l.emv=v/(p/1e8/(c-d)),o+=l.emv,i.push(l.emv),t[0]>a||(l.maEmv=o/t[0],o-=i[a-t[0]])}return l})}},Ho,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=[];return n.forEach(function(r,a){var s,l={};a<t[0]||(l.mtm=r.close-n[a-t[0]].close,o+=l.mtm,t[0]+t[1]-1>a||(l.maMtm=o/t[1],o-=(s=i[a-(t[1]-1)].mtm)!==null&&s!==void 0?s:0)),i.push(l)}),i}},Yo,{name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(n,e,t){var o,i,r,a,s,l=(i=(o=n.prev.indicatorData)===null||o===void 0?void 0:o.macd)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,u=(a=(r=n.current.indicatorData)===null||r===void 0?void 0:r.macd)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER;return s=u>0?ee(e.styles,"bars[0].upColor",t.bars[0].upColor):0>u?ee(e.styles,"bars[0].downColor",t.bars[0].downColor):ee(e.styles,"bars[0].noChangeColor",t.bars[0].noChangeColor),{style:u>l?h.PolygonType.Stroke:h.PolygonType.Fill,color:s,borderColor:s}}}],calc:function(n,e){var t,o,i=e.calcParams,r=0,a=0,s=0,l=0,u=Math.max(i[0],i[1]);return n.map(function(c,d){var p={},v=c.close;return r+=v,i[0]-1>d||(t=d>i[0]-1?(2*v+(i[0]-1)*t)/(i[0]+1):r/i[0]),i[1]-1>d||(o=d>i[1]-1?(2*v+(i[1]-1)*o)/(i[1]+1):r/i[1]),u-1>d||(p.dif=a=t-o,s+=a,u+i[2]-2>d||(p.macd=2*(a-(l=d>u+i[2]-2?(2*a+l*(i[2]-1))/(i[2]+1):s/i[2])),p.dea=l)),p})}},{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=0,r=[];return n.forEach(function(a,s){var l,u,c,d,p=(l=n[s-1])!==null&&l!==void 0?l:a;p.close>a.close?i-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>p.close&&(i+=(c=a.volume)!==null&&c!==void 0?c:0);var v={obv:i};o+=i,t[0]-1>s||(v.maObv=o/t[0],o-=(d=r[s-(t[0]-1)].obv)!==null&&d!==void 0?d:0),r.push(v)}),r}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(n){var e=0;return n.map(function(t,o){var i,r,a={},s=(i=t.volume)!==null&&i!==void 0?i:1,l=((r=n[o-1])!==null&&r!==void 0?r:t).close,u=0,c=l*s;return c!==0&&(u=(t.close-l)/c),a.pvt=e+=u,a})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=0,r=[],a=[];return n.forEach(function(s,l){var u,c,d={},p=((u=n[l-1])!==null&&u!==void 0?u:s).close,v=s.close-p>0?1:0;r.push(v),o+=v,t[0]-1>l||(d.psy=o/t[0]*100,i+=d.psy,t[0]+t[1]-2>l||(d.maPsy=i/t[1],i-=(c=a[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),o-=r[l-(t[0]-1)]),a.push(d)}),a}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=[],i=0;return n.forEach(function(r,a){var s,l,u={};if(a>=t[0]-1){var c=((s=n[a-t[0]])!==null&&s!==void 0?s:n[a-(t[0]-1)]).close;u.roc=c!==0?(r.close-c)/c*100:0,i+=u.roc,t[0]-1+t[1]-1>a||(u.maRoc=i/t[1],i-=(l=o[a-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}o.push(u)}),o}},Uo,{name:"SMA",shortName:"SMA",series:h.IndicatorSeries.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(n,e){var t=e.calcParams,o=0,i=0;return n.map(function(r,a){var s={},l=r.close;return o+=l,t[0]-1>a||(s.sma=i=a>t[0]-1?(l*t[1]+i*(t[0]-t[1]+1))/(t[0]+1):o/t[0]),s})}},{name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=[];return n.forEach(function(i,r){var a,s,l,u,c={},d=i.close;if(r>=t[0]-1){var p=Si(n.slice(r-(t[0]-1),r+1),"high","low"),v=p[1],g=p[0]-v;c.k=((t[1]-1)*((s=(a=o[r-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+(d-v)/(g===0?1:g)*100)/t[1],c.d=((t[2]-1)*((u=(l=o[r-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}o.push(c)}),o}},{name:"SAR",shortName:"SAR",series:h.IndicatorSeries.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(n,e,t){var o,i,r=n.current,a=(i=(o=r.indicatorData)===null||o===void 0?void 0:o.sar)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,s=r.kLineData;return{color:((s==null?void 0:s.high)+(s==null?void 0:s.low))/2>a?ee(e.styles,"circles[0].upColor",t.circles[0].upColor):ee(e.styles,"circles[0].downColor",t.circles[0].downColor)}}}],calc:function(n,e){var t=e.calcParams,o=t[0]/100,i=t[1]/100,r=t[2]/100,a=o,s=-100,l=!1,u=0;return n.map(function(c,d){var p=u,v=c.high,g=c.low;if(l){(s===-100||v>s)&&(s=v,a=Math.min(a+i,r)),u=p+a*(s-p);var f=Math.min(n[Math.max(1,d)-1].low,g);u>c.low?(u=s,a=o,s=-100,l=!l):u>f&&(u=f)}else{(s===-100||s>g)&&(s=g,a=Math.min(a+i,r)),u=p+a*(s-p);var _=Math.max(n[Math.max(1,d)-1].high,v);c.high>u?(u=s,a=0,s=-100,l=!l):_>u&&(u=_)}return{sar:u}})}},{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(n,e){var t,o,i,r=e.calcParams,a=0,s=0,l=0,u=0,c=[];return n.forEach(function(d,p){var v,g={},f=d.close;if(a+=f,p>=r[0]-1&&(s+=t=p>r[0]-1?(2*f+(r[0]-1)*t)/(r[0]+1):a/r[0],p>=2*r[0]-2&&(l+=o=p>2*r[0]-2?(2*t+(r[0]-1)*o)/(r[0]+1):s/r[0],p>=3*r[0]-3))){var _=void 0,x=0;p>3*r[0]-3?x=((_=(2*o+(r[0]-1)*i)/(r[0]+1))-i)/i*100:_=l/r[0],i=_,g.trix=x,u+=x,3*r[0]+r[1]-4>p||(g.maTrix=u/r[1],u-=(v=c[p-(r[1]-1)].trix)!==null&&v!==void 0?v:0)}c.push(g)}),c}},$o,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(n,e){var t=e.calcParams,o=0,i=0,r=0,a=0,s=[];return n.forEach(function(l,u){var c,d,p,v,g,f={},_=l.close,x=((c=n[u-1])!==null&&c!==void 0?c:l).close,C=(d=l.volume)!==null&&d!==void 0?d:0;if(_>x?o+=C:x>_?i+=C:r+=C,u>=t[0]-1){var S=r/2;f.vr=i+S===0?0:(o+S)/(i+S)*100,a+=f.vr,t[0]+t[1]-2>u||(f.maVr=a/t[1],a-=(p=s[u-(t[1]-1)].vr)!==null&&p!==void 0?p:0);var w=n[u-(t[0]-1)],D=(v=n[u-t[0]])!==null&&v!==void 0?v:w,k=w.close,F=(g=w.volume)!==null&&g!==void 0?g:0;k>D.close?o-=F:D.close>k?i-=F:r-=F}s.push(f)}),s}},jo];function bi(n){var e;return(e=Mt[n])!==null&&e!==void 0?e:null}Go.forEach(function(n){Mt[n.name]=wi.extend(n)});var Xt,Xo=function(){function n(e){this._instances=new Map,this._chartStore=e}return n.prototype._overrideInstance=function(e,t){var o=t.shortName,i=t.series,r=t.calcParams,a=t.precision,s=t.figures,l=t.minValue,u=t.maxValue,c=t.shouldOhlc,d=t.shouldFormatBigNumber,p=t.visible,v=t.styles,g=t.extendData,f=t.regenerateFigures,_=t.createTooltipDataSource,x=t.draw,C=t.calc,S=!1;o!==void 0&&e.setShortName(o)&&(S=!0),i!==void 0&&e.setSeries(i)&&(S=!0);var w=!1;return r!==void 0&&e.setCalcParams(r)&&(S=!0,w=!0),s!==void 0&&e.setFigures(s)&&(S=!0,w=!0),l!==void 0&&e.setMinValue(l)&&(S=!0),u!==void 0&&e.setMinValue(u)&&(S=!0),a!==void 0&&e.setPrecision(a)&&(S=!0),c!==void 0&&e.setShouldOhlc(c)&&(S=!0),d!==void 0&&e.setShouldFormatBigNumber(d)&&(S=!0),p!==void 0&&e.setVisible(p)&&(S=!0),v!==void 0&&e.setStyles(v)&&(S=!0),g!==void 0&&e.setExtendData(g)&&(S=!0,w=!0),f!==void 0&&e.setRegenerateFigures(f)&&(S=!0),_!==void 0&&e.setCreateTooltipDataSource(_)&&(S=!0),x!==void 0&&e.setDraw(x)&&(S=!0),C!==void 0&&(e.calc=C,w=!0),[S,w]},n.prototype.addInstance=function(e,t,o){var i;return It(this,void 0,void 0,function(){var r,a,s,l;return Dt(this,function(u){switch(u.label){case 0:return r=e.name,a=this._instances.get(t),(i=a==null?void 0:a.has(r))!==null&&i!==void 0&&i?[4,Promise.reject(Error("Duplicate indicators."))]:[3,2];case 1:case 3:return[2,u.sent()];case 2:return a===void 0&&(a=new Map,this._instances.set(t,a)),s=bi(r),l=new s,this._overrideInstance(l,e),o||a.clear(),a.set(r,l),[4,l.calcIndicator(this._chartStore.getDataList())]}})})},n.prototype.getInstances=function(e){var t;return(t=this._instances.get(e))!==null&&t!==void 0?t:new Map},n.prototype.removeInstance=function(e,t){var o=!1,i=this._instances.get(e);return i!==void 0&&(t!==void 0?i.has(t)&&(i.delete(t),o=!0):(i.clear(),o=!0),i.size===0&&this._instances.delete(e)),o},n.prototype.hasInstances=function(e){return this._instances.has(e)},n.prototype.calcInstance=function(e,t){var o;return It(this,void 0,void 0,function(){var i,r,a,s=this;return Dt(this,function(l){switch(l.label){case 0:return i=[],e!==void 0?t!==void 0?(r=this._instances.get(t),(o=r==null?void 0:r.has(e))!==null&&o!==void 0&&o&&(a=r==null?void 0:r.get(e),i.push(a.calcIndicator(this._chartStore.getDataList())))):this._instances.forEach(function(u){if(u.has(e)){var c=u==null?void 0:u.get(e);i.push(c.calcIndicator(s._chartStore.getDataList()))}}):this._instances.forEach(function(u){u.forEach(function(c){i.push(c.calcIndicator(s._chartStore.getDataList()))})}),[4,Promise.all(i)];case 1:return[2,l.sent().includes(!0)]}})})},n.prototype.getInstanceByPaneId=function(e,t){var o;if(e!==void 0){var i=this._instances.get(e);return t!==void 0?(o=i==null?void 0:i.get(t))!==null&&o!==void 0?o:null:i??null}return this._instances},n.prototype.setSeriesPrecision=function(e){this._instances.forEach(function(t){t.forEach(function(o){o.series===h.IndicatorSeries.Price&&o.setPrecision(e.price,!0),o.series===h.IndicatorSeries.Volume&&o.setPrecision(e.volume,!0)})})},n.prototype.override=function(e,t){return It(this,void 0,void 0,function(){var o,i,r,a,s,l,u=this;return Dt(this,function(c){switch(c.label){case 0:return o=e.name,i=new Map,t!==null?(r=this._instances.get(t))!==void 0&&i.set(t,r):i=this._instances,a=!1,s=[],i.forEach(function(d){var p=d.get(o);if(p!==void 0){var v=u._overrideInstance(p,e);v[1]?s.push(p.calcIndicator(u._chartStore.getDataList())):v[0]&&(a=!0)}}),[4,Promise.all(s)];case 1:return l=c.sent(),[2,[a,l.includes(!0)]]}})})},n}(),qo=function(){function n(e){this._crosshair={},this._activeIcon=null,this._chartStore=e}return n.prototype.setCrosshair=function(e,t){var o,i,r=this._chartStore.getDataList(),a=e??{},s=r[i=a.x!==void 0?0>(o=this._chartStore.getTimeScaleStore().coordinateToDataIndex(a.x))?0:o>r.length-1?r.length-1:o:o=r.length-1],l=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(o),u=this._crosshair.x,c=this._crosshair.y,d=this._crosshair.paneId;this._crosshair=O(O({},a),{realX:l,kLineData:s,realDataIndex:o,dataIndex:i}),u===a.x&&c===a.y&&d===a.paneId||(s!==null&&this._chartStore.getChart().crosshairChange(this._crosshair),t!=null&&t||this._chartStore.getChart().updatePane(1))},n.prototype.recalculateCrosshair=function(e){this.setCrosshair(this._crosshair,e)},n.prototype.getCrosshair=function(){return this._crosshair},n.prototype.setActiveIcon=function(e){this._activeIcon=e??null},n.prototype.getActiveIcon=function(){return this._activeIcon},n.prototype.clear=function(){this.setCrosshair({},!0),this.setActiveIcon()},n}();h.OverlayMode=void 0,(Xt=h.OverlayMode||(h.OverlayMode={})).Normal="normal",Xt.WeakMagnet="weak_magnet",Xt.StrongMagnet="strong_magnet";var rt="overlay_figure_",Ko=Number.MAX_SAFE_INTEGER,Ei=function(){function n(e){this.currentStep=1,this.points=[],this._prevPressedPoint=null,this._prevPressedPoints=[];var t=e.mode,o=e.modeSensitivity,i=e.extendData,r=e.styles,a=e.totalStep,s=e.lock,l=e.visible,u=e.zLevel,c=e.needDefaultPointFigure,d=e.needDefaultXAxisFigure,p=e.needDefaultYAxisFigure,v=e.createPointFigures,g=e.createXAxisFigures,f=e.createYAxisFigures,_=e.performEventPressedMove,x=e.performEventMoveForDrawing,C=e.onDrawStart,S=e.onDrawing,w=e.onDrawEnd,D=e.onClick,k=e.onDoubleClick,F=e.onRightClick,A=e.onPressedMoveStart,L=e.onPressedMoving,R=e.onPressedMoveEnd,z=e.onMouseEnter,V=e.onMouseLeave,N=e.onRemoved,H=e.onSelected,j=e.onDeselected;this.name=e.name,this.totalStep=a===void 0||2>a?1:a,this.lock=s!=null&&s,this.visible=l==null||l,this.zLevel=u??0,this.needDefaultPointFigure=c!=null&&c,this.needDefaultXAxisFigure=d!=null&&d,this.needDefaultYAxisFigure=p!=null&&p,this.mode=t??h.OverlayMode.Normal,this.modeSensitivity=o??8,this.extendData=i,this.styles=r??{},this.createPointFigures=v??null,this.createXAxisFigures=g??null,this.createYAxisFigures=f??null,this.performEventPressedMove=_??null,this.performEventMoveForDrawing=x??null,this.onDrawStart=C??null,this.onDrawing=S??null,this.onDrawEnd=w??null,this.onClick=D??null,this.onDoubleClick=k??null,this.onRightClick=F??null,this.onPressedMoveStart=A??null,this.onPressedMoving=L??null,this.onPressedMoveEnd=R??null,this.onMouseEnter=z??null,this.onMouseLeave=V??null,this.onRemoved=N??null,this.onSelected=H??null,this.onDeselected=j??null}return n.prototype.setId=function(e){return this.id===void 0&&(this.id=e,!0)},n.prototype.setGroupId=function(e){return this.groupId===void 0&&(this.groupId=e,!0)},n.prototype.setDefaultZLevel=function(e){return this.defaultZLevel===void 0&&(this.defaultZLevel=e,!0)},n.prototype.setPaneId=function(e){this.paneId=e},n.prototype.setExtendData=function(e){return e!==this.extendData&&(this.extendData=e,!0)},n.prototype.setStyles=function(e){return e!==null&&(E(this.styles,e),!0)},n.prototype.setPoints=function(e){if(e.length>0){var t=void 0;if(this.points=yi([],le(e),!1),this.totalStep-1>e.length?(this.currentStep=e.length+1,t=e.length):(this.currentStep=-1,t=this.totalStep-1),this.performEventMoveForDrawing!==null)for(var o=0;t>o;o++)this.performEventMoveForDrawing({currentStep:o+2,mode:this.mode,points:this.points,performPointIndex:o,performPoint:this.points[o]});return this.currentStep===-1&&this.performEventPressedMove!==null&&this.performEventPressedMove({currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}),!0}return!1},n.prototype.setLock=function(e){return this.lock!==e&&(this.lock=e,!0)},n.prototype.setVisible=function(e){return this.visible!==e&&(this.visible=e,!0)},n.prototype.resetZLevel=function(){this.zLevel=this.defaultZLevel},n.prototype.setZLevel=function(e){return this.zLevel!==e&&(this.zLevel=e,!0)},n.prototype.setMode=function(e){return this.mode!==e&&(this.mode=e,!0)},n.prototype.setModeSensitivity=function(e){return this.modeSensitivity!==e&&(this.modeSensitivity=e,!0)},n.prototype.setOnDrawStartCallback=function(e){return this.onDrawStart!==e&&(this.onDrawStart=e,!0)},n.prototype.setOnDrawingCallback=function(e){return this.onDrawing!==e&&(this.onDrawing=e,!0)},n.prototype.setOnDrawEndCallback=function(e){return this.onDrawEnd!==e&&(this.onDrawEnd=e,!0)},n.prototype.setOnClickCallback=function(e){return this.onClick!==e&&(this.onClick=e,!0)},n.prototype.setOnDoubleClickCallback=function(e){return this.onDoubleClick!==e&&(this.onDoubleClick=e,!0)},n.prototype.setOnRightClickCallback=function(e){return this.onRightClick!==e&&(this.onRightClick=e,!0)},n.prototype.setOnPressedMoveStartCallback=function(e){return this.onPressedMoveStart!==e&&(this.onPressedMoveStart=e,!0)},n.prototype.setOnPressedMovingCallback=function(e){return this.onPressedMoving!==e&&(this.onPressedMoving=e,!0)},n.prototype.setOnPressedMoveEndCallback=function(e){return this.onPressedMoveEnd!==e&&(this.onPressedMoveEnd=e,!0)},n.prototype.setOnMouseEnterCallback=function(e){return this.onMouseEnter!==e&&(this.onMouseEnter=e,!0)},n.prototype.setOnMouseLeaveCallback=function(e){return this.onMouseLeave!==e&&(this.onMouseLeave=e,!0)},n.prototype.setOnRemovedCallback=function(e){return this.onRemoved!==e&&(this.onRemoved=e,!0)},n.prototype.setOnSelectedCallback=function(e){return this.onSelected!==e&&(this.onSelected=e,!0)},n.prototype.setOnDeselectedCallback=function(e){return this.onDeselected!==e&&(this.onDeselected=e,!0)},n.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},n.prototype.forceComplete=function(){this.currentStep=-1},n.prototype.isDrawing=function(){return this.currentStep!==-1},n.prototype.isStart=function(){return this.currentStep===1},n.prototype.eventMoveForDrawing=function(e){var t,o=this.currentStep-1,i={};e.timestamp!==void 0&&(i.timestamp=e.timestamp),e.dataIndex!==void 0&&(i.dataIndex=e.dataIndex),e.value!==void 0&&(i.value=e.value),this.points[o]=i,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:o,performPoint:i})},n.prototype.eventPressedPointMove=function(e,t){var o;e.dataIndex!==void 0&&(this.points[t].dataIndex=e.dataIndex,this.points[t].timestamp=e.timestamp),e.value!==void 0&&(this.points[t].value=e.value),(o=this.performEventPressedMove)===null||o===void 0||o.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},n.prototype.startPressedMove=function(e){this._prevPressedPoint=O({},e),this._prevPressedPoints=T(this.points)},n.prototype.eventPressedOtherMove=function(e,t){var o,i;this._prevPressedPoint!==null&&(e.dataIndex!==void 0&&this._prevPressedPoint.dataIndex!==void 0&&(o=e.dataIndex-this._prevPressedPoint.dataIndex),e.value!==void 0&&this._prevPressedPoint.value!==void 0&&(i=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(r){var a;r.dataIndex===void 0&&r.timestamp!==void 0&&(r.dataIndex=t.timestampToDataIndex(r.timestamp));var s=O({},r);return o!==void 0&&r.dataIndex!==void 0&&(s.dataIndex=r.dataIndex+o,s.timestamp=(a=t.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),i!==void 0&&r.value!==void 0&&(s.value=r.value+i),s}))},n.extend=function(e){return function(t){function o(){return t.call(this,e)||this}return $(o,t),o}(n)},n}(),Zo={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.precision,o=n.thousandsSeparator,i=n.overlay.points;if(e.length>0){var r=[],a=[],s=n.bounding.width;if(e.length>1&&i[0].value!==void 0&&i[1].value!==void 0){var l=e[0].y-e[1].y,u=i[0].value-i[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(c){var d,p=e[1].y+l*c,v=re((((d=i[1].value)!==null&&d!==void 0?d:0)+u*c).toFixed(t.price),o);r.push({coordinates:[{x:0,y:p},{x:s,y:p}]}),a.push({x:0,y:p,text:"".concat(v," (").concat((100*c).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:r},{type:"text",isCheckEvent:!1,attrs:a}]}return[]}},Jo={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t={x:0,y:e[0].y};return e[1]!==void 0&&e[1].x>e[0].x&&(t.x=n.bounding.width),[{type:"line",attrs:{coordinates:[e[0],t]}}]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(n){n.currentStep===2&&(n.points[0].value=n.performPoint.value)}},qt=function(){function n(){this._children=[],this._callbacks=new Map}return n.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},n.prototype.onEvent=function(e,t,o){var i=this._callbacks.get(e);return!(i===void 0||!this.checkEventOn(t))&&i(t,o)},n.prototype.checkEventOn=function(e){var t,o;try{for(var i=pt(this._children),r=i.next();!r.done;r=i.next())if(r.value.checkEventOn(e))return!0}catch(a){t={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return!1},n.prototype.dispatchEvent=function(e,t,o){var i=this._children.length-1;if(i>-1){for(var r=i;r>-1;r--)if(this._children[r].dispatchEvent(e,t,o))return!0}return this.onEvent(e,t,o)},n.prototype.addChild=function(e){return this._children.push(e),this},n.prototype.clear=function(){this._children=[]},n}(),Ti=function(n){function e(t){var o=n.call(this)||this;return o.attrs=t.attrs,o.styles=t.styles,o}return $(e,n),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var o=function(i){function r(){return i!==null&&i.apply(this,arguments)||this}return $(r,i),r.prototype.checkEventOnImp=function(a,s,l){return t.checkEventOn(a,s,l)},r.prototype.drawImp=function(a,s,l){t.draw(a,s,l)},r}(e);return o},e}(qt);function Ii(n,e){return Math.sqrt(Math.pow(n.x+e.x,2)+Math.pow(n.y+e.y,2))}function Qo(n){var e=Ii(n[0],n[1]),t=e+Ii(n[1],n[2]),o=[n[2].x-n[0].x,n[2].y-n[0].y];return[{x:n[1].x-.5*o[0]*e/t,y:n[1].y-.5*o[1]*e/t},{x:n[1].x+.5*o[0]*e/t,y:n[1].y+.5*o[1]*e/t}]}function Di(n,e){var t=e.coordinates;if(t.length>1)for(var o=1;t.length>o;o++){var i=t[o-1],r=t[o];if(i.x===r.x){if(4>Math.abs(i.y-n.y)+Math.abs(r.y-n.y)-Math.abs(i.y-r.y)&&2>Math.abs(n.x-i.x))return!0}else{var a=Ft(i,r),s=Kt(a,n),l=Math.abs(s-n.y);if(4>Math.abs(i.x-n.x)+Math.abs(r.x-n.x)-Math.abs(i.x-r.x)&&4>l*l/(a[0]*a[0]+1))return!0}}return!1}function Kt(n,e){return n!=null?e.x*n[0]+n[1]:e.y}function ft(n,e,t){return Kt(Ft(n,e),t)}function Ft(n,e){var t=n.x-e.x;if(t!==0){var o=(n.y-e.y)/t;return[o,n.y-o*n.x]}return null}function Pi(n,e,t){var o=e.coordinates,i=o.length;if(i>1){var r=t.style,a=r===void 0?h.LineType.Solid:r,s=t.smooth,l=t.size,u=t.color,c=u===void 0?"currentColor":u,d=t.dashedValue,p=d===void 0?[2,2]:d;if(n.lineWidth=l===void 0?1:l,n.strokeStyle=c,n.setLineDash(a===h.LineType.Dashed?p:[]),n.beginPath(),n.moveTo(o[0].x,o[0].y),s!=null&&s){for(var v=[],g=1;i-1>g;g++)v=v.concat(Qo([o[g-1],o[g],o[g+1]]));n.quadraticCurveTo(v[0].x,v[0].y,o[1].x,o[1].y);for(var f=2;i-1>f;f++)n.bezierCurveTo(v[2*(f-2)+1].x,v[2*(f-2)+1].y,v[2*(f-1)].x,v[2*(f-1)].y,o[f].x,o[f].y);n.quadraticCurveTo(v[2*(f-2)+1].x,v[2*(f-2)+1].y,o[f].x,o[f].y)}else for(f=1;o.length>f;f++)n.lineTo(o[f].x,o[f].y);n.stroke(),n.closePath()}}var en={name:"line",checkEventOn:Di,draw:function(n,e,t){Pi(n,e,t)}};function Mi(n,e,t){var o=t??0,i=[];if(n.length>1)if(n[0].x===n[1].x){var r=e.height;if(i.push({coordinates:[{x:n[0].x,y:0},{x:n[0].x,y:r}]}),n.length>2){i.push({coordinates:[{x:n[2].x,y:0},{x:n[2].x,y:r}]});for(var a=n[0].x-n[2].x,s=0;o>s;s++){var l=a*(s+1);i.push({coordinates:[{x:n[0].x+l,y:0},{x:n[0].x+l,y:r}]})}}}else{var u=e.width,c=Ft(n[0],n[1]),d=c[0],p=c[1];if(i.push({coordinates:[{x:0,y:0*d+p},{x:u,y:u*d+p}]}),n.length>2){var v=n[2].y-d*n[2].x;for(i.push({coordinates:[{x:0,y:0*d+v},{x:u,y:u*d+v}]}),a=p-v,s=0;o>s;s++){var g=p+a*(s+1);i.push({coordinates:[{x:0,y:0*d+g},{x:u,y:u*d+g}]})}}}return i}function tn(n,e){if(n.length>1){var t=void 0;return t=n[0].x===n[1].x&&n[0].y!==n[1].y?n[1].y>n[0].y?{x:n[0].x,y:e.height}:{x:n[0].x,y:0}:n[0].x>n[1].x?{x:0,y:ft(n[0],n[1],{x:0,y:n[0].y})}:{x:e.width,y:ft(n[0],n[1],{x:e.width,y:n[0].y})},{coordinates:[n[0],t]}}return[]}var on={name:"simpleAnnotation",totalStep:2,styles:{text:{borderSize:1,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#1677FF"},line:{style:h.LineType.Dashed}},createPointFigures:function(n){var e,t,o=n.overlay,i=n.coordinates;M(o.extendData)&&(t=b(o.extendData)?o.extendData(o):(e=o.extendData)!==null&&e!==void 0?e:"");var r=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:r,y:a},{x:r,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:r,y:s},{x:r-4,y:l},{x:r+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:r,y:l,text:t??"",align:"center",baseline:"bottom"},ignoreEvent:!0}]}},nn={name:"simpleTag",totalStep:2,styles:{text:{borderSize:1,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#1677FF"}},createPointFigures:function(n){var e=n.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:n.bounding.width,y:e[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(n){var e,t,o,i,r,a=n.overlay,s=n.coordinates,l=n.bounding,u=n.yAxis,c=n.precision;return(e=u==null?void 0:u.isFromZero())!==null&&e!==void 0&&e?(o="left",i=0):(o="right",i=l.width),M(a.extendData)&&(r=b(a.extendData)?a.extendData(a):(t=a.extendData)!==null&&t!==void 0?t:""),M(r)||a.points[0].value===void 0||(r=ie(a.points[0].value,c.price)),{type:"text",attrs:{x:i,y:s[0].y,text:r??"",align:o,baseline:"middle"}}}},mt={};function rn(n){var e;return(e=mt[n])!==null&&e!==void 0?e:null}function Fi(n){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return n!==void 0&&E(e,n),e}[Zo,Jo,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(n){n.currentStep===2&&(n.points[0].value=n.performPoint.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:n.bounding.width,y:e[0].y}]}}]}},{name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){return[{type:"line",attrs:Mi(n.coordinates,n.bounding)}]}},{name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){return[{type:"line",attrs:Mi(n.coordinates,n.bounding,1)}]}},{name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.thousandsSeparator,o=n.overlay.points[0].value;return[{type:"line",attrs:{coordinates:[e[0],{x:n.bounding.width,y:e[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:e[0].x,y:e[0].y,text:re((o===void 0?0:o).toFixed(n.precision.price),t),baseline:"bottom"}}]}},{name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){return[{type:"line",attrs:tn(n.coordinates,n.bounding)}]}},{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},{name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates,t=n.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:ft(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:ft(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;if(e.length===2){var t={x:e[0].x,y:0};return e[1].y>e[0].y&&(t.y=n.bounding.height),[{type:"line",attrs:{coordinates:[e[0],t]}}]}return[]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(n){var e=n.points,t=n.performPoint;n.currentStep===2&&(e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(n){var e=n.points,t=n.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(n){var e=n.points,t=n.performPoint;n.currentStep===2&&(e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(n){var e=n.coordinates;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:n.bounding.height}]}}]}},on,nn].forEach(function(n){mt[n.name]=Ei.extend(n)});var ce="main",Ae="xAxis",Le="yAxis",yt="separator",ki=function(n){function e(t,o){var i=n.call(this)||this;return i._bounding=Fi(),i._pane=o,i._init(t),i}return $(e,n),e.prototype._init=function(t){if(this._container=ke("div",this.getContainerStyle()),this.insertBefore()){var o=t.lastChild;o!==null?t.insertBefore(this._container,o):t.appendChild(this._container)}else t.appendChild(this._container);this.initDom(this._container)},e.prototype.setBounding=function(t){return E(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.insertBefore=function(){return!1},e}(qt),an=function(n){function e(t,o){var i,r,a,s=n.call(this,t,o)||this;return s._dragFlag=!1,s._dragStartY=0,s._topPaneHeight=0,s._currentPaneHeight=0,s._pressedMouseMoveEvent=(i=s._pressedTouchMouseMoveEvent,r=20,a=0,function(){var l=Date.now();l-a>(r??20)&&(i.apply(this,arguments),a=l)}),s.registerEvent("touchStartEvent",s._mouseDownEvent.bind(s)).registerEvent("touchMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("touchEndEvent",s._mouseUpEvent.bind(s)).registerEvent("mouseDownEvent",s._mouseDownEvent.bind(s)).registerEvent("mouseUpEvent",s._mouseUpEvent.bind(s)).registerEvent("pressedMouseMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("mouseEnterEvent",s._mouseEnterEvent.bind(s)).registerEvent("mouseLeaveEvent",s._mouseLeaveEvent.bind(s)),s}return $(e,n),e.prototype.getName=function(){return yt},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){var o,i;this._dragFlag=!0,this._dragStartY=t.pageY;var r=this.getPane();return this._topPaneHeight=(i=(o=r.getTopPane())===null||o===void 0?void 0:o.getBounding().height)!==null&&i!==void 0?i:0,this._currentPaneHeight=r.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var o=t.pageY-this._dragStartY,i=this.getPane(),r=i.getTopPane(),a=0>o;if(r!==null&&i.getOptions().dragEnabled){var s=void 0,l=void 0,u=void 0,c=void 0;a?(s=r,l=i,u=this._topPaneHeight,c=this._currentPaneHeight):(s=i,l=r,u=this._currentPaneHeight,c=this._topPaneHeight);var d=s.getOptions().minHeight;if(u>d){var p=Math.max(u-Math.abs(o),d),v=u-p;s.setBounding({height:p}),l.setBounding({height:c+v});var g=i.getChart();g.getChartStore().getActionStore().execute(h.ActionType.OnPaneDrag,{paneId:i.getId}),g.adjustPaneViewport(!0,!0,!0,!0,!0)}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getOptions().dragEnabled){var o=t.getChart().getStyles().separator;return this._moveDom.style.background=o.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this._moveDom.style.background="",!0)},e.prototype.getContainerStyle=function(){return{margin:"0",padding:"0",position:"relative",boxSizing:"border-box"}},e.prototype.insertBefore=function(){return!0},e.prototype.initDom=function(t){this._moveDom=ke("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"}),t.appendChild(this._moveDom)},e.prototype.updateImp=function(t,o,i){if(i===4||i===2){var r=this.getPane().getChart().getStyles().separator;this._moveDom.style.top="".concat(-Math.floor((7-r.size)/2),"px"),this._moveDom.style.height="".concat(7,"px");var a=r.fill;t.style.backgroundColor=r.color,t.style.height="".concat(r.size,"px"),t.style.marginLeft="".concat(a?0:o.left,"px"),t.style.width=a?"100%":"".concat(o.width,"px")}},e.prototype.getImage=function(){var t=this.getPane().getChart().getStyles().separator,o=this.getContainer().offsetWidth,i=t.size,r=ke("canvas",{width:"".concat(o,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),a=r.getContext("2d"),s=Ze(r);return r.width=o*s,r.height=i*s,a.scale(s,s),a.fillStyle=t.color,a.fillRect(this.getBounding().left,0,o,i),r},e}(ki),he="candle_pane",sn="indicator_pane_",ve="xaxis_pane",Ai=function(){function n(e,t,o,i,r){this._yAxisWidget=null,this._separatorWidget=null,this._axis=this.createAxisComponent(),this._bounding=Fi(),this._options={minHeight:30,dragEnabled:!0,gap:{top:.2,bottom:.1},axisOptions:{scrollZoomEnabled:!0}},this._chart=t,this._id=o,this._topPane=i??null,this._bottomPane=r??null,this._init(e)}return n.prototype._init=function(e){this._container=e,this._seriesContainer=ke("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),this._separatorWidget=this.createSeparatorWidget(e);var t=e.lastChild;t!==null?e.insertBefore(this._seriesContainer,t):e.appendChild(this._seriesContainer),this._mainWidget=this.createMainWidget(this._seriesContainer),this._yAxisWidget=this.createYAxisWidget(this._seriesContainer)},n.prototype.getContainer=function(){return this._seriesContainer},n.prototype.getId=function(){return this._id},n.prototype.setOptions=function(e){var t,o,i,r,a;return E(this._options,e),this.getId()===ve?(r=this.getMainWidget().getContainer(),a="ew-resize"):(r=(t=this.getYAxisWidget())===null||t===void 0?void 0:t.getContainer(),a="ns-resize"),r.style.cursor=(i=(o=e.axisOptions)===null||o===void 0?void 0:o.scrollZoomEnabled)===null||i===void 0||i?a:"default",this},n.prototype.getOptions=function(){return this._options},n.prototype.getChart=function(){return this._chart},n.prototype.getAxisComponent=function(){return this._axis},n.prototype.setBounding=function(e,t,o){var i,r,a;E(this._bounding,e);var s=0;if(this._separatorWidget!==null){s=this._chart.getStyles().separator.size;var l=O(O({},e),{height:7});e.top!==void 0&&(l.top=e.top-Math.floor((7-s)/2)),this._separatorWidget.setBounding(l)}var u={};return e.height!==void 0&&(u.height=e.height-s),e.top!==void 0&&(u.top=e.top+s),this._mainWidget.setBounding(u),(i=this._yAxisWidget)===null||i===void 0||i.setBounding(u),t!==void 0&&(this._mainWidget.setBounding(t),(r=this._separatorWidget)===null||r===void 0||r.setBounding(t)),o!==void 0&&((a=this._yAxisWidget)===null||a===void 0||a.setBounding(o)),this},n.prototype.getTopPane=function(){return this._topPane},n.prototype.setTopPane=function(e){return this._topPane=e,this},n.prototype.getBottomPane=function(){return this._bottomPane},n.prototype.setBottomPane=function(e){return this._bottomPane=e,this},n.prototype.getBounding=function(){return this._bounding},n.prototype.getMainWidget=function(){return this._mainWidget},n.prototype.getYAxisWidget=function(){return this._yAxisWidget},n.prototype.getSeparatorWidget=function(){return this._separatorWidget},n.prototype.update=function(e){var t,o;this._bounding.width!==this._seriesContainer.offsetWidth&&(this._seriesContainer.style.width="".concat(this._bounding.width,"px"));var i=this._mainWidget.getBounding().height;i!==this._seriesContainer.offsetHeight&&(this._seriesContainer.style.height="".concat(i,"px"));var r=e??3;this._mainWidget.update(r),(t=this._yAxisWidget)===null||t===void 0||t.update(r),(o=this._separatorWidget)===null||o===void 0||o.update(r)},n.prototype.getImage=function(e){var t=this._bounding,o=t.width,i=t.height,r=ke("canvas",{width:"".concat(o,"px"),height:"".concat(i,"px"),boxSizing:"border-box"}),a=r.getContext("2d"),s=Ze(r);r.width=o*s,r.height=i*s,a.scale(s,s);var l=0;if(this._separatorWidget!=null){var u=this.getChart().getStyles().separator.size;l=u,a.drawImage(this._separatorWidget.getImage(),0,0,o,u)}var c=this._mainWidget.getBounding();if(a.drawImage(this._mainWidget.getImage(e),c.left,l,c.width,c.height),this._yAxisWidget!==null){var d=this._yAxisWidget.getBounding();a.drawImage(this._yAxisWidget.getImage(e),d.left,l,d.width,d.height)}return r},n.prototype.destroy=function(){this._container.removeChild(this._seriesContainer),this._separatorWidget!==null&&this._container.removeChild(this._separatorWidget.getContainer())},n.prototype.createSeparatorWidget=function(e){return null},n.prototype.createYAxisWidget=function(e){return null},n}(),ln=function(){function n(e){this._instances=new Map,this._counter=new Map,this._progressInstanceInfo=null,this._pressedInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chartStore=e}return n.prototype._overrideInstance=function(e,t){var o=t.id,i=t.groupId,r=t.points,a=t.styles,s=t.lock,l=t.visible,u=t.zLevel,c=t.mode,d=t.modeSensitivity,p=t.extendData,v=t.onDrawStart,g=t.onDrawing,f=t.onDrawEnd,_=t.onClick,x=t.onDoubleClick,C=t.onRightClick,S=t.onPressedMoveStart,w=t.onPressedMoving,D=t.onPressedMoveEnd,k=t.onMouseEnter,F=t.onMouseLeave,A=t.onRemoved,L=t.onSelected,R=t.onDeselected,z=!1,V=!1;return o!==void 0&&e.setId(o),i!==void 0&&e.setGroupId(i),r!==void 0&&e.setPoints(r)&&(z=!0),a!==void 0&&e.setStyles(a)&&(z=!0),s!==void 0&&e.setLock(s),l!==void 0&&e.setVisible(l)&&(z=!0),u!==void 0&&e.setZLevel(u)&&(z=!0,V=!0),c!==void 0&&e.setMode(c),d!==void 0&&e.setModeSensitivity(d),p!==void 0&&e.setExtendData(p)&&(z=!0),v!==void 0&&e.setOnDrawStartCallback(v),g!==void 0&&e.setOnDrawingCallback(g),f!==void 0&&e.setOnDrawEndCallback(f),_!==void 0&&e.setOnClickCallback(_),x!==void 0&&e.setOnDoubleClickCallback(x),C!==void 0&&e.setOnRightClickCallback(C),S!==void 0&&e.setOnPressedMoveStartCallback(S),w!==void 0&&e.setOnPressedMovingCallback(w),D!==void 0&&e.setOnPressedMoveEndCallback(D),k!==void 0&&e.setOnMouseEnterCallback(k),F!==void 0&&e.setOnMouseLeaveCallback(F),A!==void 0&&e.setOnRemovedCallback(A),L!==void 0&&e.setOnSelectedCallback(L),R!==void 0&&e.setOnDeselectedCallback(R),[z,V]},n.prototype.getInstanceById=function(e){var t,o;try{for(var i=pt(this._instances),r=i.next();!r.done;r=i.next()){var a=r.value[1].find(function(s){return s.id===e});if(a!==void 0)return a}}catch(s){t={error:s}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return this._progressInstanceInfo!==null&&this._progressInstanceInfo.instance.id===e?this._progressInstanceInfo.instance:null},n.prototype._sort=function(e){var t;e!==void 0?(t=this._instances.get(e))===null||t===void 0||t.sort(function(o,i){return o.defaultZLevel-i.defaultZLevel}).sort(function(o,i){return o.zLevel-i.zLevel}):this._instances.forEach(function(o){o.sort(function(i,r){return i.defaultZLevel-r.defaultZLevel}).sort(function(i,r){return i.zLevel-r.zLevel})})},n.prototype.addInstances=function(e,t,o){var i=this,r=e.map(function(a){var s,l,u,c,d,p=(s=a.id)!==null&&s!==void 0?s:xi("overlay_");if(i.getInstanceById(p)===null){var v=rn(a.name);if(v!==null){var g=new v,f=((l=i._counter.get(t))!==null&&l!==void 0?l:0)+1;i._counter.set(t,f),g.setDefaultZLevel(f),g.setPaneId(t);var _=(u=a.groupId)!==null&&u!==void 0?u:p;return a.id=p,a.groupId=_,i._overrideInstance(g,a),g.isDrawing()?i._progressInstanceInfo={paneId:t,instance:g,appointPaneFlag:o}:(i._instances.has(t)||i._instances.set(t,[]),(c=i._instances.get(t))===null||c===void 0||c.push(g)),g.isStart()&&((d=g.onDrawStart)===null||d===void 0||d.call(g,{overlay:g})),p}}return null});return r.some(function(a){return a!==null})&&(this._sort(),this._chartStore.getChart().updatePane(1,t)),r},n.prototype.getProgressInstanceInfo=function(){return this._progressInstanceInfo},n.prototype.progressInstanceComplete=function(){var e;if(this._progressInstanceInfo!==null){var t=this._progressInstanceInfo,o=t.instance,i=t.paneId;o.isDrawing()||(this._instances.has(i)||this._instances.set(i,[]),(e=this._instances.get(i))===null||e===void 0||e.push(o),this._sort(i),this._progressInstanceInfo=null)}},n.prototype.updateProgressInstanceInfo=function(e,t){this._progressInstanceInfo!==null&&(t!==void 0&&t&&(this._progressInstanceInfo.appointPaneFlag=t),this._progressInstanceInfo.paneId=e,this._progressInstanceInfo.instance.setPaneId(e))},n.prototype.getInstances=function(e){var t;if(e===void 0){var o=[];return this._instances.forEach(function(i){o=o.concat(i)}),o}return(t=this._instances.get(e))!==null&&t!==void 0?t:[]},n.prototype.override=function(e){var t=this,o=e.id,i=e.groupId,r=e.name,a=!1,s=!1,l=function(d){var p=t._overrideInstance(d,e);p[0]&&(a=!0),p[1]&&(s=!0)};if(o!==void 0){var u=this.getInstanceById(o);u!==null&&l(u)}else if(this._instances.forEach(function(d){d.forEach(function(p){(r!==void 0&&p.name===r||i!==void 0&&p.groupId===i||r===void 0&&i===void 0)&&l(p)})}),this._progressInstanceInfo!==null){var c=this._progressInstanceInfo.instance;(r!==void 0&&c.name===r||i!==void 0&&c.groupId===i||r===void 0&&i===void 0)&&l(c)}s&&this._sort(),a&&this._chartStore.getChart().updatePane(1)},n.prototype.removeInstance=function(e){var t,o,i,r=function(v,g){if(v.id!==void 0){if(g.id!==v.id)return!1}else if(v.groupId!==void 0){if(g.groupId!==v.groupId)return!1}else if(v.name!==void 0&&g.name!==v.name)return!1;return!0},a=[];if(this._progressInstanceInfo!==null){var s=this._progressInstanceInfo.instance;(e===void 0||e!==void 0&&r(e,s))&&(a.push(this._progressInstanceInfo.paneId),(i=s.onRemoved)===null||i===void 0||i.call(s,{overlay:s}),this._progressInstanceInfo=null)}if(e!==void 0){var l=new Map,u=function(v){var g=v[1].filter(function(f){var _;return!r(e,f)||(a.includes(v[0])||a.push(v[0]),(_=f.onRemoved)===null||_===void 0||_.call(f,{overlay:f}),!1)});g.length>0&&l.set(v[0],g)};try{for(var c=pt(this._instances),d=c.next();!d.done;d=c.next())u(d.value)}catch(v){t={error:v}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}this._instances=l}else this._instances.forEach(function(v,g){a.push(g),v.forEach(function(f){var _;(_=f.onRemoved)===null||_===void 0||_.call(f,{overlay:f})})}),this._instances.clear();if(a.length>0){var p=this._chartStore.getChart();a.forEach(function(v){p.updatePane(1,v)}),p.updatePane(1,ve)}},n.prototype.setPressedInstanceInfo=function(e){this._pressedInstanceInfo=e},n.prototype.getPressedInstanceInfo=function(){return this._pressedInstanceInfo},n.prototype.setHoverInstanceInfo=function(e,t){var o,i,r=this._hoverInstanceInfo,a=r.instance,s=r.figureKey,l=r.figureIndex;if(((a==null?void 0:a.id)!==((o=e.instance)===null||o===void 0?void 0:o.id)||r.figureType!==e.figureType||l!==e.figureIndex)&&(this._hoverInstanceInfo=e,(a==null?void 0:a.id)!==((i=e.instance)===null||i===void 0?void 0:i.id))){var u=!1,c=!1;a!==null&&(c=!0,a.resetZLevel(),b(a.onMouseLeave)&&(a.onMouseLeave(O({overlay:a,figureKey:s,figureIndex:l},t)),u=!0)),e.instance!==null&&(c=!0,e.instance.setZLevel(Ko),b(e.instance.onMouseEnter)&&(e.instance.onMouseEnter(O({overlay:e.instance,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),u=!0)),c&&this._sort(),u||this._chartStore.getChart().updatePane(1)}},n.prototype.getHoverInstanceInfo=function(){return this._hoverInstanceInfo},n.prototype.setClickInstanceInfo=function(e,t){var o,i,r,a,s,l,u,c,d,p=this._clickInstanceInfo,v=p.paneId,g=p.instance,f=p.figureType,_=p.figureKey,x=p.figureIndex;if((i=(o=e.instance)===null||o===void 0?void 0:o.isDrawing())!==null&&i!==void 0&&i||(a=(r=e.instance)===null||r===void 0?void 0:r.onClick)===null||a===void 0||a.call(r,O({overlay:e.instance,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),((g==null?void 0:g.id)!==((s=e.instance)===null||s===void 0?void 0:s.id)||f!==e.figureType||x!==e.figureIndex)&&(this._clickInstanceInfo=e,(g==null?void 0:g.id)!==((l=e.instance)===null||l===void 0?void 0:l.id))){(u=g==null?void 0:g.onDeselected)===null||u===void 0||u.call(g,O({overlay:g,figureKey:_,figureIndex:x},t)),(d=(c=e.instance)===null||c===void 0?void 0:c.onSelected)===null||d===void 0||d.call(c,O({overlay:e.instance,figureKey:e.figureKey,figureIndex:e.figureIndex},t));var C=this._chartStore.getChart();C.updatePane(1,e.paneId),v!==e.paneId&&C.updatePane(1,v),C.updatePane(1,ve)}},n.prototype.getClickInstanceInfo=function(){return this._clickInstanceInfo},n.prototype.isEmpty=function(){return this._instances.size===0&&this._progressInstanceInfo===null},n.prototype.isDrawing=function(){var e,t;return this._progressInstanceInfo!==null&&(t=(e=this._progressInstanceInfo)===null||e===void 0?void 0:e.instance.isDrawing())!==null&&t!==void 0&&t},n}(),un=function(){function n(){this._actions=new Map}return n.prototype.execute=function(e,t){var o;(o=this._actions.get(e))===null||o===void 0||o.execute(t)},n.prototype.subscribe=function(e,t){var o;this._actions.has(e)||this._actions.set(e,new Ro),(o=this._actions.get(e))===null||o===void 0||o.subscribe(t)},n.prototype.unsubscribe=function(e,t){var o=this._actions.get(e);o!==void 0&&(o.unsubscribe(t),o.isEmpty()&&this._actions.delete(e))},n.prototype.has=function(e){var t=this._actions.get(e);return t!==void 0&&!t.isEmpty()},n}(),Li={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function Bi(n){var e;return(e=Li[n])!==null&&e!==void 0?e:null}var cn=function(){function n(e,t){this._styles={grid:{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:h.LineType.Dashed,dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:h.LineType.Dashed,dashedValue:[2,2]}},candle:{type:h.CandleType.CandleSolid,bar:{upColor:"#2DC08E",downColor:"#F92855",noChangeColor:"#888888",upBorderColor:"#2DC08E",downBorderColor:"#F92855",noChangeBorderColor:"#888888",upWickColor:"#2DC08E",downWickColor:"#F92855",noChangeWickColor:"#888888"},area:{lineSize:2,lineColor:"#1677FF",value:"close",backgroundColor:[{offset:0,color:"rgba(22, 119, 255, 0.01)"},{offset:1,color:"rgba(22, 119, 255, 0.2)"}]},priceMark:{show:!0,high:{show:!0,color:"#76808F",textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},low:{show:!0,color:"#76808F",textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},last:{show:!0,upColor:"#2DC08E",downColor:"#F92855",noChangeColor:"#888888",line:{show:!0,style:h.LineType.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:h.PolygonType.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:h.LineType.Solid,borderSize:0,borderDashedValue:[2,2],color:"#FFFFFF",family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{showRule:h.TooltipShowRule.Always,showType:h.TooltipShowType.Standard,custom:null,defaultValue:"n/a",rect:{position:qe.Fixed,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:8,offsetLeft:10,offsetTop:8,offsetRight:10,offsetBottom:8,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginLeft:10,marginTop:8,marginRight:6,marginBottom:0},icons:[]}},indicator:{ohlc:{upColor:"rgba(45, 192, 142, .7)",downColor:"rgba(249, 40, 85, .7)",noChangeColor:"#888888"},bars:[{style:h.PolygonType.Fill,borderStyle:h.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:"rgba(45, 192, 142, .7)",downColor:"rgba(249, 40, 85, .7)",noChangeColor:"#888888"}],lines:[{style:h.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:"#FF9600"},{style:h.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:"#935EBD"},{style:h.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:"#1677FF"},{style:h.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:"#E11D74"},{style:h.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:"#01C5C4"}],circles:[{style:h.PolygonType.Fill,borderStyle:h.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:"rgba(45, 192, 142, .7)",downColor:"rgba(249, 40, 85, .7)",noChangeColor:"#888888"}],lastValueMark:{show:!1,text:{show:!1,style:h.PolygonType.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:h.LineType.Solid,borderColor:"transparent",borderSize:1,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{showRule:h.TooltipShowRule.Always,showType:h.TooltipShowType.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginLeft:10,marginTop:8,marginRight:6,marginBottom:0},icons:[]}},xAxis:{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}},yAxis:{show:!0,size:"auto",type:h.YAxisType.Normal,position:h.YAxisPosition.Right,inside:!1,reverse:!1,axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}},separator:{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:"rgba(33, 150, 243, 0.08)"},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:h.LineType.Dashed,dashedValue:[4,2],size:1,color:"#76808F"},text:{show:!0,style:h.PolygonType.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:h.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:"#686D76",borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#686D76"}},vertical:{show:!0,line:{show:!0,style:h.LineType.Dashed,dashedValue:[4,2],size:1,color:"#76808F"},text:{show:!0,style:h.PolygonType.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:h.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:"#686D76",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#686D76"}}},overlay:{point:{color:"#1677FF",borderColor:"rgba(22, 119, 255, 0.35)",borderSize:1,radius:5,activeColor:"#1677FF",activeBorderColor:"rgba(22, 119, 255, 0.35)",activeBorderSize:3,activeRadius:5},line:{style:h.LineType.Solid,smooth:!1,color:"#1677FF",size:1,dashedValue:[2,2]},rect:{style:h.PolygonType.Fill,color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderRadius:0,borderStyle:h.LineType.Solid,borderDashedValue:[2,2]},polygon:{style:h.PolygonType.Fill,color:"#1677FF",borderColor:"#1677FF",borderSize:1,borderStyle:h.LineType.Solid,borderDashedValue:[2,2]},circle:{style:h.PolygonType.Fill,color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderStyle:h.LineType.Solid,borderDashedValue:[2,2]},arc:{style:h.LineType.Solid,color:"#1677FF",size:1,dashedValue:[2,2]},text:{style:h.PolygonType.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:h.LineType.Solid,borderDashedValue:[2,2],borderSize:0,borderRadius:2,borderColor:"#1677FF",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,backgroundColor:"transparent"},rectText:{style:h.PolygonType.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:h.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#1677FF"}}},this._customApi={formatDate:fi,formatBigNumber:mi},this._locale="en-US",this._precision={price:2,volume:0},this._thousandsSeparator=",",this._dataList=[],this._timeScaleStore=new Vo(this),this._indicatorStore=new Xo(this),this._overlayStore=new ln(this),this._tooltipStore=new qo(this),this._actionStore=new un,this._visibleDataList=[],this._chart=e,this.setOptions(t)}return n.prototype.adjustVisibleDataList=function(){this._visibleDataList=[];for(var e=this._timeScaleStore.getVisibleRange(),t=e.to,o=e.from;t>o;o++){var i=this._dataList[o],r=this._timeScaleStore.dataIndexToCoordinate(o);this._visibleDataList.push({dataIndex:o,x:r,data:i})}},n.prototype.setOptions=function(e){if(e!==void 0){var t=e.locale,o=e.timezone,i=e.styles,r=e.customApi;t!==void 0&&(this._locale=t),o!==void 0&&this._timeScaleStore.setTimezone(o),i!==void 0&&(W(i)?E(this._styles,Bi(i)):E(this._styles,i)),r!==void 0&&E(this._customApi,r),e.thousandsSeparator!==void 0&&(this._thousandsSeparator=e.thousandsSeparator)}return this},n.prototype.getStyles=function(){return this._styles},n.prototype.getLocale=function(){return this._locale},n.prototype.getCustomApi=function(){return this._customApi},n.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},n.prototype.getPrecision=function(){return this._precision},n.prototype.setPrecision=function(e){return this._precision=e,this._indicatorStore.setSeriesPrecision(e),this},n.prototype.getDataList=function(){return this._dataList},n.prototype.getVisibleDataList=function(){return this._visibleDataList},n.prototype.addData=function(e,t,o){if(P(e)){this._timeScaleStore.setLoading(!1),this._timeScaleStore.setMore(o==null||o);var i=this._dataList.length===0;this._dataList=e.concat(this._dataList),i&&this._timeScaleStore.resetOffsetRightDistance(),this._timeScaleStore.adjustVisibleRange()}else if(t<this._dataList.length)this._dataList[t]=e,this.adjustVisibleDataList();else{this._dataList.push(e);var r=this._timeScaleStore.getOffsetRightBarCount();0>r&&this._timeScaleStore.setOffsetRightBarCount(--r),this._timeScaleStore.adjustVisibleRange()}this._tooltipStore.recalculateCrosshair(!0)},n.prototype.clear=function(){this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear(),this._tooltipStore.clear()},n.prototype.getTimeScaleStore=function(){return this._timeScaleStore},n.prototype.getIndicatorStore=function(){return this._indicatorStore},n.prototype.getOverlayStore=function(){return this._overlayStore},n.prototype.getTooltipStore=function(){return this._tooltipStore},n.prototype.getActionStore=function(){return this._actionStore},n.prototype.getChart=function(){return this._chart},n}();function Zt(n){return window.requestAnimationFrame==null?window.setTimeout(n,20):window.requestAnimationFrame(n)}function kt(n){window.cancelAnimationFrame==null&&window.clearTimeout(n),window.cancelAnimationFrame(n)}var at=-1,Jt=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._mainRequestAnimationId=at,t._overlayRequestAnimationId=at,t}return $(e,n),e.prototype.getContainerStyle=function(){return{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box"}},e.prototype.initDom=function(t){this._mainCanvas=ke("canvas",{position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"}),this._mainCtx=this._mainCanvas.getContext("2d"),this._overlayCanvas=ke("canvas",{position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"}),this._overlayCtx=this._overlayCanvas.getContext("2d"),t.appendChild(this._mainCanvas),t.appendChild(this._overlayCanvas)},e.prototype._optimalUpdateMain=function(t,o){var i=this;this._mainRequestAnimationId!==at&&(kt(this._mainRequestAnimationId),this._mainRequestAnimationId=at),this._mainRequestAnimationId=Zt(function(){if(t!==i._mainCanvas.offsetWidth||o!==i._mainCanvas.offsetHeight){i._mainCtx.clearRect(0,0,i._mainCanvas.offsetWidth,i._mainCanvas.offsetHeight);var r=Ze(i._mainCanvas),a=Math.floor(t*r),s=Math.floor(o*r);i._mainCanvas.style.width="".concat(t,"px"),i._mainCanvas.style.height="".concat(o,"px"),i._mainCanvas.width=a,i._mainCanvas.height=s,i._mainCtx.scale(r,r)}else i._mainCtx.clearRect(0,0,i._mainCanvas.offsetWidth,i._mainCanvas.offsetHeight);i.updateMain(i._mainCtx)})},e.prototype._optimalUpdateOverlay=function(t,o){var i=this;this._overlayRequestAnimationId!==at&&(kt(this._overlayRequestAnimationId),this._overlayRequestAnimationId=at),this._overlayRequestAnimationId=Zt(function(){if(t!==i._overlayCanvas.offsetWidth||o!==i._overlayCanvas.offsetHeight){i._overlayCtx.clearRect(0,0,i._overlayCanvas.offsetWidth,i._overlayCanvas.offsetHeight);var r=Ze(i._overlayCanvas),a=Math.floor(t*r),s=Math.floor(o*r);i._overlayCanvas.style.width="".concat(t,"px"),i._overlayCanvas.style.height="".concat(o,"px"),i._overlayCanvas.width=a,i._overlayCanvas.height=s,i._overlayCtx.scale(r,r)}else i._overlayCtx.clearRect(0,0,i._overlayCanvas.offsetWidth,i._overlayCanvas.offsetHeight);i.updateOverlay(i._overlayCtx)})},e.prototype.updateImp=function(t,o,i){var r=o.width,a=o.height;t.style.left="".concat(o.left,"px");var s=i;switch(r===t.offsetWidth&&a===t.offsetHeight||(t.style.width="".concat(r,"px"),t.style.height="".concat(a,"px"),s=3),s){case 0:this._optimalUpdateMain(r,a);break;case 1:this._optimalUpdateOverlay(r,a);break;case 3:case 4:this._optimalUpdateMain(r,a),this._optimalUpdateOverlay(r,a)}},e.prototype.getImage=function(t){var o=this.getBounding(),i=o.width,r=o.height,a=ke("canvas",{width:"".concat(i,"px"),height:"".concat(r,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Ze(a);return a.width=i*l,a.height=r*l,s.scale(l,l),s.drawImage(this._mainCanvas,0,0,i,r),t&&s.drawImage(this._overlayCanvas,0,0,i,r),a},e}(ki);function zi(n,e){var t=n.x-e.x,o=n.y-e.y,i=e.r;return!(t*t+o*o>i*i)}function Ri(n,e,t){var o=e.x,i=e.y,r=e.r,a=t.style,s=a===void 0?h.PolygonType.Fill:a,l=t.color,u=t.borderSize,c=u===void 0?1:u,d=t.borderColor,p=d===void 0?"currentColor":d,v=t.borderStyle,g=v===void 0?h.LineType.Solid:v,f=t.borderDashedValue,_=f===void 0?[2,2]:f;s!==h.PolygonType.Fill&&t.style!==h.PolygonType.StrokeFill||(n.fillStyle=l===void 0?"currentColor":l,n.beginPath(),n.arc(o,i,r,0,2*Math.PI),n.closePath(),n.fill()),s!==h.PolygonType.Stroke&&t.style!==h.PolygonType.StrokeFill||(n.strokeStyle=p,n.lineWidth=c,n.setLineDash(g===h.LineType.Dashed?_:[]),n.beginPath(),n.arc(o,i,r,0,2*Math.PI),n.closePath(),n.stroke())}var hn={name:"circle",checkEventOn:zi,draw:function(n,e,t){Ri(n,e,t)}};function Wi(n,e){for(var t=!1,o=e.coordinates,i=0,r=o.length-1;o.length>i;r=i++)o[i].y>n.y!=o[r].y>n.y&&(o[r].x-o[i].x)*(n.y-o[i].y)/(o[r].y-o[i].y)+o[i].x>n.x&&(t=!t);return t}function Oi(n,e,t){var o=e.coordinates,i=t.style,r=i===void 0?h.PolygonType.Fill:i,a=t.color,s=t.borderSize,l=s===void 0?1:s,u=t.borderColor,c=u===void 0?"currentColor":u,d=t.borderStyle,p=d===void 0?h.LineType.Solid:d,v=t.borderDashedValue,g=v===void 0?[2,2]:v;if(r===h.PolygonType.Fill||t.style===h.PolygonType.StrokeFill){n.fillStyle=a===void 0?"currentColor":a,n.beginPath(),n.moveTo(o[0].x,o[0].y);for(var f=1;o.length>f;f++)n.lineTo(o[f].x,o[f].y);n.closePath(),n.fill()}if(r===h.PolygonType.Stroke||t.style===h.PolygonType.StrokeFill){for(n.strokeStyle=c,n.lineWidth=l,n.setLineDash(p===h.LineType.Dashed?g:[]),n.beginPath(),n.moveTo(o[0].x,o[0].y),f=1;o.length>f;f++)n.lineTo(o[f].x,o[f].y);n.closePath(),n.stroke()}}var dn={name:"polygon",checkEventOn:Wi,draw:function(n,e,t){Oi(n,e,t)}};function Vi(n){return n==="transparent"}function Ni(n,e){var t=e.x,o=e.width;4>o&&(t-=2,o=4);var i=e.y,r=e.height;return 4>r&&(i-=2,r=4),!(t>n.x||n.x>t+o||i>n.y||n.y>i+r)}function Qt(n,e,t){var o=e.x,i=e.y,r=e.width,a=e.height,s=t.style,l=s===void 0?h.PolygonType.Fill:s,u=t.color,c=u===void 0?"transparent":u,d=t.borderSize,p=d===void 0?1:d,v=t.borderColor,g=v===void 0?"transparent":v,f=t.borderStyle,_=f===void 0?h.LineType.Solid:f,x=t.borderRadius,C=x===void 0?0:x,S=t.borderDashedValue,w=S===void 0?[2,2]:S;if(l===h.PolygonType.Fill||t.style===h.PolygonType.StrokeFill){var D=!0;W(c)&&(D=!Vi(c)),D&&(n.fillStyle=c,n.beginPath(),n.moveTo(o+C,i),n.arcTo(o+r,i,o+r,i+a,C),n.arcTo(o+r,i+a,o,i+a,C),n.arcTo(o,i+a,o,i,C),n.arcTo(o,i,o+r,i,C),n.closePath(),n.fill())}l!==h.PolygonType.Stroke&&t.style!==h.PolygonType.StrokeFill||Vi(g)||0>p||(n.strokeStyle=g,n.lineWidth=p,n.setLineDash(_===h.LineType.Dashed?w:[]),n.beginPath(),n.moveTo(o+C,i),n.arcTo(o+r,i,o+r,i+a,C),n.arcTo(o+r,i+a,o,i+a,C),n.arcTo(o,i+a,o,i,C),n.arcTo(o,i,o+r,i,C),n.closePath(),n.stroke())}var pn={name:"rect",checkEventOn:Ni,draw:function(n,e,t){Qt(n,e,t)}};function Hi(n,e){var t,o,i=e.size,r=i===void 0?12:i,a=e.paddingLeft,s=e.paddingTop,l=s===void 0?0:s,u=e.paddingRight,c=u===void 0?0:u,d=e.paddingBottom,p=d===void 0?0:d,v=e.weight,g=n.x,f=n.y,_=n.align,x=_===void 0?"left":_,C=n.baseline,S=C===void 0?"top":C,w=n.width,D=n.height,k=w??(a===void 0?0:a)+vt(n.text,r,v===void 0?"normal":v,e.family)+c,F=D??l+r+p;switch(x){case"left":case"start":t=g;break;case"right":case"end":t=g-k;break;default:t=g-k/2}switch(S){case"top":case"hanging":o=f;break;case"bottom":case"ideographic":case"alphabetic":o=f-F;break;default:o=f-F/2}return{x:t,y:o,width:k,height:F}}function Yi(n,e,t){var o=Hi(e,t),i=o.x,r=o.y;return!(i>n.x||n.x>i+o.width||r>n.y||n.y>r+o.height)}function ei(n,e,t){var o=e.text,i=t.color,r=i===void 0?"currentColor":i,a=t.size,s=a===void 0?12:a,l=t.family,u=t.weight,c=t.paddingLeft,d=c===void 0?0:c,p=t.paddingTop,v=p===void 0?0:p,g=t.paddingRight,f=g===void 0?0:g,_=Hi(e,t);Qt(n,_,O(O({},t),{color:t.backgroundColor})),n.textAlign="left",n.textBaseline="top",n.font=Je(s,u,l),n.fillStyle=r,n.fillText(o,_.x+d,_.y+v,_.width-d-f)}var Ui={name:"text",checkEventOn:function(n,e,t){return Yi(n,e,t)},draw:function(n,e,t){ei(n,e,t)}},vn=ei;function $i(n,e){if(2>Math.abs(Math.sqrt((d=(u=n).x-(c=e).x)*d+(p=u.y-c.y)*p)-e.r)){var t=e.r,o=e.startAngle,i=e.endAngle,r=t*Math.cos(o)+e.x,a=t*Math.sin(o)+e.y,s=t*Math.cos(i)+e.x,l=t*Math.sin(i)+e.y;return!(n.x>Math.max(r,s)+2||Math.min(r,s)-2>n.x||n.y>Math.max(a,l)+2||Math.min(a,l)-2>n.y)}var u,c,d,p;return!1}function ji(n,e,t){var o=e.x,i=e.y,r=e.r,a=e.startAngle,s=e.endAngle,l=t.style,u=l===void 0?h.LineType.Solid:l,c=t.size,d=t.color,p=d===void 0?"currentColor":d,v=t.dashedValue,g=v===void 0?[2,2]:v;n.lineWidth=c===void 0?1:c,n.strokeStyle=p,n.setLineDash(u===h.LineType.Dashed?g:[]),n.beginPath(),n.arc(o,i,r,a,s),n.stroke(),n.closePath()}var gn={name:"arc",checkEventOn:$i,draw:function(n,e,t){ji(n,e,t)}},_t={};[hn,en,dn,pn,Ui,Ui,gn].forEach(function(n){_t[n.name]=Ti.extend(n)});var Be=function(n){function e(t){var o=n.call(this)||this;return o._widget=t,o}return $(e,n),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,o,i,r){var a=function(u){var c;return(c=_t[u])!==null&&c!==void 0?c:null}(t);if(a!==null){var s=new a({name:t,attrs:o,styles:i});if(r!==void 0){for(var l in r)r.hasOwnProperty(l)&&s.registerEvent(l,r[l]);this.addChild(s)}return s}return null},e.prototype.draw=function(t){this.clear(),this.drawImp(t)},e}(qt),fn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i=this,r=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=r.getBounding(),u=s.getStyles().grid;if(u.show){t.save(),t.globalCompositeOperation="destination-over";var c=u.horizontal;c.show&&a.getAxisComponent().getTicks().forEach(function(p){var v;(v=i.createFigure("line",{coordinates:[{x:0,y:p.coord},{x:l.width,y:p.coord}]},c))===null||v===void 0||v.draw(t)});var d=u.vertical;d.show&&((o=s.getPaneById(ve))===null||o===void 0?void 0:o.getAxisComponent()).getTicks().forEach(function(p){var v;(v=i.createFigure("line",{coordinates:[{x:p.coord,y:0},{x:p.coord,y:l.height}]},d))===null||v===void 0||v.draw(t)}),t.restore()}},e}(Be),ti=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.eachChildren=function(t){var o=this.getWidget().getPane().getChart().getChartStore(),i=o.getVisibleDataList(),r=o.getTimeScaleStore().getBarSpace();i.forEach(function(a,s){t(a,r,s)})},e}(Be),Gi=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._boundCandleBarClickEvent=function(o){return function(){return t.getWidget().getPane().getChart().getChartStore().getActionStore().execute(h.ActionType.OnCandleBarClick,o),!1}},t}return $(e,n),e.prototype.drawImp=function(t){var o=this,i=this.getWidget().getPane(),r=i.getId()===he,a=i.getChart().getChartStore(),s=this.getCandleBarOptions(a);if(s!==null){var l=i.getAxisComponent();this.eachChildren(function(u,c){o._drawCandleBar(t,l,u,c,s,r)})}},e.prototype.getCandleBarOptions=function(t){var o=t.getStyles().candle;return{type:o.type,styles:o.bar}},e.prototype._drawCandleBar=function(t,o,i,r,a,s){var l,u,c,d=this,p=i.data,v=i.x,g=p.open,f=p.high,_=p.low,x=p.close,C=r.halfGapBar,S=r.gapBar,w=a.type,D=a.styles;x>g?(l=D.upColor,u=D.upBorderColor,c=D.upWickColor):g>x?(l=D.downColor,u=D.downBorderColor,c=D.downWickColor):(l=D.noChangeColor,u=D.noChangeBorderColor,c=D.noChangeWickColor);var k=o.convertToPixel(g),F=o.convertToPixel(x),A=[k,F,o.convertToPixel(f),o.convertToPixel(_)];A.sort(function(z,V){return z-V});var L=Math.max(1,A[2]-A[1]),R=[];w!==h.CandleType.Ohlc?(R.push({name:"rect",attrs:{x:v-.5,y:A[0],width:1,height:A[1]-A[0]},styles:{color:c}}),R.push(w===h.CandleType.CandleStroke||w===h.CandleType.CandleUpStroke&&x>g||w===h.CandleType.CandleDownStroke&&g>x?{name:"rect",attrs:{x:v-C+.5,y:A[1],width:S-1,height:L},styles:{style:h.PolygonType.Stroke,borderColor:u}}:{name:"rect",attrs:{x:v-C+.5,y:A[1],width:S-1,height:L},styles:{style:h.PolygonType.StrokeFill,color:l,borderColor:u}}),R.push({name:"rect",attrs:{x:v-.5,y:A[2],width:1,height:A[3]-A[2]},styles:{color:c}})):R=[{name:"rect",attrs:{x:v-.5,y:A[0],width:1,height:A[3]-A[0]},styles:{color:l}},{name:"rect",attrs:{x:v-C,y:k,width:C,height:1},styles:{color:l}},{name:"rect",attrs:{x:v,y:F,width:C,height:1},styles:{color:l}}],R.forEach(function(z){var V,N,H=z.attrs,j=z.styles;s&&(N={mouseClickEvent:d._boundCandleBarClickEvent(i)}),(V=d.createFigure("rect",H,j,N))===null||V===void 0||V.draw(t)})},e}(ti),mn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.getCandleBarOptions=function(t){var o,i,r=this.getWidget().getPane();if(!r.getAxisComponent().isInCandle()){var a=t.getIndicatorStore().getInstances(r.getId());try{for(var s=pt(a),l=s.next();!l.done;l=s.next()){var u=l.value[1];if(u.shouldOhlc&&u.visible){var c=u.styles,d=t.getStyles().indicator,p=ee(c,"ohlc.upColor",d.ohlc.upColor),v=ee(c,"ohlc.downColor",d.ohlc.downColor),g=ee(c,"ohlc.noChangeColor",d.ohlc.noChangeColor);return{type:h.CandleType.Ohlc,styles:{upColor:p,downColor:v,noChangeColor:g,upBorderColor:p,downBorderColor:v,noChangeBorderColor:g,upWickColor:p,downWickColor:v,noChangeWickColor:g}}}}}catch(f){o={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}return null},e.prototype.drawImp=function(t){var o,i=this;n.prototype.drawImp.call(this,t);var r=this.getWidget(),a=r.getPane(),s=a.getChart(),l=r.getBounding(),u=(o=s.getPaneById(ve))===null||o===void 0?void 0:o.getAxisComponent(),c=a.getAxisComponent(),d=s.getChartStore(),p=d.getDataList(),v=d.getTimeScaleStore(),g=v.getVisibleRange(),f=d.getIndicatorStore().getInstances(a.getId()),_=d.getStyles().indicator;f.forEach(function(x){var C;if(x.visible){var S=!1;if(x.draw!==null&&(t.save(),S=(C=x.draw({ctx:t,kLineDataList:p,indicator:x,visibleRange:g,bounding:l,barSpace:v.getBarSpace(),defaultStyles:_,xAxis:u,yAxis:c}))!==null&&C!==void 0&&C,t.restore()),!S){var w=x.result;i.eachChildren(function(D,k){var F,A,L,R=k.halfGapBar,z=k.gapBar,V=D.dataIndex,N=D.x,H=u.convertToPixel(V-1),j=u.convertToPixel(V+1),K=(F=w[V-1])!==null&&F!==void 0?F:{},q=(A=w[V])!==null&&A!==void 0?A:{},ae=(L=w[V+1])!==null&&L!==void 0?L:{},de={x:H},ge={x:N},Z={x:j};x.figures.forEach(function(X){var ne=X.key;de[ne]=c.convertToPixel(K[ne]),ge[ne]=c.convertToPixel(q[ne]),Z[ne]=c.convertToPixel(ae[ne])}),Gt(p,x,V,_,function(X,ne){var pe,ye,$e;if(M(q[X.key])){var Te=ge[X.key],Ie=(pe=X.attrs)===null||pe===void 0?void 0:pe.call(X,{coordinate:{prev:de,current:ge,next:Z},bounding:l,barSpace:k,xAxis:u,yAxis:c});if(!M(Ie))switch(X.type){case"circle":Ie={x:N,y:Te,r:R};break;case"rect":case"bar":var je=(ye=X.baseValue)!==null&&ye!==void 0?ye:c.getExtremum().min,ze=c.convertToPixel(je),Ce=Math.abs(ze-Te);je!==q[X.key]&&(Ce=Math.max(1,Ce)),Ie={x:N-R,y:Te>ze?ze:Te,width:z,height:Ce};break;case"line":B(ge[X.key])&&B(Z[X.key])&&(Ie={coordinates:[{x:ge.x,y:ge[X.key]},{x:Z.x,y:Z[X.key]}]})}if(M(Ie)){var Bt=X.type;($e=i.createFigure(Bt==="bar"?"rect":Bt,Ie,ne))===null||$e===void 0||$e.draw(t)}}})})}}})},e}(Gi),yn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o=this.getWidget(),i=o.getPane(),r=o.getBounding(),a=o.getPane().getChart().getChartStore(),s=a.getTooltipStore().getCrosshair(),l=a.getStyles().crosshair;if(s.paneId!==void 0&&l.show){if(s.paneId===i.getId()){var u=s.y;this._drawLine(t,[{x:0,y:u},{x:r.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:r.height}],l.vertical)}},e.prototype._drawLine=function(t,o,i){var r;if(i.show){var a=i.line;a.show&&((r=this.createFigure("line",{coordinates:o},a))===null||r===void 0||r.draw(t))}},e}(Be),Xi=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._boundIconClickEvent=function(o,i){return function(){return t.getWidget().getPane().getChart().getChartStore().getActionStore().execute(h.ActionType.OnTooltipIconClick,O(O({},o),{iconId:i})),!0}},t._boundIconMouseMoveEvent=function(o,i){return function(){return t.getWidget().getPane().getChart().getChartStore().getTooltipStore().setActiveIcon(O(O({},o),{iconId:i})),!0}},t}return $(e,n),e.prototype.drawImp=function(t){var o=this.getWidget(),i=o.getPane(),r=i.getChart().getChartStore(),a=r.getTooltipStore().getCrosshair();if(a.kLineData!==void 0){var s=o.getBounding(),l=r.getCustomApi(),u=r.getThousandsSeparator(),c=r.getIndicatorStore().getInstances(i.getId()),d=r.getTooltipStore().getActiveIcon(),p=r.getStyles().indicator;this.drawIndicatorTooltip(t,i.getId(),r.getDataList(),a,d,c,l,u,s,p)}},e.prototype.drawIndicatorTooltip=function(t,o,i,r,a,s,l,u,c,d,p){var v=this,g=d.tooltip,f=0;if(this.isDrawTooltip(r,g)){var _=g.text,x=0,C=p??0,S=0;s.forEach(function(w){var D=v.getIndicatorTooltipData(i,r,w,l,u,d),k=D.name,F=D.calcParamsText,A=D.values,L=k.length>0,R=A.length>0;if(L||R){var z=le(v.classifyTooltipIcons(D.icons),3),V=z[1],N=z[2],H=le(v.drawStandardTooltipIcons(t,c,{paneId:o,indicatorName:w.name,iconId:""},a,z[0],x,C,S),4);if(x=H[0],C=H[1],f+=H[3],S=H[2],L){var j=k;F.length>0&&(j="".concat(j).concat(F));var K=le(v.drawStandardTooltipLabels(t,c,[{title:{text:"",color:_.color},value:{text:j,color:_.color}}],x,C,S,_),4);x=K[0],C=K[1],f+=K[3],S=K[2]}var q=le(v.drawStandardTooltipIcons(t,c,{paneId:o,indicatorName:w.name,iconId:""},a,V,x,C,S),4);if(x=q[0],C=q[1],f+=q[3],S=q[2],R){var ae=le(v.drawStandardTooltipLabels(t,c,A,x,C,S,_),4);x=ae[0],C=ae[1],f+=ae[3],S=ae[2]}var de=le(v.drawStandardTooltipIcons(t,c,{paneId:o,indicatorName:w.name,iconId:""},a,N,x,C,S),4);x=0,f+=de[3],C=de[1]+de[2],S=0}})}return f},e.prototype.drawStandardTooltipIcons=function(t,o,i,r,a,s,l,u){var c=this,d=s,p=l,v=0,g=0,f=0;return a.length>0&&(a.forEach(function(_){var x=_.marginLeft,C=_.marginTop,S=_.marginRight,w=_.marginBottom,D=_.paddingLeft,k=_.paddingTop,F=_.paddingRight,A=_.paddingBottom,L=_.size,R=_.icon;t.font=Je(L,"normal",_.fontFamily),v+=x+D+t.measureText(R).width+F+S,g=Math.max(g,C+k+L+A+w)}),d+v>o.width?(d=a[0].marginLeft,p+=u,f=g):f=Math.max(0,g-u),a.forEach(function(_){var x,C=_.marginRight,S=_.paddingLeft,w=_.paddingRight,D=_.icon,k=(r==null?void 0:r.paneId)===i.paneId&&(r==null?void 0:r.indicatorName)===i.indicatorName&&(r==null?void 0:r.iconId)===_.id;(x=c.createFigure("text",{text:D,x:d+=_.marginLeft,y:p+_.marginTop},{paddingLeft:S,paddingTop:_.paddingTop,paddingRight:w,paddingBottom:_.paddingBottom,color:k?_.activeColor:_.color,size:_.size,family:_.fontFamily,backgroundColor:k?_.activeBackgroundColor:_.backgroundColor},{mouseClickEvent:c._boundIconClickEvent(i,_.id),mouseMoveEvent:c._boundIconMouseMoveEvent(i,_.id)}))===null||x===void 0||x.draw(t),d+=S+t.measureText(D).width+w+C})),[d,p,Math.max(u,g),f]},e.prototype.drawStandardTooltipLabels=function(t,o,i,r,a,s,l){var u=this,c=r,d=a,p=0,v=0,g=s;if(i.length>0){var f=l.marginLeft,_=l.marginTop,x=l.marginRight,C=l.marginBottom,S=l.size,w=l.family,D=l.weight;t.font=Je(S,D,w),i.forEach(function(k){var F,A,L=k.title,R=k.value,z=t.measureText(L.text).width,V=t.measureText(R.text).width,N=S+_+C;c+f+(z+V)+x>o.width?(c=f,d+=N,v+=N):(c+=f,v+=Math.max(0,N-g)),g=p=Math.max(g,N),L.text.length>0&&((F=u.createFigure("text",{x:c,y:d+_,text:L.text},{color:L.color,size:S,family:w,weight:D}))===null||F===void 0||F.draw(t),c+=z),(A=u.createFigure("text",{x:c,y:d+_,text:R.text},{color:R.color,size:S,family:w,weight:D}))===null||A===void 0||A.draw(t),c+=V+x})}return[c,d,p,v]},e.prototype.isDrawTooltip=function(t,o){var i=o.showRule;return i===h.TooltipShowRule.Always||i===h.TooltipShowRule.FollowCross&&t.paneId!==void 0},e.prototype.getIndicatorTooltipData=function(t,o,i,r,a,s){var l,u,c,d=s.tooltip,p=d.showName?i.shortName:"",v="",g=i.calcParams;g.length>0&&d.showParams&&(v="(".concat(g.join(","),")"));var f={name:p,calcParamsText:v,values:[],icons:d.icons},_=o.dataIndex,x=(l=i.result)!==null&&l!==void 0?l:[],C=[];if(i.visible){var S=(u=x[_])!==null&&u!==void 0?u:{};Gt(t,i,_,s,function(H,j){if(H.title!==void 0){var K=j.color,q=S[H.key];M(q)&&(q=ie(q,i.precision),i.shouldFormatBigNumber&&(q=r.formatBigNumber(q))),C.push({title:{text:H.title,color:K},value:{text:re(q??d.defaultValue,a),color:K}})}}),f.values=C}if(i.createTooltipDataSource!==null){var w=this.getWidget(),D=w.getPane(),k=D.getChart().getChartStore(),F=i.createTooltipDataSource({kLineDataList:t,indicator:i,visibleRange:k.getTimeScaleStore().getVisibleRange(),bounding:w.getBounding(),crosshair:o,defaultStyles:s,xAxis:(c=D.getChart().getPaneById(ve))===null||c===void 0?void 0:c.getAxisComponent(),yAxis:D.getAxisComponent()}),A=F.name,L=F.calcParamsText,R=F.values,z=F.icons;if(A!==void 0&&d.showName&&(f.name=A),L!==void 0&&d.showParams&&(f.calcParamsText=L),z!==void 0&&(f.icons=z),R!==void 0&&i.visible){var V=[],N=s.tooltip.text.color;R.forEach(function(H){var j={text:"",color:N};I(H.title)?j=H.title:j.text=H.title;var K={text:"",color:N};I(H.value)?K=H.value:K.text=H.value,K.text=re(K.text,a),V.push({title:j,value:K})}),f.values=V}}return f},e.prototype.classifyTooltipIcons=function(t){var o=[],i=[],r=[];return t.forEach(function(a){switch(a.position){case h.TooltipIconPosition.Left:o.push(a);break;case h.TooltipIconPosition.Middle:i.push(a);break;case h.TooltipIconPosition.Right:r.push(a)}}),[o,i,r]},e}(Be),qi=function(n){function e(t){var o=n.call(this,t)||this;return o._initEvent(),o}return $(e,n),e.prototype._initEvent=function(){var t=this,o=this.getWidget().getPane(),i=o.getId(),r=o.getChart().getChartStore().getOverlayStore();this.registerEvent("mouseMoveEvent",function(a){var s,l=r.getProgressInstanceInfo();if(l!==null){var u=l.instance,c=l.paneId;u.isStart()&&(r.updateProgressInstanceInfo(i),c=i);var d=u.points.length-1,p="".concat(rt,"point_").concat(d);return u.isDrawing()&&c===i&&(u.eventMoveForDrawing(t._coordinateToPoint(l.instance,a)),(s=u.onDrawing)===null||s===void 0||s.call(u,O({overlay:u,figureKey:p,figureIndex:d},a))),t._figureMouseMoveEvent(u,1,p,d,0)(a)}return r.setHoverInstanceInfo({paneId:i,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseClickEvent",function(a){var s,l,u=r.getProgressInstanceInfo();if(u!==null){var c=u.instance,d=u.paneId;c.isStart()&&(r.updateProgressInstanceInfo(i,!0),d=i);var p=c.points.length-1,v="".concat(rt,"point_").concat(p);return c.isDrawing()&&d===i&&(c.eventMoveForDrawing(t._coordinateToPoint(c,a)),(s=c.onDrawing)===null||s===void 0||s.call(c,O({overlay:c,figureKey:v,figureIndex:p},a)),c.nextStep(),c.isDrawing()||(r.progressInstanceComplete(),(l=c.onDrawEnd)===null||l===void 0||l.call(c,O({overlay:c,figureKey:v,figureIndex:p},a)))),t._figureMouseClickEvent(c,1,v,p,0)(a)}return r.setClickInstanceInfo({paneId:i,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseDoubleClickEvent",function(a){var s,l=r.getProgressInstanceInfo();if(l!==null){var u=l.instance,c=l.paneId;if(u.isDrawing()&&c===i&&(u.forceComplete(),!u.isDrawing())){r.progressInstanceComplete();var d=u.points.length-1,p="".concat(rt,"point_").concat(d);(s=u.onDrawEnd)===null||s===void 0||s.call(u,O({overlay:u,figureKey:p,figureIndex:d},a))}var v=u.points.length-1;return t._figureMouseClickEvent(u,1,"".concat(rt,"point_").concat(v),v,0)(a)}return!1}).registerEvent("mouseRightClickEvent",function(a){var s=r.getProgressInstanceInfo();if(s!==null){var l=s.instance;if(l.isDrawing()){var u=l.points.length-1;return t._figureMouseRightClickEvent(l,1,"".concat(rt,"point_").concat(u),u,0)(a)}}return!1}).registerEvent("mouseUpEvent",function(a){var s,l=r.getPressedInstanceInfo(),u=l.instance;return u!==null&&((s=u.onPressedMoveEnd)===null||s===void 0||s.call(u,O({overlay:u,figureKey:l.figureKey,figureIndex:l.figureIndex},a))),r.setPressedInstanceInfo({paneId:i,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(a){var s,l,u=r.getPressedInstanceInfo(),c=u.instance,d=u.figureType,p=u.figureIndex;if(c!==null){if(!(c.lock||(l=(s=c.onPressedMoving)===null||s===void 0?void 0:s.call(c,O({overlay:c,figureIndex:p,figureKey:u.figureKey},a)))!==null&&l!==void 0&&l)){var v=t._coordinateToPoint(c,a);d===1?c.eventPressedPointMove(v,p):c.eventPressedOtherMove(v,t.getWidget().getPane().getChart().getChartStore().getTimeScaleStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,o,i,r,a,s){var l;if(!t.isDrawing()){var u=[];if(s!==void 0&&(Y(s)?s&&(u=["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]):u=s),u.length===0)return{mouseMoveEvent:this._figureMouseMoveEvent(t,o,i,r,a),mouseDownEvent:this._figureMouseDownEvent(t,o,i,r,a),mouseClickEvent:this._figureMouseClickEvent(t,o,i,r,a),mouseRightClickEvent:this._figureMouseRightClickEvent(t,o,i,r,a),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,o,i,r,a)};l={},u.includes("mouseMoveEvent")||u.includes("touchMoveEvent")||(l.mouseMoveEvent=this._figureMouseMoveEvent(t,o,i,r,a)),u.includes("mouseDownEvent")||u.includes("touchStartEvent")||(l.mouseDownEvent=this._figureMouseDownEvent(t,o,i,r,a)),u.includes("mouseClickEvent")||u.includes("tapEvent")||(l.mouseClickEvent=this._figureMouseClickEvent(t,o,i,r,a)),u.includes("mouseDoubleClickEvent")||u.includes("doubleTapEvent")||(l.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(t,o,i,r,a)),u.includes("mouseRightClickEvent")||(l.mouseRightClickEvent=this._figureMouseRightClickEvent(t,o,i,r,a))}return l},e.prototype._figureMouseMoveEvent=function(t,o,i,r,a){var s=this;return function(l){var u=s.getWidget().getPane();return u.getChart().getChartStore().getOverlayStore().setHoverInstanceInfo({paneId:u.getId(),instance:t,figureType:o,figureKey:i,figureIndex:r,attrsIndex:a},l),!0}},e.prototype._figureMouseDownEvent=function(t,o,i,r,a){var s=this;return function(l){var u,c=s.getWidget().getPane(),d=c.getId(),p=c.getChart().getChartStore().getOverlayStore();return t.startPressedMove(s._coordinateToPoint(t,l)),(u=t.onPressedMoveStart)===null||u===void 0||u.call(t,O({overlay:t,figureIndex:r,figureKey:i},l)),p.setPressedInstanceInfo({paneId:d,instance:t,figureType:o,figureKey:i,figureIndex:r,attrsIndex:a}),!0}},e.prototype._figureMouseClickEvent=function(t,o,i,r,a){var s=this;return function(l){var u=s.getWidget().getPane(),c=u.getId();return u.getChart().getChartStore().getOverlayStore().setClickInstanceInfo({paneId:c,instance:t,figureType:o,figureKey:i,figureIndex:r,attrsIndex:a},l),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,o,i,r,a){return function(s){var l;return(l=t.onDoubleClick)===null||l===void 0||l.call(t,O(O({},s),{figureIndex:r,figureKey:i,overlay:t})),!0}},e.prototype._figureMouseRightClickEvent=function(t,o,i,r,a){var s=this;return function(l){var u,c;return(c=(u=t.onRightClick)===null||u===void 0?void 0:u.call(t,O({overlay:t,figureIndex:r,figureKey:i},l)))!==null&&c!==void 0&&c||s.getWidget().getPane().getChart().getChartStore().getOverlayStore().removeInstance(t),!0}},e.prototype._coordinateToPoint=function(t,o){var i,r,a={},s=this.getWidget().getPane(),l=s.getChart(),u=s.getId(),c=l.getChartStore().getTimeScaleStore();if(this.coordinateToPointTimestampDataIndexFlag()){var d=((i=l.getPaneById(ve))===null||i===void 0?void 0:i.getAxisComponent()).convertFromPixel(o.x),p=(r=c.dataIndexToTimestamp(d))!==null&&r!==void 0?r:void 0;a.dataIndex=d,a.timestamp=p}if(this.coordinateToPointValueFlag()){var v=s.getAxisComponent(),g=v.convertFromPixel(o.y);if(t.mode!==h.OverlayMode.Normal&&u===he&&a.dataIndex!==void 0){var f=c.getDataByDataIndex(a.dataIndex);if(f!==null){var _=t.modeSensitivity;if(g>f.high)if(t.mode===h.OverlayMode.WeakMagnet){var x=v.convertToPixel(f.high);v.convertFromPixel(x-_)>g&&(g=f.high)}else g=f.high;else if(f.low>g)if(t.mode===h.OverlayMode.WeakMagnet){var C=v.convertToPixel(f.low);g>v.convertFromPixel(C-_)&&(g=f.low)}else g=f.low;else{var S=Math.max(f.open,f.close),w=Math.min(f.open,f.close);g=g>S?f.high-g>g-S?S:f.high:w>g?w-g>g-f.low?f.low:w:g-w>S-g?S:w}}}a.value=g}return a},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,o,i){return this.getWidget().getPane().getChart().getChartStore().getOverlayStore().isDrawing()?this.onEvent(t,o,i):n.prototype.dispatchEvent.call(this,t,o,i)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var o,i=this,r=this.getWidget(),a=r.getPane(),s=a.getId(),l=a.getChart(),u=a.getAxisComponent(),c=(o=l.getPaneById(ve))===null||o===void 0?void 0:o.getAxisComponent(),d=r.getBounding(),p=l.getChartStore(),v=p.getCustomApi(),g=p.getThousandsSeparator(),f=p.getTimeScaleStore(),_=f.getDateTimeFormat(),x=f.getBarSpace(),C=p.getPrecision(),S=p.getStyles().overlay,w=p.getOverlayStore(),D=w.getHoverInstanceInfo(),k=w.getClickInstanceInfo();this.getCompleteOverlays(w,s).forEach(function(L){L.visible&&i._drawOverlay(t,L,d,x,C,_,v,g,S,c,u,D,k,f)});var F=w.getProgressInstanceInfo();if(F!==null){var A=this.getProgressOverlay(F,s);A!==null&&A.visible&&this._drawOverlay(t,A,d,x,C,_,v,g,S,c,u,D,k,f)}},e.prototype._drawOverlay=function(t,o,i,r,a,s,l,u,c,d,p,v,g,f){var _=o.points.map(function(C){var S,w,D=C.dataIndex;C.timestamp!==void 0&&(D=f.timestampToDataIndex(C.timestamp));var k={x:0,y:0};return D!==void 0&&(k.x=(S=d==null?void 0:d.convertToPixel(D))!==null&&S!==void 0?S:0),C.value!==void 0&&(k.y=(w=p==null?void 0:p.convertToPixel(C.value))!==null&&w!==void 0?w:0),k});if(_.length>0){var x=[].concat(this.getFigures(o,_,i,r,a,u,s,c,d,p));this.drawFigures(t,o,x,c)}this.drawDefaultFigures(t,o,_,i,a,s,l,u,c,d,p,v,g)},e.prototype.drawFigures=function(t,o,i,r){var a=this;i.forEach(function(s,l){var u=s.type,c=s.styles,d=s.ignoreEvent;[].concat(s.attrs).forEach(function(p,v){var g,f,_,x=a._createFigureEvents(o,2,(g=s.key)!==null&&g!==void 0?g:"",l,v,d),C=O(O(O({},r[u]),(f=o.styles)===null||f===void 0?void 0:f[u]),c);(_=a.createFigure(u,p,C,x))===null||_===void 0||_.draw(t)})})},e.prototype.getCompleteOverlays=function(t,o){return t.getInstances(o)},e.prototype.getProgressOverlay=function(t,o){return t.paneId===o?t.instance:null},e.prototype.getFigures=function(t,o,i,r,a,s,l,u,c,d){var p,v;return(v=(p=t.createPointFigures)===null||p===void 0?void 0:p.call(t,{overlay:t,coordinates:o,bounding:i,barSpace:r,precision:a,thousandsSeparator:s,dateTimeFormat:l,defaultStyles:u,xAxis:c,yAxis:d}))!==null&&v!==void 0?v:[]},e.prototype.drawDefaultFigures=function(t,o,i,r,a,s,l,u,c,d,p,v,g){var f,_,x=this;if(o.needDefaultPointFigure&&(((f=v.instance)===null||f===void 0?void 0:f.id)===o.id&&v.figureType!==0||((_=g.instance)===null||_===void 0?void 0:_.id)===o.id&&g.figureType!==0)){var C=o.styles,S=O(O({},c.point),C==null?void 0:C.point);i.forEach(function(w,D){var k,F,A,L=w.x,R=w.y,z=S.radius,V=S.color,N=S.borderColor,H=S.borderSize;((k=v.instance)===null||k===void 0?void 0:k.id)===o.id&&v.figureType===1&&v.figureIndex===D&&(z=S.activeRadius,V=S.activeColor,N=S.activeBorderColor,H=S.activeBorderSize),(F=x.createFigure("circle",{x:L,y:R,r:z+H},{color:N},x._createFigureEvents(o,1,"".concat(rt,"point_").concat(D),D,0)))===null||F===void 0||F.draw(t),(A=x.createFigure("circle",{x:L,y:R,r:z},{color:V}))===null||A===void 0||A.draw(t)})}},e}(Be),Ki=function(n){function e(t,o){var i=n.call(this,t,o)||this;return i._gridView=new fn(i),i._indicatorView=new mn(i),i._crosshairLineView=new yn(i),i._tooltipView=i.createTooltipView(),i._overlayView=new qi(i),i.addChild(i._tooltipView),i.addChild(i._overlayView),i.getContainer().style.cursor="crosshair",i.registerEvent("mouseMoveEvent",function(){return o.getChart().getChartStore().getTooltipStore().setActiveIcon(),!1}),i}return $(e,n),e.prototype.getName=function(){return ce},e.prototype.updateMain=function(t){this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t)},e.prototype.createTooltipView=function(){return new Xi(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this._overlayView.draw(t),this._crosshairLineView.draw(t),this._tooltipView.draw(t)},e}(Jt),_n=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i,r=this.getWidget(),a=r.getPane(),s=a.getChart(),l=r.getBounding(),u=a.getAxisComponent(),c=s.getStyles().candle.area,d=[],p=[],v=Number.MAX_SAFE_INTEGER;this.eachChildren(function(w,D,k){var F=w.x,A=D.halfGapBar,L=w.data[c.value];if(B(L)){var R=u.convertToPixel(L);if(k===0){var z=F-A;p.push({x:z,y:l.height}),p.push({x:z,y:R}),d.push({x:z,y:R})}d.push({x:F,y:R}),p.push({x:F,y:R}),v=Math.min(v,R)}});var g=p.length;if(g>0){var f=p[g-1],_=f.x;d.push({x:_,y:f.y}),p.push({x:_,y:f.y}),p.push({x:_,y:l.height})}if(d.length>0&&((o=this.createFigure("line",{coordinates:d},{color:c.lineColor,size:c.lineSize}))===null||o===void 0||o.draw(t)),p.length>0){var x=c.backgroundColor,C=void 0;if(P(x)){var S=t.createLinearGradient(0,l.height,0,v);try{x.forEach(function(w){S.addColorStop(w.offset,w.color)})}catch{}C=S}else C=x;(i=this.createFigure("polygon",{coordinates:p},{color:C}))===null||i===void 0||i.draw(t)}},e}(ti),xn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o=this.getWidget().getPane(),i=o.getChart().getChartStore(),r=i.getStyles().candle.priceMark,a=r.high,s=r.low;if(r.show&&(a.show||s.show)){var l=i.getThousandsSeparator(),u=i.getPrecision(),c=o.getAxisComponent(),d=Number.MIN_SAFE_INTEGER,p=0,v=Number.MAX_SAFE_INTEGER,g=0;this.eachChildren(function(x){var C=x.data,S=x.x;C.high>d&&(d=C.high,p=S),v>C.low&&(v=C.low,g=S)});var f=c.convertToPixel(d),_=c.convertToPixel(v);a.show&&d!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,re(ie(d,u.price),l),{x:p,y:f},_>f?[-2,-5]:[2,5],a),s.show&&v!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,re(ie(v,u.price),l),{x:g,y:_},_>f?[2,5]:[-2,-5],s)}},e.prototype._drawMark=function(t,o,i,r,a){var s,l,u,c,d,p,v=i.x,g=i.y+r[0];(s=this.createFigure("line",{coordinates:[{x:v-2,y:g+r[0]},{x:v,y:g},{x:v+2,y:g+r[0]}]},{color:a.color}))===null||s===void 0||s.draw(t),v>this.getWidget().getBounding().width/2?(d=(c=v-5)-a.textOffset,p="right"):(p="left",d=(c=v+5)+a.textOffset);var f=g+r[1];(l=this.createFigure("line",{coordinates:[{x:v,y:g},{x:v,y:f},{x:c,y:f}]},{color:a.color}))===null||l===void 0||l.draw(t),(u=this.createFigure("text",{x:d,y:f,text:o,align:p,baseline:"middle"},{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}))===null||u===void 0||u.draw(t)},e}(ti),Cn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i=this.getWidget(),r=i.getPane(),a=i.getBounding(),s=r.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.line;if(l.show&&u.show&&c.show){var d=r.getAxisComponent(),p=s.getDataList(),v=p[p.length-1];if(v!=null){var g=v.close,f=v.open,_=d.convertToNicePixel(g);(o=this.createFigure("line",{coordinates:[{x:0,y:_},{x:a.width,y:_}]},{style:c.style,color:g>f?u.upColor:f>g?u.downColor:u.noChangeColor,size:c.size,dashedValue:c.dashedValue}))===null||o===void 0||o.draw(t)}}},e}(Be),At={"zh-CN":{time:"",open:"",high:"",low:"",close:"",volume:"",change:""},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",change:"Change: "}},Sn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i=this.getWidget(),r=i.getPane(),a=r.getId(),s=r.getChart().getChartStore(),l=s.getTooltipStore().getCrosshair();if(l.kLineData!==void 0){var u=i.getBounding(),c=(o=r.getYAxisWidget())===null||o===void 0?void 0:o.getBounding(),d=s.getDataList(),p=s.getPrecision(),v=s.getLocale(),g=s.getCustomApi(),f=s.getThousandsSeparator(),_=s.getTooltipStore().getActiveIcon(),x=s.getIndicatorStore().getInstances(r.getId()),C=s.getTimeScaleStore().getDateTimeFormat(),S=s.getStyles(),w=S.candle,D=S.indicator;if(w.tooltip.showType===h.TooltipShowType.Rect&&D.tooltip.showType===h.TooltipShowType.Rect){var k=this.isDrawTooltip(l,w.tooltip),F=this.isDrawTooltip(l,D.tooltip);this._drawRectTooltip(t,d,x,u,c,l,p,C,v,g,f,k,F,S,0)}else if(w.tooltip.showType===h.TooltipShowType.Standard&&D.tooltip.showType===h.TooltipShowType.Standard){var A=this._drawCandleStandardTooltip(t,d,a,u,l,_,p,C,v,g,f,w);this.drawIndicatorTooltip(t,a,d,l,_,x,g,f,u,D,A)}else if(w.tooltip.showType===h.TooltipShowType.Rect&&D.tooltip.showType===h.TooltipShowType.Standard){var L=this.drawIndicatorTooltip(t,a,d,l,_,x,g,f,u,D,0);k=this.isDrawTooltip(l,w.tooltip),this._drawRectTooltip(t,d,x,u,c,l,p,C,v,g,f,k,!1,S,L)}else{var R=this._drawCandleStandardTooltip(t,d,a,u,l,_,p,C,v,g,f,w);F=this.isDrawTooltip(l,D.tooltip),this._drawRectTooltip(t,d,x,u,c,l,p,C,v,g,f,!1,F,S,R)}}},e.prototype._drawCandleStandardTooltip=function(t,o,i,r,a,s,l,u,c,d,p,v){var g,f,_,x=v.tooltip,C=x.text,S=0;if(this.isDrawTooltip(a,x)){var w=(g=a.dataIndex)!==null&&g!==void 0?g:0,D=this._getCandleTooltipData({prev:(f=o[w-1])!==null&&f!==void 0?f:null,current:a.kLineData,next:(_=o[w+1])!==null&&_!==void 0?_:null},l,u,c,d,p,v),k=0,F=0,A=0,L=le(this.classifyTooltipIcons(x.icons),3),R=L[1],z=L[2],V=le(this.drawStandardTooltipIcons(t,r,{paneId:i,indicatorName:"",iconId:""},s,L[0],k,F,0),4);S+=V[3];var N=le(this.drawStandardTooltipIcons(t,r,{paneId:i,indicatorName:"",iconId:""},s,R,k=V[0],F=V[1],A=V[2]),4);if(k=N[0],F=N[1],S+=N[3],A=N[2],D.length>0){var H=le(this.drawStandardTooltipLabels(t,r,D,k,F,A,C),4);k=H[0],F=H[1],S+=H[3],A=H[2]}var j=le(this.drawStandardTooltipIcons(t,r,{paneId:i,indicatorName:"",iconId:""},s,z,k,F,A),4);k=j[0],F=j[1],S+=j[3],A=j[2]}return S},e.prototype._drawRectTooltip=function(t,o,i,r,a,s,l,u,c,d,p,v,g,f,_){var x,C,S,w,D,k=this,F=f.candle,A=f.indicator,L=F.tooltip,R=A.tooltip;if(v||g){var z=(x=s.dataIndex)!==null&&x!==void 0?x:0,V=this._getCandleTooltipData({prev:(C=o[z-1])!==null&&C!==void 0?C:null,current:s.kLineData,next:(S=o[z+1])!==null&&S!==void 0?S:null},l,u,c,d,p,F),N=L.text,H=N.marginLeft,j=N.marginRight,K=N.marginTop,q=N.marginBottom,ae=N.size,de=N.weight,ge=N.family,Z=L.rect,X=Z.position,ne=Z.paddingLeft,pe=Z.paddingRight,ye=Z.paddingTop,$e=Z.paddingBottom,Te=Z.offsetLeft,Ie=Z.offsetRight,je=Z.offsetTop,ze=Z.offsetBottom,Ce=Z.borderSize,Bt=Z.borderRadius,Vn=Z.borderColor,Nn=Z.color,xt=0,et=0,Ge=0;v&&(t.font=Je(ae,de,ge),V.forEach(function(He){var Se=He.value,we="".concat(He.title.text).concat(Se.text),De=t.measureText(we).width+H+j;xt=Math.max(xt,De)}),Ge+=(q+K+ae)*V.length);var tt=R.text,no=tt.marginLeft,ro=tt.marginRight,ao=tt.marginTop,so=tt.marginBottom,Ct=tt.size,ni=tt.weight,ri=tt.family,lo=[];if(g&&(t.font=Je(Ct,ni,ri),i.forEach(function(He){var Se,we=(Se=k.getIndicatorTooltipData(o,s,He,d,p,A).values)!==null&&Se!==void 0?Se:[];lo.push(we),we.forEach(function(De){var it=De.value,zt="".concat(De.title.text).concat(it.text),Un=t.measureText(zt).width+no+ro;xt=Math.max(xt,Un),Ge+=ao+so+Ct})})),(et+=xt)!==0&&Ge!==0){et+=2*Ce+ne+pe,Ge+=2*Ce+ye+$e;var uo=X===qe.Pointer&&s.paneId===he,co=((w=s.realX)!==null&&w!==void 0?w:0)>r.width/2,Re=0;if(uo){var ho=s.realX;Re=co?ho-Ie-et:ho+Te}else co?(Re=Te,f.yAxis.inside&&f.yAxis.position===h.YAxisPosition.Left&&(Re+=a.width)):(Re=r.width-Ie-et,f.yAxis.inside&&f.yAxis.position===h.YAxisPosition.Right&&(Re-=a.width));var st=_+je;uo&&((st=s.y-Ge/2)+Ge>r.height-ze&&(st=r.height-ze-Ge),_+je>st&&(st=_+je)),(D=this.createFigure("rect",{x:Re,y:st,width:et,height:Ge},{style:h.PolygonType.StrokeFill,color:Nn,borderColor:Vn,borderSize:Ce,borderRadius:Bt}))===null||D===void 0||D.draw(t);var Hn=Re+Ce+ne+H,lt=st+Ce+ye;if(v&&V.forEach(function(He){var Se,we,De=He.title;(Se=k.createFigure("text",{x:Hn,y:lt+=K,text:De.text},{color:De.color,size:ae,family:ge,weight:de}))===null||Se===void 0||Se.draw(t);var it=He.value;(we=k.createFigure("text",{x:Re+et-Ce-j-pe,y:lt,text:it.text,align:"right"},{color:it.color,size:ae,family:ge,weight:de}))===null||we===void 0||we.draw(t),lt+=ae+q}),g){var Yn=Re+Ce+ne+no;lo.forEach(function(He){He.forEach(function(Se){var we,De,it=Se.title,zt=Se.value;(we=k.createFigure("text",{x:Yn,y:lt+=ao,text:it.text},{color:it.color,size:Ct,family:ri,weight:ni}))===null||we===void 0||we.draw(t),(De=k.createFigure("text",{x:Re+et-Ce-ro-pe,y:lt,text:zt.text,align:"right"},{color:zt.color,size:Ct,family:ri,weight:ni}))===null||De===void 0||De.draw(t),lt+=Ct+so})})}}}},e.prototype._getCandleTooltipData=function(t,o,i,r,a,s,l){var u,c,d,p,v,g=l.tooltip,f=g.text.color,_=t.current,x=(c=(u=t.prev)===null||u===void 0?void 0:u.close)!==null&&c!==void 0?c:_.close,C=_.close-x,S=o.price,w=o.volume,D={"{time}":a.formatDate(i,_.timestamp,"YYYY-MM-DD HH:mm",h.FormatDateType.Tooltip),"{open}":re(ie(_.open,S),s),"{high}":re(ie(_.high,S),s),"{low}":re(ie(_.low,S),s),"{close}":re(ie(_.close,S),s),"{volume}":re(a.formatBigNumber(ie((d=_.volume)!==null&&d!==void 0?d:g.defaultValue,w)),s),"{change}":x===0?g.defaultValue:"".concat(ie(C/x*100),"%")};return((v=b(g.custom)?(p=g.custom)===null||p===void 0?void 0:p.call(g,t,l):g.custom)!==null&&v!==void 0?v:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]).map(function(k){var F,A=k.title,L=k.value,R={text:"",color:""};I(A)?R=O({},A):(R.text=A,R.color=f),R.text=function(H,j){var K,q;return(q=(K=At[j])===null||K===void 0?void 0:K[H])!==null&&q!==void 0?q:H}(R.text,r);var z={text:g.defaultValue,color:""};I(L)?z=O({},L):(z.text=L,z.color=f);var V=z.text.match(/{(\S*)}/);if(V!==null&&V.length>1){var N="{".concat(V[1],"}");z.text=z.text.replace(N,(F=D[N])!==null&&F!==void 0?F:g.defaultValue),N==="{change}"&&(z.color=C===0?l.priceMark.last.noChangeColor:C>0?l.priceMark.last.upColor:l.priceMark.last.downColor)}return{title:R,value:z}})},e}(Xi),wn=function(n){function e(t,o){var i=n.call(this,t,o)||this;return i._candleBarView=new Gi(i),i._candleAreaView=new _n(i),i._candleHighLowPriceView=new xn(i),i._candleLastPriceLineView=new Cn(i),i.addChild(i._candleBarView),i}return $(e,n),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!==h.CandleType.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t)):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Sn(this)},e}(Ki),Zi=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i=this,r=this.getWidget(),a=r.getPane(),s=r.getBounding(),l=a.getAxisComponent(),u=this.getAxisStyles(a.getChart().getStyles());if(u.show){u.axisLine.show&&((o=this.createFigure("line",this.createAxisLine(s,u),u.axisLine))===null||o===void 0||o.draw(t));var c=l.getTicks();u.tickLine.show&&this.createTickLines(c,s,u).forEach(function(d){var p;(p=i.createFigure("line",d,u.tickLine))===null||p===void 0||p.draw(t)}),u.tickText.show&&this.createTickTexts(c,s,u).forEach(function(d){var p;(p=i.createFigure("text",d,u.tickText))===null||p===void 0||p.draw(t)})}},e}(Be),bn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,o){var i,r=this.getWidget().getPane().getAxisComponent(),a=o.axisLine.size;return{coordinates:[{x:i=r.isFromZero()?a/2:t.width-a,y:0},{x:i,y:t.height}]}},e.prototype.createTickLines=function(t,o,i){var r=this.getWidget().getPane().getAxisComponent(),a=i.axisLine,s=i.tickLine,l=0,u=0;return r.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=o.width,a.show&&(l-=a.size),u=l-s.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,o,i){var r=this.getWidget().getPane().getAxisComponent(),a=i.axisLine,s=i.tickLine,l=i.tickText,u=0;r.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=o.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(d){return{x:u,y:d.coord,text:d.text,align:c,baseline:"middle"}})},e}(Zi),En=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i=this.getWidget(),r=i.getPane(),a=i.getBounding(),s=r.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.text;if(l.show&&u.show&&c.show){var d=s.getPrecision(),p=r.getAxisComponent(),v=s.getDataList(),g=s.getVisibleDataList(),f=v[v.length-1];if(f!==void 0){var _=f.close,x=f.open,C=p.convertToNicePixel(_),S=void 0;S=_>x?u.upColor:x>_?u.downColor:u.noChangeColor;var w=void 0;if(p.getType()===h.YAxisType.Percentage){var D=g[0].data.close;w="".concat(((_-D)/D*100).toFixed(2),"%")}else w=ie(_,d.price);w=re(w,s.getThousandsSeparator());var k=void 0,F=void 0;p.isFromZero()?(k=0,F="left"):(k=a.width,F="right"),(o=this.createFigure("text",{x:k,y:C,text:w,align:F,baseline:"middle"},O(O({},c),{backgroundColor:S})))===null||o===void 0||o.draw(t)}}},e}(Be),Tn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o=this,i=this.getWidget(),r=i.getPane(),a=i.getBounding(),s=r.getChart().getChartStore(),l=s.getCustomApi(),u=s.getStyles().indicator,c=u.lastValueMark,d=c.text;if(c.show){var p=r.getAxisComponent(),v=s.getDataList(),g=v.length-1,f=s.getIndicatorStore().getInstances(r.getId()),_=s.getThousandsSeparator();f.forEach(function(x){var C=x.result[g];if(C!==void 0&&x.visible){var S=x.precision;Gt(v,x,g,u,function(w,D){var k,F=C[w.key];if(M(F)){var A=p.convertToNicePixel(F),L=ie(F,S);x.shouldFormatBigNumber&&(L=l.formatBigNumber(L)),L=re(L,_);var R=void 0,z=void 0;p.isFromZero()?(R=0,z="left"):(R=a.width,z="right"),(k=o.createFigure("text",{x:R,y:A,text:L,align:z,baseline:"middle"},O(O({},d),{backgroundColor:D.color})))===null||k===void 0||k.draw(t)}})}})}},e}(Be),Ji=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,o,i,r,a,s,l,u,c,d,p,v,g){this.drawFigures(t,o,this.getDefaultFigures(o,i,r,a,s,l,u,d,p,g),c)},e.prototype.getDefaultFigures=function(t,o,i,r,a,s,l,u,c,d){var p,v,g=[];if(t.needDefaultYAxisFigure&&t.id===((p=d.instance)===null||p===void 0?void 0:p.id)&&d.paneId===this.getWidget().getPane().getId()){var f,_,x=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER;(v=c==null?void 0:c.isFromZero())!==null&&v!==void 0&&v?(f="left",_=0):(f="right",_=i.width),o.forEach(function(S,w){var D=t.points[w];if(D.value!==void 0){x=Math.min(x,S.y),C=Math.max(C,S.y);var k=re(ie(D.value,r.price),l);g.push({type:"text",attrs:{x:_,y:S.y,text:k,align:f,baseline:"middle"},ignoreEvent:!0})}}),o.length>1&&g.unshift({type:"rect",attrs:{x:0,y:x,width:i.width,height:C-x},ignoreEvent:!0})}return g},e.prototype.getFigures=function(t,o,i,r,a,s,l,u,c,d){var p,v;return(v=(p=t.createYAxisFigures)===null||p===void 0?void 0:p.call(t,{overlay:t,coordinates:o,bounding:i,barSpace:r,precision:a,thousandsSeparator:s,dateTimeFormat:l,defaultStyles:u,xAxis:c,yAxis:d}))!==null&&v!==void 0?v:[]},e}(qi),Qi=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.drawImp=function(t){var o,i=this.getWidget(),r=i.getPane(),a=i.getBounding(),s=i.getPane().getChart().getChartStore(),l=s.getTooltipStore().getCrosshair(),u=s.getStyles().crosshair;if(l.paneId!==void 0&&this.compare(l,r.getId())&&u.show){var c=this.getDirectionStyles(u),d=c.text;if(c.show&&d.show){var p=r.getAxisComponent(),v=this.getText(l,s,p);t.font=Je(d.size,d.weight,d.family),(o=this.createFigure("text",this.getTextAttrs(v,t.measureText(v).width,l,a,p,d),d))===null||o===void 0||o.draw(t)}}},e.prototype.compare=function(t,o){return t.paneId===o},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,o,i){var r,a,s,l=i,u=i.convertFromPixel(t.y);if(l.getType()===h.YAxisType.Percentage){var c=(a=(r=o.getVisibleDataList()[0])===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{};s="".concat(((u-c.close)/c.close*100).toFixed(2),"%")}else{var d=o.getIndicatorStore().getInstances(t.paneId),p=0,v=!1;l.isInCandle()?p=o.getPrecision().price:d.forEach(function(g){p=Math.max(g.precision,p),v||(v=g.shouldFormatBigNumber)}),s=ie(u,p),v&&(s=o.getCustomApi().formatBigNumber(s))}return re(s,o.getThousandsSeparator())},e.prototype.getTextAttrs=function(t,o,i,r,a,s){var l,u;return a.isFromZero()?(l=0,u="left"):(l=r.width,u="right"),{x:l,y:i.y,text:t,align:u,baseline:"middle"}},e}(Be),In=function(n){function e(t,o){var i=n.call(this,t,o)||this;return i._yAxisView=new bn(i),i._candleLastPriceLabelView=new En(i),i._indicatorLastValueView=new Tn(i),i._overlayYAxisView=new Ji(i),i._crosshairHorizontalLabelView=new Qi(i),i.getContainer().style.cursor="ns-resize",i.addChild(i._overlayYAxisView),i}return $(e,n),e.prototype.getName=function(){return Le},e.prototype.updateMain=function(t){this._yAxisView.draw(t),this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t)},e}(Jt),eo=function(){function n(e){this._extremum={min:0,max:0,range:0,realMin:0,realMax:0,realRange:0},this._prevExtremum={min:0,max:0,range:0,realMin:0,realMax:0,realRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return n.prototype.getParent=function(){return this._parent},n.prototype.buildTicks=function(e){return this._autoCalcTickFlag&&(this._extremum=this.calcExtremum()),!(this._prevExtremum.min===this._extremum.min&&this._prevExtremum.max===this._extremum.max&&!e)&&(this._prevExtremum=this._extremum,this._ticks=this.optimalTicks(this._calcTicks()),!0)},n.prototype.getTicks=function(){return this._ticks},n.prototype.getScrollZoomEnabled=function(){var e;return(e=this.getParent().getOptions().axisOptions.scrollZoomEnabled)===null||e===void 0||e},n.prototype.setExtremum=function(e){this._autoCalcTickFlag=!1,this._extremum=e},n.prototype.getExtremum=function(){return this._extremum},n.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},n.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},n.prototype._calcTicks=function(){var e=this._extremum,t=e.realMin,o=e.realMax,i=e.realRange,r=[];if(i>=0){var a=le(this._calcTickInterval(i),2),s=a[0],l=a[1],u=Ci(Math.ceil(t/s)*s,l),c=Ci(Math.floor(o/s)*s,l),d=0,p=u;if(s!==0)for(;c>=p;){var v=p.toFixed(l);r[d]={text:v,coord:0,value:v},++d,p+=s}}return r},n.prototype._calcTickInterval=function(e){var t,o,i,r,a=(o=Math.floor(gt(t=e/8)),i=Qe(o),t=(1.5>(r=t/i)?1:2.5>r?2:3.5>r?3:4.5>r?4:5.5>r?5:6.5>r?6:8)*i,-20>o?t:+t.toFixed(0>o?-o:0)),s=function(l){var u=""+l,c=u.indexOf("e");if(c>0){var d=+u.slice(c+1);return 0>d?-d:0}var p=u.indexOf(".");return 0>p?0:u.length-1-p}(a);return[a,s]},n}(),Dn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.calcExtremum=function(){var t,o,i,r,a,s=this.getParent(),l=s.getChart(),u=l.getChartStore(),c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,p=[],v=!1,g=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER,_=Number.MAX_SAFE_INTEGER;u.getIndicatorStore().getInstances(s.getId()).forEach(function(X){var ne,pe,ye;v||(v=(ne=X.shouldOhlc)!==null&&ne!==void 0&&ne),_=Math.min(_,X.precision),X.minValue!==null&&(g=Math.min(g,X.minValue)),X.maxValue!==null&&(f=Math.max(f,X.maxValue)),p.push({figures:(pe=X.figures)!==null&&pe!==void 0?pe:[],result:(ye=X.result)!==null&&ye!==void 0?ye:[]})});var x=4,C=this.isInCandle();if(C){var S=u.getPrecision().price;x=_!==Number.MAX_SAFE_INTEGER?Math.min(_,S):S}else _!==Number.MAX_SAFE_INTEGER&&(x=_);var w=u.getVisibleDataList(),D=l.getStyles().candle,k=D.type===h.CandleType.Area,F=D.area.value,A=C&&!k||!C&&v;w.forEach(function(X){var ne=X.dataIndex,pe=X.data;if(A&&(c=Math.min(c,pe.low),d=Math.max(d,pe.high)),C&&k){var ye=pe[F];c=Math.min(c,ye),d=Math.max(d,ye)}p.forEach(function($e){var Te,Ie=(Te=$e.result[ne])!==null&&Te!==void 0?Te:{};$e.figures.forEach(function(je){var ze=Ie[je.key];M(ze)&&(c=Math.min(c,ze),d=Math.max(d,ze))})})}),c!==Number.MAX_SAFE_INTEGER&&d!==Number.MIN_SAFE_INTEGER?(c=Math.min(g,c),d=Math.max(f,d)):(c=0,d=10);var L,R=this.getType();switch(R){case h.YAxisType.Percentage:var z=(t=w[0])===null||t===void 0?void 0:t.data;(z==null?void 0:z.close)!==void 0&&(c=(c-z.close)/z.close*100,d=(d-z.close)/z.close*100),L=.01;break;case h.YAxisType.Log:c=gt(c),d=gt(d),L=.05*Qe(-x);break;default:L=Qe(-x)}if(c===d||L>Math.abs(c-d)){var V=g===c,N=f===d;c=V?c:N?c-8*L:c-4*L,d=N?d:V?d+8*L:d+4*L}var H=(i=(o=this.getParent().getYAxisWidget())===null||o===void 0?void 0:o.getBounding().height)!==null&&i!==void 0?i:0,j=s.getOptions().gap,K=(r=j==null?void 0:j.top)!==null&&r!==void 0?r:.2;1>K||(K/=H);var q=(a=j==null?void 0:j.bottom)!==null&&a!==void 0?a:.1;1>q||(q/=H);var ae,de,ge,Z=Math.abs(d-c);return Z=Math.abs((d+=Z*K)-(c-=Z*q)),R===h.YAxisType.Log?(ae=Qe(c),de=Qe(d),ge=Math.abs(de-ae)):(ae=c,de=d,ge=Z),{min:c,max:d,range:Z,realMin:ae,realMax:de,realRange:ge}},e.prototype._innerConvertToPixel=function(t){var o,i,r=(i=(o=this.getParent().getYAxisWidget())===null||o===void 0?void 0:o.getBounding().height)!==null&&i!==void 0?i:0,a=this.getExtremum(),s=(t-a.min)/a.range;return this.isReverse()?Math.round(s*r):Math.round((1-s)*r)},e.prototype.isInCandle=function(){return this.getParent().getName()==="candle"},e.prototype.getType=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.type:h.YAxisType.Normal},e.prototype.getPosition=function(){return this.getParent().getChart().getStyles().yAxis.position},e.prototype.isReverse=function(){return!!this.isInCandle()&&this.getParent().getChart().getStyles().yAxis.reverse},e.prototype.isFromZero=function(){var t=this.getParent().getChart().getStyles().yAxis,o=t.inside;return t.position===h.YAxisPosition.Left&&o||t.position===h.YAxisPosition.Right&&!o},e.prototype.optimalTicks=function(t){var o,i,r=this,a=this.getParent(),s=(i=(o=a.getYAxisWidget())===null||o===void 0?void 0:o.getBounding().height)!==null&&i!==void 0?i:0,l=a.getChart().getChartStore(),u=l.getCustomApi(),c=[],d=this.getType(),p=l.getIndicatorStore().getInstances(a.getId()),v=l.getThousandsSeparator(),g=0,f=!1;this.isInCandle()?g=l.getPrecision().price:p.forEach(function(C){g=Math.max(g,C.precision),f||(f=C.shouldFormatBigNumber)});var _,x=l.getStyles().xAxis.tickText.size;return t.forEach(function(C){var S,w=C.value,D=r._innerConvertToPixel(+w);switch(d){case h.YAxisType.Percentage:S="".concat(ie(w,2),"%");break;case h.YAxisType.Log:D=r._innerConvertToPixel(gt(+w)),S=ie(w,g);break;default:S=ie(w,g),f&&(S=u.formatBigNumber(w))}S=re(S,v),D>x&&s-x>D&&(_!==void 0&&Math.abs(_-D)>2*x||_===void 0)&&(c.push({text:S,coord:D,value:w}),_=D)}),c},e.prototype.getAutoSize=function(){var t=this.getParent(),o=t.getChart(),i=o.getStyles(),r=i.yAxis,a=r.size;if(a!=="auto")return a;var s=o.getChartStore(),l=s.getCustomApi(),u=0;if(r.show&&(r.axisLine.show&&(u+=r.axisLine.size),r.tickLine.show&&(u+=r.tickLine.length),r.tickText.show)){var c=0;this.getTicks().forEach(function(w){c=Math.max(c,vt(w.text,r.tickText.size,r.tickText.weight,r.tickText.family))}),u+=r.tickText.marginStart+r.tickText.marginEnd+c}var d=i.crosshair,p=0;if(d.show&&d.horizontal.show&&d.horizontal.text.show){var v=s.getIndicatorStore().getInstances(t.getId()),g=0,f=!1;v.forEach(function(w){g=Math.max(w.precision,g),f||(f=w.shouldFormatBigNumber)});var _=2;if(this.getType()!==h.YAxisType.Percentage)if(this.isInCandle()){var x=s.getPrecision().price,C=i.indicator.lastValueMark;_=C.show&&C.text.show?Math.max(g,x):x}else _=g;var S=ie(this.getExtremum().max,_);f&&(S=l.formatBigNumber(S)),p+=d.horizontal.text.paddingLeft+d.horizontal.text.paddingRight+2*d.horizontal.text.borderSize+vt(S,d.horizontal.text.size,d.horizontal.text.weight,d.horizontal.text.family)}return Math.max(u,p)},e.prototype.convertFromPixel=function(t){var o,i,r,a=(i=(o=this.getParent().getYAxisWidget())===null||o===void 0?void 0:o.getBounding().height)!==null&&i!==void 0?i:0,s=this.getExtremum(),l=s.min,u=s.range,c=(this.isReverse()?t/a:1-t/a)*u+l;switch(this.getType()){case h.YAxisType.Percentage:var d=(r=this.getParent().getChart().getChartStore().getVisibleDataList()[0])===null||r===void 0?void 0:r.data;return(d==null?void 0:d.close)!==void 0?d.close*c/100+d.close:0;case h.YAxisType.Log:return Qe(c);default:return c}},e.prototype.convertToRealValue=function(t){var o=t;return this.getType()===h.YAxisType.Log&&(o=Qe(t)),o},e.prototype.convertToPixel=function(t){var o,i=t;switch(this.getType()){case h.YAxisType.Percentage:var r=(o=this.getParent().getChart().getChartStore().getVisibleDataList()[0])===null||o===void 0?void 0:o.data;(r==null?void 0:r.close)!==void 0&&(i=(t-r.close)/r.close*100);break;case h.YAxisType.Log:i=gt(t);break;default:i=t}return this._innerConvertToPixel(i)},e.prototype.convertToNicePixel=function(t){var o,i,r=(i=(o=this.getParent().getYAxisWidget())===null||o===void 0?void 0:o.getBounding().height)!==null&&i!==void 0?i:0,a=this.convertToPixel(t);return Math.round(Math.max(.05*r,Math.min(a,.98*r)))},e}(eo),to=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.getName=function(){return"indicator"},e.prototype.createAxisComponent=function(){return new Dn(this)},e.prototype.createMainWidget=function(t){return new Ki(t,this)},e.prototype.createSeparatorWidget=function(t){return new an(t,this)},e.prototype.createYAxisWidget=function(t){return new In(t,this)},e}(Ai),Pn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.getName=function(){return"candle"},e.prototype.createMainWidget=function(t){return new wn(t,this)},e.prototype.createSeparatorWidget=function(){return null},e}(to),Mn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t,o){var i=o.axisLine.size/2;return{coordinates:[{x:0,y:i},{x:t.width,y:i}]}},e.prototype.createTickLines=function(t,o,i){var r=i.tickLine,a=i.axisLine.size;return t.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+r.length}]}})},e.prototype.createTickTexts=function(t,o,i){var r=i.tickText,a=i.axisLine.size,s=i.tickLine.length;return t.map(function(l){return{x:l.coord,y:a+s+r.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(Zi),Fn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(t){return t.getInstances()},e.prototype.getProgressOverlay=function(t){return t.instance},e.prototype.getDefaultFigures=function(t,o,i,r,a,s,l,u,c,d){var p,v=[];if(t.needDefaultXAxisFigure&&t.id===((p=d.instance)===null||p===void 0?void 0:p.id)){var g=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;o.forEach(function(_,x){g=Math.min(g,_.x),f=Math.max(f,_.x);var C=t.points[x];if(C.timestamp!==void 0){var S=s.formatDate(a,C.timestamp,"YYYY-MM-DD HH:mm",h.FormatDateType.Crosshair);v.push({type:"text",attrs:{x:_.x,y:0,text:S,align:"center"},ignoreEvent:!0})}}),o.length>1&&v.unshift({type:"rect",attrs:{x:g,y:0,width:f-g,height:i.height},ignoreEvent:!0})}return v},e.prototype.getFigures=function(t,o,i,r,a,s,l,u,c,d){var p,v;return(v=(p=t.createXAxisFigures)===null||p===void 0?void 0:p.call(t,{overlay:t,coordinates:o,bounding:i,barSpace:r,precision:a,thousandsSeparator:s,dateTimeFormat:l,defaultStyles:u,xAxis:c,yAxis:d}))!==null&&v!==void 0?v:[]},e}(Ji),kn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.compare=function(t){return t.kLineData!==void 0&&t.dataIndex===t.realDataIndex},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,o){var i,r=(i=t.kLineData)===null||i===void 0?void 0:i.timestamp;return o.getCustomApi().formatDate(o.getTimeScaleStore().getDateTimeFormat(),r,"YYYY-MM-DD HH:mm",h.FormatDateType.Crosshair)},e.prototype.getTextAttrs=function(t,o,i,r,a,s){var l,u=i.realX,c="center";return 0>u-o/2-s.paddingLeft?(l=0,c="left"):u+o/2+s.paddingRight>r.width?(l=r.width,c="right"):l=u,{x:l,y:0,text:t,align:c,baseline:"top"}},e}(Qi),An=function(n){function e(t,o){var i=n.call(this,t,o)||this;return i._xAxisView=new Mn(i),i._overlayXAxisView=new Fn(i),i._crosshairVerticalLabelView=new kn(i),i.getContainer().style.cursor="ew-resize",i.addChild(i._overlayXAxisView),i}return $(e,n),e.prototype.getName=function(){return Ae},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(Jt),Ln=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.calcExtremum=function(){var t=this.getParent().getChart().getChartStore().getTimeScaleStore().getVisibleRange(),o=t.from,i=t.to,r=i-1,a=i-o;return{min:o,max:r,range:a,realMin:o,realMax:r,realRange:a}},e.prototype.optimalTicks=function(t){var o,i,r=this.getParent().getChart(),a=r.getChartStore(),s=a.getCustomApi().formatDate,l=[],u=t.length,c=a.getDataList();if(u>0){var d=a.getTimeScaleStore().getDateTimeFormat(),p=r.getStyles().xAxis.tickText,v=vt("00-00 00:00",p.size,p.weight,p.family),g=this.convertToPixel(parseInt(t[0].value,10)),f=1;if(u>1){var _=this.convertToPixel(parseInt(t[1].value,10)),x=Math.abs(_-g);v>x&&(f=Math.ceil(v/x))}for(var C=0;u>C;C+=f){var S=parseInt(t[C].value,10),w=c[S].timestamp,D=s(d,w,"HH:mm",h.FormatDateType.XAxis);C!==0&&(D=(o=this._optimalTickLabel(s,d,w,c[parseInt(t[C-f].value,10)].timestamp))!==null&&o!==void 0?o:D);var k=this.convertToPixel(S);l.push({text:D,coord:k,value:w})}if(l.length===1)l[0].text=s(d,l[0].value,"YYYY-MM-DD HH:mm",h.FormatDateType.XAxis);else{var F=l[0].value,A=l[1].value;if(l[2]!==void 0){var L=l[2].text;/^[0-9]{2}-[0-9]{2}$/.test(L)?l[0].text=s(d,F,"MM-DD",h.FormatDateType.XAxis):/^[0-9]{4}-[0-9]{2}$/.test(L)?l[0].text=s(d,F,"YYYY-MM",h.FormatDateType.XAxis):/^[0-9]{4}$/.test(L)&&(l[0].text=s(d,F,"YYYY",h.FormatDateType.XAxis))}else l[0].text=(i=this._optimalTickLabel(s,d,F,A))!==null&&i!==void 0?i:l[0].text}}return l},e.prototype._optimalTickLabel=function(t,o,i,r){var a=t(o,i,"YYYY",h.FormatDateType.XAxis),s=t(o,i,"YYYY-MM",h.FormatDateType.XAxis),l=t(o,i,"MM-DD",h.FormatDateType.XAxis);return a!==t(o,r,"YYYY",h.FormatDateType.XAxis)?a:s!==t(o,r,"YYYY-MM",h.FormatDateType.XAxis)?s:l!==t(o,r,"MM-DD",h.FormatDateType.XAxis)?l:null},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),o=t.xAxis,i=o.size;if(i!=="auto")return i;var r=t.crosshair,a=0;o.show&&(o.axisLine.show&&(a+=o.axisLine.size),o.tickLine.show&&(a+=o.tickLine.length),o.tickText.show&&(a+=o.tickText.marginStart+o.tickText.marginEnd+o.tickText.size));var s=0;return r.show&&r.vertical.show&&r.vertical.text.show&&(s+=r.vertical.text.paddingTop+r.vertical.text.paddingBottom+2*r.vertical.text.borderSize+r.vertical.text.size),Math.max(a,s)},e.prototype.convertTimestampFromPixel=function(t){var o=this.getParent().getChart().getChartStore().getTimeScaleStore(),i=o.coordinateToDataIndex(t);return o.dataIndexToTimestamp(i)},e.prototype.convertTimestampToPixel=function(t){var o=this.getParent().getChart().getChartStore().getTimeScaleStore(),i=o.timestampToDataIndex(t);return o.dataIndexToCoordinate(i)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().getTimeScaleStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().getTimeScaleStore().dataIndexToCoordinate(t)},e}(eo),Bn=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return $(e,n),e.prototype.getName=function(){return"xAxis"},e.prototype.createAxisComponent=function(){return new Ln(this)},e.prototype.createMainWidget=function(t){return new An(t,this)},e}(Ai);function io(){var n;return typeof window<"u"&&((n=window.navigator.userAgent.toLowerCase().indexOf("firefox"))!==null&&n!==void 0?n:-1)>-1}function ii(){return typeof window<"u"&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var oi,zn=function(){function n(e,t,o){var i=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:-1/0,y:1/0},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:-1/0,y:1/0},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!ii(),this._onFirefoxOutsideMouseUp=function(r){i._mouseUpHandler(r)},this._onMobileSafariDoubleClick=function(r){i._firesTouchEvents(r)?(++i._tapCount,i._tapTimeoutId!==null&&i._tapCount>1&&(30>i._mouseTouchMoveWithDownInfo(i._getCoordinate(r),i._tapCoordinate).manhattanDistance&&!i._cancelTap&&i._processEvent(i._makeCompatEvent(r),i._handler.doubleTapEvent),i._resetTapTimeout())):(++i._clickCount,i._clickTimeoutId!==null&&i._clickCount>1&&(5>i._mouseTouchMoveWithDownInfo(i._getCoordinate(r),i._clickCoordinate).manhattanDistance&&!i._cancelClick&&i._processEvent(i._makeCompatEvent(r),i._handler.mouseDoubleClickEvent),i._resetClickTimeout()))},this._target=e,this._handler=t,this._options=o,this._init()}return n.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},n.prototype._mouseEnterHandler=function(e){var t,o,i,r=this;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(o=this._unsubscribeMouseWheel)===null||o===void 0||o.call(this),(i=this._unsubscribeContextMenu)===null||i===void 0||i.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},n.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:-1/0,y:1/0}},n.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:-1/0,y:1/0}},n.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},n.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(this._handler.mouseWheelHortEvent===void 0||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(this._handler.mouseWheelVertEvent===void 0)return;var t=-e.deltaY/100;if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(t!==0){var o=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),o)}}},n.prototype._contextMenuHandler=function(e){this._preventDefault(e)},n.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var o=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),i=o.yOffset;if(this._touchMoveExceededManhattanDistance||o.manhattanDistance>=5){if(!this._touchMoveExceededManhattanDistance){var r=.5*o.xOffset,a=i>=r&&!this._options.treatVertDragAsPageScroll(),s=r>i&&!this._options.treatHorzDragAsPageScroll();a||s||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},n.prototype._mouseMoveWithDownHandler=function(e){e.button===0&&(5>this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate).manhattanDistance||(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent))},n.prototype._mouseTouchMoveWithDownInfo=function(e,t){var o=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return{xOffset:o,yOffset:i,manhattanDistance:o+i}},n.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var o=this._makeCompatEvent(e,t);this._processEvent(o,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1?(30>this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance&&!this._cancelTap&&this._processEvent(o,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||(this._processEvent(o,this._handler.tapEvent),this._handler.tapEvent!==void 0&&this._preventDefault(e)),this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},n.prototype._mouseUpHandler=function(e){if(e.button===0){var t=this._makeCompatEvent(e);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),io()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._firesTouchEvents(e)||(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1?(5>this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent))}},n.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},n.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var o=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._touchMoveHandler.bind(this),r=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){o.removeEventListener("touchmove",i),o.removeEventListener("touchend",r)},o.addEventListener("touchmove",i,{passive:!1}),o.addEventListener("touchend",r,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),500),this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(t))}},n.prototype._mouseDownHandler=function(e){if(e.button===2)return this._preventDefault(e),void this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);if(e.button===0){var t=this._target.ownerDocument.documentElement;io()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var o=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",i)},t.addEventListener("mousemove",o),t.addEventListener("mouseup",i),this._mousePressed=!0,this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(e)))}},n.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,o=function(i){e._handler.mouseDownOutsideEvent!=null&&(i.composed&&e._target.contains(i.composedPath()[0])||i.target!==null&&e._target.contains(i.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",o)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",o)},t.addEventListener("mousedown",o),t.addEventListener("touchstart",o,{passive:!0}),ii()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(i){if(i.button===1)return i.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},n.prototype._initPinch=function(){var e=this;this._handler.pinchStartEvent===void 0&&this._handler.pinchEvent===void 0&&this._handler.pinchEndEvent===void 0||(this._target.addEventListener("touchstart",function(t){return e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(t.touches.length===2&&e._startPinchMiddleCoordinate!==null&&e._handler.pinchEvent!==void 0){var o=e._getTouchDistance(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(O(O({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),o),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},n.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},n.prototype._startPinch=function(e){var t,o=(t=this._target.getBoundingClientRect())!==null&&t!==void 0?t:{left:0,top:0};this._startPinchMiddleCoordinate={x:(e[0].clientX-o.left+(e[1].clientX-o.left))/2,y:(e[0].clientY-o.top+(e[1].clientY-o.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),this._handler.pinchStartEvent!==void 0&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},n.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,this._handler.pinchEndEvent!==void 0&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},n.prototype._mouseLeaveHandler=function(e){var t,o,i;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(o=this._unsubscribeMouseWheel)===null||o===void 0||o.call(this),(i=this._unsubscribeContextMenu)===null||i===void 0||i.call(this),this._firesTouchEvents(e)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!ii())},n.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},n.prototype._firesTouchEvents=function(e){var t;return((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)!==void 0?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+500},n.prototype._processEvent=function(e,t){t==null||t.call(this._handler,e)},n.prototype._makeCompatEvent=function(e,t){var o,i=this,r=t??e,a=(o=this._target.getBoundingClientRect())!==null&&o!==void 0?o:{left:0,top:0};return{x:r.clientX-a.left,y:r.clientY-a.top,pageX:r.pageX,pageY:r.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},n.prototype._getTouchDistance=function(e,t){var o=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(o*o+i*i)},n.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},n.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},n.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},n.prototype._touchWithId=function(e,t){for(var o=0;e.length>o;++o)if(e[o].identifier===t)return e[o];return null},n}(),Rn=function(){function n(e,t){var o=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisExtremum=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(i){if(i.shiftKey)switch(i.code){case"Equal":o._chart.getChartStore().getTimeScaleStore().zoom(.5);break;case"Minus":o._chart.getChartStore().getTimeScaleStore().zoom(-.5);break;case"ArrowLeft":(r=o._chart.getChartStore().getTimeScaleStore()).startScroll(),r.scroll(-3*r.getBarSpace().bar);break;case"ArrowRight":var r;(r=o._chart.getChartStore().getTimeScaleStore()).startScroll(),r.scroll(3*r.getBarSpace().bar)}},this._container=e,this._chart=t,this._event=new zn(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return n.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},n.prototype.pinchEvent=function(e,t){var o=this._findWidgetByEvent(e),i=o.pane,r=o.widget;if((i==null?void 0:i.getId())!==ve&&(r==null?void 0:r.getName())===ce){var a=this._makeWidgetEvent(e,r),s=5*(t-this._pinchScale);return this._pinchScale=t,this._chart.getChartStore().getTimeScaleStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},n.prototype.mouseWheelHortEvent=function(e,t){var o=this._chart.getChartStore().getTimeScaleStore();return o.startScroll(),o.scroll(t),!0},n.prototype.mouseWheelVertEvent=function(e,t){var o,i,r=this._findWidgetByEvent(e).widget,a=(o=e.isTouch)!==null&&o!==void 0&&o,s=this._makeWidgetEvent(e,r),l=null,u=r==null?void 0:r.getName();if(a)if(u===ce||u===Ae)l={x:s.x,y:s.y};else{var c=(i=this._chart.getPaneById(he))===null||i===void 0?void 0:i.getBounding();l={x:c.width/2,y:c.height/2}}else u===ce&&(l={x:s.x,y:s.y});return l!==null&&(this._chart.getChartStore().getTimeScaleStore().zoom(t,{x:s.x,y:s.y}),!0)},n.prototype.mouseDownEvent=function(e){var t,o,i=this._findWidgetByEvent(e),r=i.pane,a=i.widget;if(this._mouseDownWidget=a,a!==null){var s=this._makeWidgetEvent(e,a);switch(a.getName()){case yt:return a.dispatchEvent("mouseDownEvent",s);case ce:var l=(t=r==null?void 0:r.getAxisComponent().getExtremum())!==null&&t!==void 0?t:null;return this._prevYAxisExtremum=l===null?l:O({},l),this._startScrollCoordinate={x:s.x,y:s.y},this._chart.getChartStore().getTimeScaleStore().startScroll(),a.dispatchEvent("mouseDownEvent",s);case Ae:return(u=a.dispatchEvent("mouseDownEvent",s))&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:s.x,y:s.y},this._xAxisStartScaleDistance=s.pageX,u;case Le:var u;return(u=a.dispatchEvent("mouseDownEvent",s))&&this._chart.updatePane(1),l=(o=r==null?void 0:r.getAxisComponent().getExtremum())!==null&&o!==void 0?o:null,this._prevYAxisExtremum=l===null?l:O({},l),this._yAxisStartScaleDistance=s.pageY,u}}return!1},n.prototype.mouseMoveEvent=function(e){var t,o,i,r=this._findWidgetByEvent(e),a=r.pane,s=r.widget,l=this._makeWidgetEvent(e,s);if(((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())===(a==null?void 0:a.getId())&&((o=this._mouseMoveTriggerWidgetInfo.widget)===null||o===void 0?void 0:o.getName())===(s==null?void 0:s.getName())||(s==null||s.dispatchEvent("mouseEnterEvent",l),(i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0||i.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null)switch(s.getName()){case ce:var u=s.dispatchEvent("mouseMoveEvent",l),c=this._chart.getChartStore(),d={x:l.x,y:l.y,paneId:a==null?void 0:a.getId()};return u&&c.getTooltipStore().getActiveIcon()!==null&&(d=void 0,s!==null&&(s.getContainer().style.cursor="pointer")),this._chart.getChartStore().getTooltipStore().setCrosshair(d),u;case yt:case Ae:case Le:return u=s.dispatchEvent("mouseMoveEvent",l),this._chart.getChartStore().getTooltipStore().setCrosshair(),u}return!1},n.prototype.pressedMouseMoveEvent=function(e){var t,o,i,r,a;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===yt)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var s=this._findWidgetByEvent(e),l=s.pane,u=s.widget;if(u!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===(l==null?void 0:l.getId())&&((o=this._mouseDownWidget)===null||o===void 0?void 0:o.getName())===u.getName()){var c=this._makeWidgetEvent(e,u);switch(u.getName()){case ce:var d=u.getBounding();if(!(D=u.dispatchEvent("pressedMouseMoveEvent",c))&&this._startScrollCoordinate!==null){var p=l==null?void 0:l.getAxisComponent();if(this._prevYAxisExtremum!==null&&!p.getAutoCalcTickFlag()&&p.getScrollZoomEnabled()){var v=this._prevYAxisExtremum,g=v.min,f=v.max+(A=(k=v.range)*(F=((i=p==null?void 0:p.isReverse())!==null&&i!==void 0&&i?this._startScrollCoordinate.y-c.y:c.y-this._startScrollCoordinate.y)/d.height)),_=p.convertToRealValue(z=g+A),x=p.convertToRealValue(f);p.setExtremum({min:z,max:f,range:f-z,realMin:_,realMax:x,realRange:x-_})}var C=c.x-this._startScrollCoordinate.x;this._chart.getChartStore().getTimeScaleStore().scroll(C)}return this._chart.getChartStore().getTooltipStore().setCrosshair({x:c.x,y:c.y,paneId:l==null?void 0:l.getId()}),D;case Ae:if(D=u.dispatchEvent("pressedMouseMoveEvent",c))this._chart.updatePane(1);else{var S=l==null?void 0:l.getAxisComponent();if((r=S==null?void 0:S.getScrollZoomEnabled())===null||r===void 0||r){var w=10*((F=this._xAxisStartScaleDistance/c.pageX)-this._xAxisScale);this._xAxisScale=F,this._chart.getChartStore().getTimeScaleStore().zoom(w,(a=this._xAxisStartScaleCoordinate)!==null&&a!==void 0?a:void 0)}}return D;case Le:var D;if(D=u.dispatchEvent("pressedMouseMoveEvent",c))this._chart.updatePane(1);else if(p=l==null?void 0:l.getAxisComponent(),this._prevYAxisExtremum!==null&&p.getScrollZoomEnabled()){var k,F,A,L=this._prevYAxisExtremum,R=(k=L.range)*(F=c.pageY/this._yAxisStartScaleDistance),z=(g=L.min)-(A=(R-k)/2),V=(f=L.max+A,l==null?void 0:l.getAxisComponent());_=V.convertToRealValue(z),x=V.convertToRealValue(f),V.setExtremum({min:z,max:f,range:R,realMin:_,realMax:x,realRange:x-_}),this._chart.adjustPaneViewport(!1,!0,!0,!0)}return D}}return!1},n.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,o=!1;if(t!==null){var i=this._makeWidgetEvent(e,t);switch(t.getName()){case ce:case yt:case Ae:case Le:o=t.dispatchEvent("mouseUpEvent",i)}o&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisExtremum=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,o},n.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var o=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",o)}return!1},n.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,o=!1;if(t!==null){var i=this._makeWidgetEvent(e,t);switch(t.getName()){case ce:case Ae:case Le:o=t.dispatchEvent("mouseRightClickEvent",i)}o&&this._chart.updatePane(1)}return!1},n.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),o=t.pane,i=t.widget;if(i!==null)switch(i.getName()){case ce:var r=this._makeWidgetEvent(e,i);return i.dispatchEvent("mouseDoubleClickEvent",r);case Le:var a=o==null?void 0:o.getAxisComponent();if(!a.getAutoCalcTickFlag())return a.setAutoCalcTickFlag(!0),this._chart.adjustPaneViewport(!1,!0,!0,!0),!0}return!1},n.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().getTooltipStore().setCrosshair(),!0},n.prototype.touchStartEvent=function(e){var t=this._findWidgetByEvent(e),o=t.pane,i=t.widget;if(i!==null){var r=this._makeWidgetEvent(e,i);switch(i.getName()){case ce:var a=this._chart.getChartStore(),s=a.getTooltipStore();if(i.dispatchEvent("mouseDownEvent",r))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,s.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._flingScrollRequestId!==null&&(kt(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:r.x,y:r.y},a.getTimeScaleStore().startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var l=r.x-this._touchCoordinate.x,u=r.y-this._touchCoordinate.y;10>Math.sqrt(l*l+u*u)?(this._touchCoordinate={x:r.x,y:r.y},s.setCrosshair({x:r.x,y:r.y,paneId:o==null?void 0:o.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,s.setCrosshair())}return!0;case Ae:case Le:var c=i.dispatchEvent("mouseDownEvent",r);return c&&this._chart.updatePane(1),c}}return!1},n.prototype.touchMoveEvent=function(e){var t,o,i,r=this._findWidgetByEvent(e),a=r.pane,s=r.widget;if(s!==null){var l=this._makeWidgetEvent(e,s),u=s.getName(),c=this._chart.getChartStore(),d=c.getTooltipStore();switch(u){case ce:if(s.dispatchEvent("pressedMouseMoveEvent",l))return(t=l.preventDefault)===null||t===void 0||t.call(l),d.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._touchCoordinate!==null)(o=l.preventDefault)===null||o===void 0||o.call(l),d.setCrosshair({x:l.x,y:l.y,paneId:a==null?void 0:a.getId()});else if(this._startScrollCoordinate!==null&&Math.abs(this._startScrollCoordinate.x-l.x)>this._startScrollCoordinate.y-l.y){var p=l.x-this._startScrollCoordinate.x;c.getTimeScaleStore().scroll(p)}return!0;case Ae:case Le:var v=s.dispatchEvent("pressedMouseMoveEvent",l);return v&&((i=l.preventDefault)===null||i===void 0||i.call(l),this._chart.updatePane(1)),v}}return!1},n.prototype.touchEndEvent=function(e){var t=this,o=this._findWidgetByEvent(e).widget;if(o!==null){var i=this._makeWidgetEvent(e,o);switch(o.getName()){case ce:if(o.dispatchEvent("mouseUpEvent",i),this._startScrollCoordinate!==null){var r=new Date().getTime()-this._flingStartTime,a=(i.x-this._startScrollCoordinate.x)/(r>0?r:1)*20;if(200>r&&Math.abs(a)>0){var s=this._chart.getChartStore().getTimeScaleStore(),l=function(){t._flingScrollRequestId=Zt(function(){s.startScroll(),s.scroll(a),1>Math.abs(a*=.975)?t._flingScrollRequestId!==null&&(kt(t._flingScrollRequestId),t._flingScrollRequestId=null):l()})};l()}}return!0;case Ae:case Le:o.dispatchEvent("mouseUpEvent",i)&&this._chart.updatePane(1)}}return!1},n.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),o=t.pane,i=t.widget,r=!1;if(i!==null){var a=this._makeWidgetEvent(e,i),s=i.dispatchEvent("mouseClickEvent",a);if(i.getName()===ce){var l=this._makeWidgetEvent(e,i),u=this._chart.getChartStore().getTooltipStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,!0),r=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:l.x,y:l.y},u.setCrosshair({x:l.x,y:l.y,paneId:o==null?void 0:o.getId()},!0),r=!0),this._touchCancelCrosshair=!1)}(r||s)&&this._chart.updatePane(1)}return r},n.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},n.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),o=t.pane,i=t.widget;if(i!==null&&i.getName()===ce){var r=this._makeWidgetEvent(e,i);return this._touchCoordinate={x:r.x,y:r.y},this._chart.getChartStore().getTooltipStore().setCrosshair({x:r.x,y:r.y,paneId:o==null?void 0:o.getId()}),!0}return!1},n.prototype._findWidgetByEvent=function(e){var t,o,i=this._chart.getAllPanes(),r=e.x,a=e.y,s=null;try{for(var l=pt(i),u=l.next();!u.done;u=l.next()){var c=le(u.value,2)[1],d=c.getBounding();if(!(d.left>r||r>d.left+d.width||d.top>a||a>d.top+d.height)){s=c;break}}}catch(S){t={error:S}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}s===null&&(s=this._chart.getPaneById(ve));var p=null;if(s!==null){var v=s.getSeparatorWidget();if(v!==null){var g=v.getBounding();g.left>r||r>g.left+g.width||g.top>a||a>g.top+7||(p=v)}if(p===null){var f=s.getMainWidget(),_=f.getBounding();_.left>r||r>_.left+_.width||_.top>a||a>_.top+_.height||(p=f)}if(p===null){var x=s.getYAxisWidget();if(x!==null){var C=x.getBounding();C.left>r||r>C.left+C.width||C.top>a||a>C.top+C.height||(p=x)}}}return{pane:s,widget:p}},n.prototype._makeWidgetEvent=function(e,t){var o,i,r,a=(o=t==null?void 0:t.getBounding())!==null&&o!==void 0?o:null;return O(O({},e),{x:e.x-((i=a==null?void 0:a.left)!==null&&i!==void 0?i:0),y:e.y-((r=a==null?void 0:a.top)!==null&&r!==void 0?r:0)})},n.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},n}();h.DomPosition=void 0,(oi=h.DomPosition||(h.DomPosition={})).Root="root",oi.Main="main",oi.YAxis="yAxis";var oo=function(){function n(e,t){this._panes=new Map,this._initContainer(e),this._chartEvent=new Rn(this._chartContainer,this),this._chartStore=new cn(this,t),this._xAxisPane=new Bn(this._chartContainer,this,ve),this._panes.set(he,new Pn(this._chartContainer,this,he)),this.adjustPaneViewport(!0,!0,!0)}return n.prototype._initContainer=function(e){this._container=e,this._chartContainer=ke("div",{position:"relative",width:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer)},n.prototype._measurePaneHeight=function(){var e,t=this._container.offsetHeight,o=this._xAxisPane.getAxisComponent().getAutoSize(),i=t-o;0>i&&(i=0);var r=0;this._panes.forEach(function(l){if(l.getId()!==he){var u=l.getBounding().height,c=l.getOptions().minHeight;c>u&&(u=c),r+u>i?u=Math.max(i-(r=i),0):r+=u,l.setBounding({height:u})}});var a=i-r;(e=this._panes.get(he))===null||e===void 0||e.setBounding({height:a});var s=0;this._panes.forEach(function(l){l.setBounding({top:s}),s+=l.getBounding().height}),this._xAxisPane.setBounding({height:o,top:s})},n.prototype._measurePaneWidth=function(){var e=this._chartStore.getStyles().yAxis,t=e.position===h.YAxisPosition.Left,o=!e.inside,i=this._container.offsetWidth,r=0,a=Number.MIN_SAFE_INTEGER,s=0,l=0;this._panes.forEach(function(p){a=Math.max(a,p.getAxisComponent().getAutoSize())}),a>i&&(a=i),o?(r=i-a,t?(s=0,l=a):(s=i-a,l=0)):(r=i,l=0,s=t?0:i-a),this._chartStore.getTimeScaleStore().setTotalBarSpace(r);var u={width:i},c={width:r,left:l},d={width:a,left:s};this._panes.forEach(function(p){p.setBounding(u,c,d)}),this._xAxisPane.setBounding(u,c,d)},n.prototype._setPaneOptions=function(e,t){var o,i,r=this._panes.get((o=e==null?void 0:e.id)!==null&&o!==void 0?o:""),a=!1;if(r!==void 0){var s=t;if(e.id!==he&&e.height!==void 0&&e.height>0){var l=Math.max((i=e.minHeight)!==null&&i!==void 0?i:r.getOptions().minHeight,0);r.setBounding({height:Math.max(l,e.height)}),s=!0,a=!0}r.setOptions(e),s&&this.adjustPaneViewport(a,!0,!0,!0,!0)}},n.prototype.getContainer=function(){return this._container},n.prototype.getChartStore=function(){return this._chartStore},n.prototype.getAllPanes=function(){return this._panes},n.prototype.adjustPaneViewport=function(e,t,o,i,r){e&&this._measurePaneHeight();var a=t,s=r!=null&&r;(i!=null&&i||s)&&this._panes.forEach(function(l){var u=l.getAxisComponent().buildTicks(s);a||(a=u)}),a&&this._measurePaneWidth(),o!=null&&o&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4))},n.prototype.updatePane=function(e,t){var o;t!==void 0?(o=this.getPaneById(t))===null||o===void 0||o.update(e):(this._xAxisPane.update(e),this._panes.forEach(function(i){i.update(e)}))},n.prototype.getPaneById=function(e){var t;return e===ve?this._xAxisPane:(t=this._panes.get(e))!==null&&t!==void 0?t:null},n.prototype.crosshairChange=function(e){var t=this,o=this._chartStore.getActionStore();if(o.has(h.ActionType.OnCrosshairChange)){var i={};this._panes.forEach(function(r,a){var s={};t._chartStore.getIndicatorStore().getInstances(a).forEach(function(l){var u,c=l.result;s[l.name]=c[(u=e.dataIndex)!==null&&u!==void 0?u:c.length-1]}),i[a]=s}),e.paneId!==void 0&&o.execute(h.ActionType.OnCrosshairChange,O(O({},e),{indicatorData:i}))}},n.prototype.getDom=function(e,t){var o,i;if(e===void 0)return this._chartContainer;var r=this.getPaneById(e);if(r!==null)switch(t??h.DomPosition.Root){case h.DomPosition.Root:return r.getContainer();case h.DomPosition.Main:return r.getMainWidget().getContainer();case h.DomPosition.YAxis:return(i=(o=r.getYAxisWidget())===null||o===void 0?void 0:o.getContainer())!==null&&i!==void 0?i:null}return null},n.prototype.getSize=function(e,t){var o,i;if(e===void 0)return{width:this._chartContainer.offsetWidth,height:this._chartContainer.offsetHeight,left:0,top:0,right:0,bottom:0};var r=this.getPaneById(e);if(r!==null)switch(t??h.DomPosition.Root){case h.DomPosition.Root:return r.getBounding();case h.DomPosition.Main:return r.getMainWidget().getBounding();case h.DomPosition.YAxis:return(i=(o=r.getYAxisWidget())===null||o===void 0?void 0:o.getBounding())!==null&&i!==void 0?i:null}return null},n.prototype.setStyles=function(e){var t,o,i;this._chartStore.setOptions({styles:e}),((t=(i=W(e)?Bi(e):e)==null?void 0:i.yAxis)===null||t===void 0?void 0:t.type)!==void 0&&((o=this.getPaneById(he))===null||o===void 0||o.getAxisComponent().setAutoCalcTickFlag(!0)),this.adjustPaneViewport(!0,!0,!0,!0,!0)},n.prototype.getStyles=function(){return this._chartStore.getStyles()},n.prototype.setLocale=function(e){this._chartStore.setOptions({locale:e}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},n.prototype.getLocale=function(){return this._chartStore.getLocale()},n.prototype.setCustomApi=function(e){this._chartStore.setOptions({customApi:e}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},n.prototype.setPriceVolumePrecision=function(e,t){this._chartStore.setPrecision({price:e,volume:t})},n.prototype.getPriceVolumePrecision=function(){return this._chartStore.getPrecision()},n.prototype.setTimezone=function(e){this._chartStore.setOptions({timezone:e}),this._xAxisPane.getAxisComponent().buildTicks(!0),this._xAxisPane.update(3)},n.prototype.getTimezone=function(){return this._chartStore.getTimeScaleStore().getTimezone()},n.prototype.setOffsetRightDistance=function(e){this._chartStore.getTimeScaleStore().setOffsetRightDistance(e,!0)},n.prototype.getOffsetRightDistance=function(){return this._chartStore.getTimeScaleStore().getOffsetRightDistance()},n.prototype.setLeftMinVisibleBarCount=function(e){e>0&&this._chartStore.getTimeScaleStore().setLeftMinVisibleBarCount(Math.ceil(e))},n.prototype.setRightMinVisibleBarCount=function(e){e>0&&this._chartStore.getTimeScaleStore().setRightMinVisibleBarCount(Math.ceil(e))},n.prototype.setBarSpace=function(e){this._chartStore.getTimeScaleStore().setBarSpace(e)},n.prototype.getBarSpace=function(){return this._chartStore.getTimeScaleStore().getBarSpace().bar},n.prototype.getVisibleRange=function(){return this._chartStore.getTimeScaleStore().getVisibleRange()},n.prototype.clearData=function(){this._chartStore.clear()},n.prototype.getDataList=function(){return this._chartStore.getDataList()},n.prototype.applyNewData=function(e,t,o){this._chartStore.clear(),e.length===0?this.adjustPaneViewport(!1,!0,!0,!0):this.applyMoreData(e,t,o)},n.prototype.applyMoreData=function(e,t,o){var i=this;this._chartStore.addData(e,0,t),e.length>0&&this._chartStore.getIndicatorStore().calcInstance().then(function(r){i.adjustPaneViewport(!1,!0,!0,!0),o==null||o()}).catch(function(r){})},n.prototype.updateData=function(e,t){var o=this,i=this._chartStore.getDataList(),r=i.length,a=e.timestamp,s=ee(i[r-1],"timestamp",0);if(a>=s){var l=r;a===s&&(l=r-1),this._chartStore.addData(e,l),this._chartStore.getIndicatorStore().calcInstance().then(function(u){o.adjustPaneViewport(!1,!0,!0,!0),t==null||t()}).catch(function(u){})}},n.prototype.loadMore=function(e){this._chartStore.getTimeScaleStore().setLoadMoreCallback(e)},n.prototype.createIndicator=function(e,t,o,i){var r,a,s,l=this,u=W(e)?{name:e}:e;if(bi(u.name)===null)return null;if(M(o)&&W(o==null?void 0:o.id)&&this._panes.has(o.id))s=o.id,this._chartStore.getIndicatorStore().addInstance(u,s,t!=null&&t).then(function(v){var g,f;l._setPaneOptions(o,(f=(g=l._panes.get(s))===null||g===void 0?void 0:g.getAxisComponent().buildTicks(!0))!==null&&f!==void 0&&f)}).catch(function(v){});else{s=(r=o==null?void 0:o.id)!==null&&r!==void 0?r:xi(sn);var c=Array.from(this._panes.values()).pop(),d=new to(this._chartContainer,this,s,c);c.setBottomPane(d);var p=(a=o==null?void 0:o.height)!==null&&a!==void 0?a:100;d.setBounding({height:p}),M(o)&&d.setOptions(o),this._panes.set(s,d),this._chartStore.getIndicatorStore().addInstance(u,s,t!=null&&t).finally(function(){l.adjustPaneViewport(!0,!0,!0,!0,!0),i==null||i()})}return s},n.prototype.overrideIndicator=function(e,t,o){var i=this;this._chartStore.getIndicatorStore().override(e,t??null).then(function(r){var a=le(r,2),s=a[1];(a[0]||s)&&(i.adjustPaneViewport(!1,s,!0,s),o==null||o())}).catch(function(){})},n.prototype.getIndicatorByPaneId=function(e,t){return this._chartStore.getIndicatorStore().getInstanceByPaneId(e,t)},n.prototype.removeIndicator=function(e,t){var o=this._chartStore.getIndicatorStore();if(o.removeInstance(e,t)){var i=!1;if(e!==he&&!o.hasInstances(e)){var r=this._panes.get(e);if(r!==void 0){i=!0;var a=r.getTopPane(),s=r.getBottomPane();s==null||s.setTopPane(a),a==null||a.setBottomPane(s),r==null||r.destroy(),this._panes.delete(e)}}this.adjustPaneViewport(i,!0,!0,!0,!0)}},n.prototype.createOverlay=function(e,t){var o=[];W(e)?o=[{name:e}]:P(e)?o=e.map(function(a){return W(a)?{name:a}:a}):o=[e];var i=!0;t!==void 0&&this.getPaneById(t)!==null||(t=he,i=!1);var r=this._chartStore.getOverlayStore().addInstances(o,t,i);return P(e)?r:r[0]},n.prototype.getOverlayById=function(e){return this._chartStore.getOverlayStore().getInstanceById(e)},n.prototype.overrideOverlay=function(e){this._chartStore.getOverlayStore().override(e)},n.prototype.removeOverlay=function(e){var t;e!==void 0&&(t=W(e)?{id:e}:e),this._chartStore.getOverlayStore().removeInstance(t)},n.prototype.setPaneOptions=function(e){this._setPaneOptions(e,!1)},n.prototype.setZoomEnabled=function(e){this._chartStore.getTimeScaleStore().setZoomEnabled(e)},n.prototype.isZoomEnabled=function(){return this._chartStore.getTimeScaleStore().getZoomEnabled()},n.prototype.setScrollEnabled=function(e){this._chartStore.getTimeScaleStore().setScrollEnabled(e)},n.prototype.isScrollEnabled=function(){return this._chartStore.getTimeScaleStore().getScrollEnabled()},n.prototype.scrollByDistance=function(e,t){var o=t===void 0||0>t?0:t,i=this._chartStore.getTimeScaleStore();if(o>0){i.startScroll();var r=new Date().getTime(),a=function(){var s=(new Date().getTime()-r)/o,l=s>=1;i.scroll(l?e:e*s),l||requestAnimationFrame(a)};a()}else i.startScroll(),i.scroll(e)},n.prototype.scrollToRealTime=function(e){var t=this._chartStore.getTimeScaleStore(),o=t.getBarSpace().bar,i=t.getOffsetRightBarCount()-t.getInitialOffsetRightDistance()/o;this.scrollByDistance(i*o,e)},n.prototype.scrollToDataIndex=function(e,t){var o=this._chartStore.getTimeScaleStore(),i=(o.getOffsetRightBarCount()+(this.getDataList().length-1-e))*o.getBarSpace().bar;this.scrollByDistance(i,t)},n.prototype.scrollToTimestamp=function(e,t){var o=$t(this.getDataList(),"timestamp",e);this.scrollToDataIndex(o,t)},n.prototype.zoomAtCoordinate=function(e,t,o){var i=o===void 0||0>o?0:o,r=this._chartStore.getTimeScaleStore();if(i>0){var a=r.getBarSpace().bar,s=a*e-a,l=new Date().getTime(),u=function(){var c=(new Date().getTime()-l)/i,d=c>=1;r.zoom((d?s:s*c)/a,t),d||requestAnimationFrame(u)};u()}else r.zoom(e,t)},n.prototype.zoomAtDataIndex=function(e,t,o){var i=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:i,y:0},o)},n.prototype.zoomAtTimestamp=function(e,t,o){var i=$t(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,i,o)},n.prototype.convertToPixel=function(e,t){var o,i=t.paneId,r=i===void 0?he:i,a=t.absolute,s=a!==void 0&&a,l=[];if(r!==ve){var u=this.getPaneById(r);if(u!==null){var c=this._chartStore.getTimeScaleStore(),d=u.getBounding(),p=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=u.getAxisComponent();l=p.map(function(f){var _={},x=f.dataIndex;if(f.timestamp!==void 0&&(x=c.timestampToDataIndex(f.timestamp)),x!==void 0&&(_.x=v==null?void 0:v.convertToPixel(x)),f.value!==void 0){var C=g==null?void 0:g.convertToPixel(f.value);_.y=s?d.top+C:C}return _})}}return P(e)?l:(o=l[0])!==null&&o!==void 0?o:{}},n.prototype.convertFromPixel=function(e,t){var o,i=t.paneId,r=i===void 0?he:i,a=t.absolute,s=a!==void 0&&a,l=[];if(r!==ve){var u=this.getPaneById(r);if(u!==null){var c=this._chartStore.getTimeScaleStore(),d=u.getBounding(),p=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=u.getAxisComponent();l=p.map(function(f){var _,x={};if(f.x!==void 0){var C=v.convertFromPixel(f.x);x.dataIndex=C,x.timestamp=(_=c.dataIndexToTimestamp(C))!==null&&_!==void 0?_:void 0}return f.y!==void 0&&(x.value=g.convertFromPixel(s?f.y-d.top:f.y)),x})}}return P(e)?l:(o=l[0])!==null&&o!==void 0?o:{}},n.prototype.executeAction=function(e,t){var o;if(e===h.ActionType.OnCrosshairChange){var i=O({},t);i.paneId=(o=i.paneId)!==null&&o!==void 0?o:he,this._chartStore.getTooltipStore().setCrosshair(i)}},n.prototype.subscribeAction=function(e,t){this._chartStore.getActionStore().subscribe(e,t)},n.prototype.unsubscribeAction=function(e,t){this._chartStore.getActionStore().unsubscribe(e,t)},n.prototype.getConvertPictureUrl=function(e,t,o){var i=this._chartContainer.offsetWidth,r=this._chartContainer.offsetHeight,a=ke("canvas",{width:"".concat(i,"px"),height:"".concat(r,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Ze(a);a.width=i*l,a.height=r*l,s.scale(l,l),s.fillStyle=o??"#FFFFFF",s.fillRect(0,0,i,r);var u=e!=null&&e;this._panes.forEach(function(d){var p=d.getBounding();s.drawImage(d.getImage(u),0,p.top,i,p.height)});var c=this._xAxisPane.getBounding();return s.drawImage(this._xAxisPane.getImage(u),0,c.top,i,c.height),a.toDataURL("image/".concat(t??"jpeg"))},n.prototype.resize=function(){this.adjustPaneViewport(!0,!0,!0,!0,!0)},n.prototype.destroy=function(){this._chartEvent.destroy(),this._panes.forEach(function(e){e.destroy()}),this._panes.clear(),this._xAxisPane.destroy(),this._container.removeChild(this._chartContainer)},n}(),Lt=new Map,Wn=1,On={clone:T,merge:E,isString:W,isNumber:B,isValid:M,isObject:I,isArray:P,isFunction:b,isBoolean:Y,formatValue:ee,formatPrecision:ie,formatBigNumber:mi,formatDate:fi,formatThousands:re,calcTextWidth:vt,getLinearSlopeIntercept:Ft,getLinearYFromSlopeIntercept:Kt,getLinearYFromCoordinates:ft,checkCoordinateOnArc:$i,checkCoordinateOnCircle:zi,checkCoordinateOnLine:Di,checkCoordinateOnPolygon:Wi,checkCoordinateOnRect:Ni,checkCoordinateOnText:Yi,drawArc:ji,drawCircle:Ri,drawLine:Pi,drawPolygon:Oi,drawRect:Qt,drawText:ei,drawRectText:vn};h.dispose=function(n){var e,t,o;if(n instanceof oo)o=n.id;else{var i=void 0;o=(e=(i=W(n)?document.getElementById(n):n)==null?void 0:i.getAttribute("k-line-chart-id"))!==null&&e!==void 0?e:null}o!==null&&((t=Lt.get(o))===null||t===void 0||t.destroy(),Lt.delete(o))},h.getFigureClass=function(n){var e;return(e=_t[n])!==null&&e!==void 0?e:null},h.getOverlayClass=function(n){var e;return(e=mt[n])!==null&&e!==void 0?e:null},h.getSupportedFigures=function(){return Object.keys(_t)},h.getSupportedIndicators=function(){return Object.keys(Mt)},h.getSupportedLocales=function(){return Object.keys(At)},h.getSupportedOverlays=function(){return Object.keys(mt)},h.init=function(n,e){var t;if((t=W(n)?document.getElementById(n):n)===null)return null;var o=Lt.get(t.id);if(o!==void 0)return o;var i="k_line_chart_".concat(Wn++);return(o=new oo(t,e)).id=i,t.setAttribute("k-line-chart-id",i),Lt.set(i,o),o},h.registerFigure=function(n){_t[n.name]=Ti.extend(n)},h.registerIndicator=function(n){Mt[n.name]=wi.extend(n)},h.registerLocale=function(n,e){At[n]=O(O({},At[n]),e)},h.registerOverlay=function(n){mt[n.name]=Ei.extend(n)},h.registerStyles=function(n,e){Li[n]=e},h.utils=On,h.version=function(){return"9.5.4"}})})(ci,ci.exports);var er=ci.exports;Po.exports=er;var U=Po.exports;const tr=jn(U);var fe=(m=>(m["en-US"]="en-US",m["zh-CN"]="zh-CN",m["zh-TW"]="zh-TW",m["ja-JP"]="ja-JP",m["vi-VN"]="vi-VN",m["es-ES"]="es-ES",m["ru-RU"]="ru-RU",m["tr-TR"]="tr-TR",m["pt-BR"]="pt-BR",m["fr-FR"]="fr-FR",m["th-TH"]="th-TH",m["id-ID"]="id-ID",m))(fe||{}),hi=(m=>(m["en-US"]="en",m["zh-CN"]="zh",m["zh-TW"]="zh_TW",m["ja-JP"]="ja",m["vi-VN"]="vi",m["es-ES"]="es",m["ru-RU"]="ru",m["tr-TR"]="tr",m["pt-BR"]="pt",m["fr-FR"]="fr",m["th-TH"]="th",m["id-ID"]="id_ID",m["ko-KR"]="ko",m))(hi||{});const wt="dark",Mo="en-US",ir="kline_chart",or=["1","3","5","15","30","60","120","240","360","720","1D","3D","1W","1M"],go={tv:[0,1,2,3,8,9,10,12,13,14,15,16],simple:[0,1,3,9],simple_map:{0:"ohlc",1:"candle_solid",3:"area",9:"candle_up_stroke"}},fo={up:"#15bb7a",up_opacity:"rgba(21, 187, 122, 0.6)",down:"#d2334d",down_opacity:"rgba(210, 51, 77, 0.6)",family:"Helvetica Neue",text_size:10,crosshair:"#fff",crosshair_bg:"#4c525e"},Ot={light:{...fo,background:"#fff",grid:"rgba(243, 245, 247, 0.7)",price_mark:"#81858c",cross_line:"rgba(16, 16, 20, 0.6)",scales_text:"#81858c",scales_line:"#e9edf2",tooltip_color:"#81858c"},dark:{...fo,background:"#101014",grid:"rgba(32, 33, 36, 0.7)",price_mark:"#adb1b8",cross_line:"rgba(255, 255, 255, 0.6)",scales_text:"#adb1b8",scales_line:"#404347",tooltip_color:"#adb1b8"}},mo=m=>{const y=Ot[m]||Ot.dark;return{grid:{show:!0,horizontal:{show:!0,size:1,color:y.grid,style:U.LineType.Dashed,dashedValue:[2,2]},vertical:{show:!0,size:1,color:y.grid,style:U.LineType.Dashed,dashedValue:[2,2]}},candle:{type:U.CandleType.CandleSolid,bar:{upColor:y.up,downColor:y.down,noChangeColor:y.up,upBorderColor:y.up,downBorderColor:y.down,noChangeBorderColor:y.up,upWickColor:y.up,downWickColor:y.down,noChangeWickColor:y.up},area:{lineSize:2,lineColor:"#2196F3",value:"close",backgroundColor:[{offset:0,color:"rgba(33, 150, 243, 0.01)"},{offset:1,color:"rgba(33, 150, 243, 0.2)"}]},priceMark:{show:!0,high:{show:!0,color:y.price_mark,textOffset:4,textSize:y.text_size,textFamily:y.family,textWeight:"normal"},low:{show:!0,color:y.price_mark,textOffset:4,textSize:y.text_size,textFamily:y.family,textWeight:"normal"},last:{show:!0,upColor:y.up,downColor:y.down,noChangeColor:y.up,line:{show:!0,style:U.LineType.Dashed,dashedValue:[4,4],size:.4},text:{show:!0,style:U.PolygonType.Fill,size:y.text_size,paddingLeft:7,paddingTop:3,paddingRight:5,paddingBottom:2,borderStyle:U.LineType.Solid,borderSize:1,borderDashedValue:[2,2],color:"#FFFFFF",family:y.family,weight:"normal",borderRadius:2}}},tooltip:{showRule:U.TooltipShowRule.Always,showType:U.TooltipShowType.Standard,custom:null,defaultValue:"n/a",rect:{position:"fixed",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:6,offsetLeft:10,offsetTop:8,offsetRight:10,offsetBottom:8,borderRadius:4,borderSize:1,borderColor:"#f2f3f5",color:"#FEFEFE"},text:{size:11,family:y.family,weight:"normal",color:y.tooltip_color,marginLeft:12,marginTop:12,marginRight:-6,marginBottom:0},icons:[]}},indicator:{ohlc:{upColor:y.up_opacity,downColor:y.down_opacity,noChangeColor:y.up_opacity},bars:[{style:U.PolygonType.Fill,borderStyle:U.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:y.up_opacity,downColor:y.down_opacity,noChangeColor:y.up_opacity}],lines:[{style:U.LineType.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#FF9600"},{style:U.LineType.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#935EBD"},{style:U.LineType.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#2196F3"},{style:U.LineType.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#E11D74"},{style:U.LineType.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#01C5C4"}],circles:[{style:U.PolygonType.Fill,borderStyle:U.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:y.up_opacity,downColor:y.down_opacity,noChangeColor:y.up_opacity}],lastValueMark:{show:!1,text:{show:!1,style:U.PolygonType.Fill,color:"#FFFFFF",size:y.text_size,family:y.family,weight:"normal",borderStyle:U.LineType.Solid,borderSize:1,borderDashedValue:[2,2],paddingLeft:7,paddingTop:3,paddingRight:5,paddingBottom:2,borderRadius:2}},tooltip:{showRule:U.TooltipShowRule.Always,showType:U.TooltipShowType.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:y.family,weight:"normal",color:y.tooltip_color,marginTop:12,marginRight:-6,marginBottom:0,marginLeft:12},icons:[]}},xAxis:{show:!0,size:"auto",axisLine:{show:!0,color:y.scales_line,size:1},tickText:{show:!0,color:y.scales_text,family:y.family,weight:"normal",size:y.text_size,marginStrat:3,marginBottom:6},tickLine:{show:!0,size:1,length:3,color:y.scales_line}},yAxis:{show:!0,size:"auto",position:U.YAxisPosition.Right,type:U.YAxisType.Normal,inside:!1,reverse:!1,axisLine:{show:!0,color:y.scales_line,size:1},tickText:{show:!0,color:y.scales_text,family:y.family,weight:"normal",size:y.text_size,marginStrat:3,marginBottom:6},tickLine:{show:!0,size:1,length:3,color:y.scales_line}},separator:{size:1,color:y.scales_line,fill:!0,activeBackgroundColor:"rgba(230, 230, 230, .15)"},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:U.LineType.Dashed,dashedValue:[6,6],size:1,color:y.cross_line},text:{show:!0,style:U.PolygonType.Fill,color:y.crosshair,size:y.text_size,family:y.family,weight:"normal",borderStyle:U.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:y.crosshair_bg,borderRadius:2,paddingLeft:7,paddingRight:5,paddingTop:3,paddingBottom:2,backgroundColor:y.crosshair_bg}},vertical:{show:!0,line:{show:!0,style:U.LineType.Dashed,dashedValue:[6,6],size:1,color:"#888888"},text:{show:!0,style:U.PolygonType.Fill,color:"#FFFFFF",size:y.text_size,family:"Helvetica Neue",weight:"normal",borderStyle:U.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:y.crosshair_bg,borderRadius:2,paddingLeft:2,paddingRight:2,paddingTop:3,paddingBottom:2,backgroundColor:y.crosshair_bg}}},overlay:{point:{color:"#1677FF",borderColor:"rgba(22, 119, 255, 0.35)",borderSize:1,radius:5,activeColor:"#1677FF",activeBorderColor:"rgba(22, 119, 255, 0.35)",activeBorderSize:3,activeRadius:5},line:{style:U.LineType.Solid,smooth:!1,color:"#1677FF",size:1,dashedValue:[2,2]},rect:{style:U.PolygonType.Fill,color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderRadius:0,borderStyle:U.LineType.Solid,borderDashedValue:[2,2]},polygon:{style:U.PolygonType.Fill,color:"#1677FF",borderColor:"#1677FF",borderSize:1,borderStyle:U.LineType.Solid,borderDashedValue:[2,2]},circle:{style:U.PolygonType.Fill,color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderStyle:U.LineType.Solid,borderDashedValue:[2,2]},arc:{style:U.LineType.Solid,color:"#1677FF",size:1,dashedValue:[2,2]},text:{color:"#1677FF",size:12,family:"Helvetica Neue",weight:"normal"},rectText:{style:U.PolygonType.Fill,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:U.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#1677FF"}}}},Rt={o:"O",h:"H",l:"L",c:"C"},nr={[fe["en-US"]]:Rt,[fe["vi-VN"]]:Rt,[fe["es-ES"]]:Rt,[fe["id-ID"]]:Rt,[fe["zh-CN"]]:{o:"=",h:"=",l:"=",c:"="},[fe["zh-TW"]]:{o:"=",h:"=",l:"=",c:"="},[fe["ja-JP"]]:{o:"",h:"",l:"",c:""},[fe["ru-RU"]]:{o:"",h:"",l:"",c:""},[fe["tr-TR"]]:{o:"A",h:"Y",l:"D",c:"K"},[fe["pt-BR"]]:{o:"Abr",h:"Mx.",l:"Mn.",c:"Fch"},[fe["fr-FR"]]:{o:"O",h:"H",l:"B",c:"C"},[fe["th-TH"]]:{o:"",h:"",l:"",c:""}},rr=m=>{const{data:y,pricePrecision:h,locale:E}=m,T=nr[E],P=Do(y.close,y.open),b=Jn(Qn(P,y.open),100),I=Io(P,0)?m.downColor:m.upColor,B=`${vo(P,0)?"+":""}${ut(P,h,7)}`,M=`(${vo(b,0)?"+":""}${ut(b,2,7)}%)`;return[{title:T.o,value:{text:ut(y.open,h),color:I}},{title:T.h,value:{text:ut(y.high,h),color:I}},{title:T.l,value:{text:ut(y.low,h),color:I}},{title:T.c,value:{text:ut(y.close,h),color:I}},{title:"",value:{text:`${B} ${M}`,color:I}}]},ar=(m,y)=>{if(typeof m=="string"&&!m.length)throw new Error("Dom id ");y.styles||(y.styles=mo((y==null?void 0:y.theme)||wt)),y.locale=fe[y.locale]||Mo;const h=tr.init(m,y);if(!h)return null;h.$updateTooltip=()=>{const{candle:T}=h.getStyles();T.tooltip.custom=({current:P},{bar:b})=>{const I={data:P,pricePrecision:h.getPriceVolumePrecision().price,locale:h.getLocale(),upColor:b.upColor,downColor:b.downColor};return rr(I)},h.setStyles({candle:T})},h.$setTheme=T=>{const P=mo(T);P&&h.setStyles(P)};const E=()=>{const T=new ResizeObserver(()=>{setTimeout(()=>{h.resize()},0)});h.getDom()&&T.observe(h.getDom())};return h.$addDefaultMa=()=>{h.getIndicatorByPaneId("candle_pane","MA")&&h.removeIndicator("candle_pane","MA"),h.createIndicator({name:"MA",calcParams:[10,30,60]},!1,{id:"candle_pane",dragEnabled:!0})},h.$addVol=()=>{h.getIndicatorByPaneId("default_vol","VOL")&&h.removeIndicator("default_vol","VOL"),h.createIndicator({name:"VOL",calcParams:[20],precision:h.getPriceVolumePrecision().volume,figures:[{key:"ma1",title:"",type:"line"},{key:"volume",title:"",type:"bar",baseValue:0,styles({current:T},P,{bars:b}){const{close:I,open:B}=T.kLineData||{close:0,open:0},{upColor:M,downColor:Y}=b[0];return{color:Io(Do(I,B),0)?Y:M}}}]},!1,{id:"default_vol"})},h.$screenshot=()=>{const T=h.getConvertPictureUrl(!0),P=new Image,b=window.open("","_blank");P.src=T,b==null||b.document.write(P.outerHTML),b==null||b.document.close()},h.$setGraph=T=>{const P=h.getStyles();P.candle.type=go.simple_map[T]||go.simple_map[1],h.setStyles(P)},E(),h.$updateTooltip(),h.setLeftMinVisibleBarCount(2),h.setRightMinVisibleBarCount(2),h.setOffsetRightDistance(42),h.setBarSpace(6.2),h.setPaneOptions({id:"candle_pane",gap:{top:.3}}),y.showMa&&h.$addDefaultMa(),y.showVol&&h.$addVol(),h};function di(m,y){const h={...m};for(const E in y)typeof m[E]!="object"||m[E]===null||Array.isArray(m[E])?y[E]!==void 0&&(h[E]=y[E]):h[E]=di(m[E],y[E]);return h}const sr={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},yo=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]');let _o=!1;function lr(){return"CL v26.003 (internal id e793d706 @ 2023-10-05T20:27:44.510Z)"}const ur=class{constructor(m){var y,h;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!m.datafeed)throw new Error("Datafeed is not defined");!((y=m.overrides)===null||y===void 0)&&y["mainSeriesProperties.priceAxisProperties.lockScale"]&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete m.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=di(sr,m),((h=this._options.theme)!==null&&h!==void 0?h:"light").toLowerCase()==="dark"&&this._options.loading_screen===void 0&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(_o||(_o=!0,console.log("Using CL v26.003 (internal id e793d706 @ 2023-10-05T20:27:44.510Z)"))),this._create()}setDebugMode(m){this._innerAPI().setDebugMode(m)}onChartReady(m){this._ready?m.call(this):this._readyHandlers.push(m)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(m){this._doWhenInnerApiLoaded(y=>{y.onGrayedObjectClicked(m)})}onShortcut(m,y){this._doWhenInnerWindowLoaded(h=>{h.createShortcutAction(m,y)})}subscribe(m,y){this._doWhenInnerApiLoaded(h=>{h.subscribe(m,y)})}unsubscribe(m,y){this._doWhenInnerApiLoaded(h=>{h.unsubscribe(m,y)})}chart(m){return this._innerAPI().chart(m)}getLanguage(){return this._options.locale}setSymbol(m,y,h){this._innerAPI().changeSymbol(m,y,h)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(m=>{m.closePopupsAndDialogs()})}selectLineTool(m,y){this._innerAPI().selectLineTool(m,y)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(m){this._innerAPI().saveChart(m)}load(m,y){this._innerAPI().loadChart({json:m,extendedData:y})}getSavedCharts(m){this._innerAPI().getSavedCharts(m)}loadChartFromServer(m){this._innerAPI().loadChartFromServer(m)}saveChartToServer(m,y,h){this._innerAPI().saveChartToServer(m,y,h)}removeChartFromServer(m,y){this._innerAPI().removeChartFromServer(m,y)}onContextMenu(m){this._doWhenInnerApiLoaded(y=>{y.onContextMenu(m)})}createButton(m){return this._innerWindow().createButton(m)}createDropdown(m){return this._innerWindow().createDropdown(m)}showNoticeDialog(m){this._doWhenInnerApiLoaded(y=>{y.showNoticeDialog(m)})}showConfirmDialog(m){this._doWhenInnerApiLoaded(y=>{y.showConfirmDialog(m)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(m){return this._innerAPI().getStudyInputs(m)}getStudyStyles(m){return this._innerAPI().getStudyStyles(m)}addCustomCSSFile(m){this._innerWindow().addCustomCSSFile(m)}applyOverrides(m){this._options=di(this._options,{overrides:m}),this._doWhenInnerWindowLoaded(y=>{y.applyOverrides(m)})}applyStudiesOverrides(m){this._doWhenInnerWindowLoaded(y=>{y.applyStudiesOverrides(m)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}activeChartIndex(){return this._innerAPI().activeChartIndex()}setActiveChart(m){return this._innerAPI().setActiveChart(m)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(m){this._innerAPI().setLayout(m)}layoutName(){return this._innerAPI().layoutName()}changeTheme(m,y){return this._innerWindow().changeTheme(m,y)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(m=>{m.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(m){this._innerAPI().drawOnAllCharts(m)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(m){this._innerAPI().setIntervalLinkingEnabled(m)}setDateRangeLinkingEnabled(m){this._innerAPI().setDateRangeLinkingEnabled(m)}setTimeFrame(m){this._innerAPI().setTimeFrame(m)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(m,y){this._innerAPI().setFeatureEnabled(m,y)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(m){return this._innerAPI().takeClientScreenshot(m)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}watermark(){return this._innerAPI().watermark()}customSymbolStatus(){return this._innerWindow().customSymbolStatus()}setCSSCustomProperty(m,y){if(m.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");this._innerWindow().document.body.style.setProperty(m,y)}getCSSCustomPropertyValue(m){if(m.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");const y=this._innerWindow().document.body;return y.style.getPropertyValue(m)||getComputedStyle(y).getPropertyValue(m)}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(m){this._ready?m(this._innerWindow()):this._innerWindowLoaded.then(()=>{m(this._innerWindow())})}_doWhenInnerApiLoaded(m){this._doWhenInnerWindowLoaded(y=>{y.doWhenApiIsReady(()=>m(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",cr&&setTimeout(()=>{this._iFrame.style.height=window.innerHeight+"px"},30))}_create(){var m,y;const h=(y=(m=this._options.enabled_features)===null||m===void 0?void 0:m.includes("iframe_loading_compatibility_mode"))!==null&&y!==void 0&&y,[E,T]=this._render(!h),P=this._options.container,b=typeof P=="string"?document.getElementById(P):P;if(b===null)throw new Error(`There is no such element - #${this._options.container}`);b.innerHTML=E,this._iFrame=b.querySelector(`#${this._id}`);const I=this._iFrame;h&&(I.contentWindow?(I.contentWindow.document.open(),I.contentWindow.document.write(T),I.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(I.style.width="100%",this._options.fullscreen||(I.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(B=>{const M=()=>{I.removeEventListener("load",M,!1),B()};I.addEventListener("load",M,!1)}),this._innerWindowLoaded.then(()=>{try{this._innerWindow().widgetReady(()=>{this._ready=!0;for(const B of this._readyHandlers)try{B.call(this)}catch(M){console.error(M)}this._innerWindow().initializationFinished()})}catch(B){if(B instanceof Error&&/widgetReady is not a function/.test(B.message))throw new Error(`There was an error when loading the library. Usually this error means the library failed to load its static files. Check that the library files are available at ${window.location.host}/${this._options.library_path||""} or correct the library_path option.`)}})}_render(m){const y=window;if(y[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,rss_news_title:this._options.rss_news_title,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones},this._options.saved_data)y[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(y[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){const P=encodeURIComponent(this._options.locale);yo.findIndex(b=>b.language===P)>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}const h=function(P,b){var I;const B=new URL(`${P||""}`,location.href).href,M=JSON.parse('["bundles/runtime.0809a655c13b333b6a76.js","bundles/__LANG__.5008.e5d7d914577969582fa4.js","bundles/3515.2f722d33cebe31a154b1.css","bundles/9401.4792ed983286dcafa79b.js","bundles/library.847f247511d3f9997d72.js"]'),Y=encodeURIComponent(b),W=(I=yo.find(se=>se.language===Y))!==null&&I!==void 0?I:{iso:"en",dir:"ltr"},Q=`lang="${W.iso}" dir="${W.dir}"`;return`<!DOCTYPE html><html ${(oe={bundles:`
${function(se,Tt,dt){if(se===void 0)return"";const qe=[],Ne=[];for(const Ue of se)Ue.endsWith(".js")?qe.push(`<script defer crossorigin="anonymous" src="${Ue.replace("__LANG__",dt)}"><\/script>`):Ue.endsWith(".css")&&Ne.push(`<link type="text/css" href="${Tt?Ue.replace(/\.css$/i,".rtl.css"):Ue}" rel="stylesheet"/>`);return[...qe,...Ne].join(`
`)}(M,W.dir==="rtl",Y)}
`,localeLanguage:Y,htmlAttrs:Q,libraryPath:B}).htmlAttrs}><head><base href="${oe.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${oe.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]<\/script><script>(function() {
		window.urlParams = (function () {
			var match,
				pl	 = /\\+/g,  // Regex for replacing addition symbol with a space
				search = /([^&=]+)=?([^&]*)/g,
				decode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },
				query = function() {
					// We don't use hash on the url because: safari 13 throws an error if you attempt this
					// on a blob, and safari 14 will strip hash from blob urls.
					if (frameElement && frameElement.dataset.widgetOptions) {
						return frameElement.dataset.widgetOptions;
					} else {
						throw "Unexpected use of this page";
					}
				}(),
				result = {};

			while (match = search.exec(query)) {
				result[decode(match[1])] = decode(match[2]);
			}

			var additionalSettingsObject = window.parent[result.uid];

			var customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];

			for (var p in additionalSettingsObject) {
				if (customObjectNames.indexOf(p) === -1) {
					result[p] = JSON.stringify(additionalSettingsObject[p]);
				}
			}

			return result;
		})();

		window.locale = urlParams.locale;
		window.language = urlParams.locale; // a very big attention needed here
		window.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;

		window.addCustomCSSFile = function(href) {
			var link = document.createElement('link');
			link.setAttribute('type', 'text/css');
			link.setAttribute('rel', 'stylesheet');
			link.setAttribute('href', href);
			link.setAttribute('cross-origin', 'anonymous');

			window.loadedCustomCss = new Promise((resolve) => {
				link.onload = resolve;
				link.onerror = resolve;
			});
			document.body.appendChild(link);
		};

		window.loadedCustomCss = Promise.resolve();
		if (!!urlParams.customCSS) {
			window.addCustomCSSFile(urlParams.customCSS);
		}

		var loadingScreenParams = {};

		if (typeof urlParams.loading_screen === 'string') {
			try {
				loadingScreenParams = JSON.parse(urlParams.loading_screen);
			} catch(e) {}
		}

		var loadingIndicatorElement = document.getElementById('loading-indicator');

		if (loadingScreenParams.backgroundColor) {
			loadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;
		}

		!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var i,s,o,r,l,c=(void 0===l&&(l=""),i='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),o=function(n,i){var s,o;return s=null==i?document.documentElement:i.nodeType===t.Document?i.documentElement:i,e&&(o=e.get(s)),o||((o=s.ownerDocument.createRange()).selectNodeContents(s),e&&e.set(s,o)),o.createContextualFragment(n)}(i,s),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&e._el.style.setProperty(n,i)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();


		var spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;

		var loadingSpinner = new Spinner('large').setStyle({
			'--tv-spinner-color': spinnerColor,
			zIndex: String(2e9),
		});
		loadingSpinner.getEl().classList.add('spinner');
		loadingSpinner.spin(loadingIndicatorElement);
	})();<\/script></body></html>`;var oe}(this._options.library_path||"",this._options.locale);let E=new URL("about:blank");if(m){const P=new Blob([h],{type:"text/html"}),b=URL.createObjectURL(P);E=new URL(b)}const T="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return[`<iframe
		id="${this._id}" name="${this._id}" src="${E.href}" data-widget-options="${T}"
		${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;opacity:0">
	</iframe>`,h]}};typeof window<"u"&&(window.TradingView=window.TradingView||{},window.TradingView.version=lr);const cr=!(typeof window>"u"||!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS"),hr={supported_resolutions:or,supports_marks:!0,supports_time:!0,supports_timescale_marks:!0,supports_search:!0,reset_cache_timeout:.001},dr={onReady:m=>{setTimeout(()=>m(hr))},searchSymbols:()=>{},resolveSymbol:(m,y)=>{const h={name:m,ticker:m,description:m,exchange:"Example Exchange",listed_exchange:"Example Exchange",type:"crypto",session:"24x7",timezone:"Etc/UTC",minmov:1,minmove2:0,pricescale:1e8,has_seconds:!0,has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,volume_precision:4,visible_plots_set:"ohlcv"};setTimeout(()=>{y(h)})},getBars:()=>{},subscribeBars:()=>{},unsubscribeBars:()=>{}},ai=m=>{const y=localStorage.getItem(m);let h=null;try{h=y?JSON.parse(y):null}catch{localStorage.removeItem(m),h=null}return h},si=(m,y)=>{localStorage.setItem(m,JSON.stringify(y))},xo=m=>{localStorage.removeItem(m)},Fo=(m=wt)=>{const y=Ot[m];return{volumePaneSize:"medium","scalesProperties.fontSize":10,"scalesProperties.lineColor":y.scales_line,"scalesProperties.textColor":y.scales_text,"scalesProperties.crosshairLabelBgColorLight":y.crosshair_bg,"scalesProperties.crosshairLabelBgColorDark":y.crosshair_bg,"paneProperties.background":y.background,"paneProperties.backgroundType":"solid","paneProperties.vertGridProperties.style":1,"paneProperties.horzGridProperties.style":1,"paneProperties.vertGridProperties.color":y.grid,"paneProperties.horzGridProperties.color":y.grid,"paneProperties.crossHairProperties.color":y.cross_line,"mainSeriesProperties.candleStyle.upColor":y.up,"mainSeriesProperties.candleStyle.downColor":y.down,"mainSeriesProperties.candleStyle.borderUpColor":y.up,"mainSeriesProperties.candleStyle.borderDownColor":y.down,"mainSeriesProperties.candleStyle.wickUpColor":y.up,"mainSeriesProperties.candleStyle.wickDownColor":y.down,"mainSeriesProperties.hollowCandleStyle.upColor":y.up,"mainSeriesProperties.hollowCandleStyle.downColor":y.down,"mainSeriesProperties.hollowCandleStyle.borderUpColor":y.up,"mainSeriesProperties.hollowCandleStyle.borderDownColor":y.down,"mainSeriesProperties.hollowCandleStyle.wickUpColor":y.up,"mainSeriesProperties.hollowCandleStyle.wickDownColor":y.down,"mainSeriesProperties.haStyle.upColor":y.up,"mainSeriesProperties.haStyle.downColor":y.down,"mainSeriesProperties.haStyle.borderUpColor":y.up,"mainSeriesProperties.haStyle.borderDownColor":y.down,"mainSeriesProperties.haStyle.wickUpColor":y.up,"mainSeriesProperties.haStyle.wickDownColor":y.down,"mainSeriesProperties.barStyle.upColor":y.up,"mainSeriesProperties.barStyle.downColor":y.down,"mainSeriesProperties.baselineStyle.topFillColor1":"rgba(21, 187, 122, 0.1)","mainSeriesProperties.baselineStyle.topFillColor2":"rgba(21, 187, 122, 0.1)","mainSeriesProperties.baselineStyle.bottomFillColor1":"rgba(210, 51, 77, 0.1)","mainSeriesProperties.baselineStyle.bottomFillColor2":"rgba(210, 51, 77, 0.1)","mainSeriesProperties.baselineStyle.topLineColor":y.up,"mainSeriesProperties.baselineStyle.bottomLineColor":y.down,"mainSeriesProperties.columnStyle.upColor":y.up,"mainSeriesProperties.columnStyle.downColor":y.down,"mainSeriesProperties.lineStyle.color":y.up,"mainSeriesProperties.lineWithMarkersStyle.color":y.up,"mainSeriesProperties.highLowAvgPrice.highLowPriceLabelsVisible":!0}},pr=(m,y)=>{var B;if(typeof m=="string"&&!m.length)throw new Error("Dom id ");const h={...y},E=y.store_key||ir;["locale","datafeed","store_key"].forEach(M=>{delete h[M]});const T=Ot[y.theme||wt],P=ai(E),b={container:m,locale:hi[y.locale]||hi[Mo],datafeed:Object.assign(dr,y.datafeed||{}),autosize:!0,time_frames:[],timezone:"Etc/UTC",theme:wt,custom_css_url:y.custom_css_url||"theme.css",custom_font_family:T.family,overrides:Fo(y.theme||wt),header_widget_buttons_mode:"compact",enabled_features:["hide_left_toolbar_by_default","move_logo_to_main_pane","chart_crosshair_menu"],disabled_features:["header_symbol_search","header_compare","symbol_search_hot_key","volume_force_overlay","display_market_status","header_widget"],studies_overrides:{"volume.volume.color.0":T.down,"volume.volume.color.1":T.up,"volume.volume ma.color":"#f7a600"},auto_save_delay:.05,settings_adapter:{initialSettings:{...P},setValue(M,Y){const W=ai(E)||{};["chartproperties","chartproperties.mainSeriesProperties"].includes(M)||(W[M]=Y),si(E,W)},removeValue(M){const Y=ai(E)||{};Object.hasOwn(Y,M)&&delete Y[M],si(E,Y)}},...h};P||(xo("tradingview.chartproperties.mainSeriesProperties"),xo("tradingview.chartproperties")),P!=null&&P.layout&&((B=P.charts)!=null&&B.length)&&(b.saved_data=P);const I=new ur(b);return I.$addDefaultMa=()=>{const M=I.activeChart();[10,30,60].forEach(Y=>{M.createStudy("Moving Average",!1,!1,{length:Y},{showLabelsOnPriceScale:!1})})},I.onChartReady(()=>{y.showMa&&!P&&I.$addDefaultMa(),I.subscribe("onAutoSaveNeeded",()=>{I.save(M=>{si(E,M)})}),I.subscribe("onPlusClick",M=>{typeof y.onPlusClick=="function"&&(y==null||y.onPlusClick(M))})}),I};var _e=(m=>(m["en-US"]="en-US",m["zh-CN"]="zh-CN",m["zh-TW"]="zh-TW",m["ja-JP"]="ja-JP",m["vi-VN"]="vi-VN",m["es-ES"]="es-ES",m["ru-RU"]="ru-RU",m["tr-TR"]="tr-TR",m["pt-BR"]="pt-BR",m["fr-FR"]="fr-FR",m["th-TH"]="th-TH",m["id-ID"]="id-ID",m))(_e||{});const vr="dark",ko="en-US",gr="kline_chart",fr=["1","3","5","15","30","60","120","240","360","720","1D","3D","1W","1M"],mr=["1","15","60","240","1D","1W"],Co={tv:[0,1,2,3,8,9,10,12,13,14,15,16],simple:[0,1,3,9],simple_map:{0:"ohlc",1:"candle_solid",3:"area",9:"candle_up_stroke"}},J={loading:{type:Boolean,default:!0},theme:{type:String,default:vr},lang:{type:String,default:ko},storeKey:{type:String,default:gr},watermark:{type:String,defatult:""},exchange:{type:String,default:""},type:{type:String,default:"simple"},types:{type:Array,default:()=>["simple","tv"]},libraryPath:{type:String,default:""},customCssUrl:{type:String,default:"theme.css"},showMa:{type:Boolean,default:!0},showVol:{type:Boolean,default:!0},limitSize:{type:Number,default:1e3},pricePrecision:{type:Number,default:4},quantityPrecision:{type:Number,default:4},symbol:{type:String,default:""},interval:{type:String,default:""},intervals:{type:Array,default:()=>fr},list:{type:Array,default:()=>[]},latestData:{type:Object,default:()=>null},loadMore:{type:Function,default:()=>{}},fullscreen:{type:Boolean,default:!1},graph:{type:Number,default:1},onPlusClick:{type:Function,default:()=>{}}},Nt=m=>{if(m==="menu")return{loading:J.loading,theme:J.theme,lang:J.lang,storeKey:J.storeKey,interval:J.interval,intervals:J.intervals,type:J.type,fullscreen:J.fullscreen,graph:J.graph};if(m==="simple")return{loading:J.loading,theme:J.theme,lang:J.lang,storeKey:J.storeKey,showMa:J.showMa,showVol:J.showVol,limitSize:J.limitSize,pricePrecision:J.pricePrecision,quantityPrecision:J.quantityPrecision,watermark:J.watermark,list:J.list,latestData:J.latestData,loadMore:J.loadMore,graph:J.graph};if(m==="tv"){const y={...J};return["type","types","intervals","fullscreen"].forEach(h=>{delete y[h]}),y}return J},yr=Gn('<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-d1064367><g stroke="currentColor" data-v-d1064367><circle cx="12" cy="12" r="9.5" fill="none" stroke-linecap="round" stroke-width="3" data-v-d1064367><animate attributeName="stroke-dasharray" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0 150;42 150;42 150;42 150" data-v-d1064367></animate><animate attributeName="stroke-dashoffset" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0;-16;-59;-59" data-v-d1064367></animate></circle><animateTransform attributeName="transform" dur="2s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12" data-v-d1064367></animateTransform></g></svg>',1),_r=[yr],xr=Fe({__name:"Loading",props:{theme:{type:String,default:"dark"}},setup(m){return(y,h)=>(G(),te("div",{class:ot(["loading",[`is-${m.theme}`]])},_r,2))}});const Ao=Ye(xr,[["__scopeId","data-v-d1064367"]]),Cr=["innerHTML"],Sr=Fe({__name:"Watermark",props:{text:{type:String,defatult:""}},setup(m){return(y,h)=>(G(),te("div",{class:"chart-watermark",innerHTML:m.text},null,8,Cr))}});const Lo=Ye(Sr,[["__scopeId","data-v-c1b53f04"]]),wr=Fe({inheritAttrs:!1,__name:"Simple",props:Nt("simple"),setup(m,{expose:y}){const h=m,E=bt({el:null,chart:null}),T={applyNewData(P){var b;(b=E.chart)==null||b.applyNewData(P,h.list.length>=h.limitSize)},applyMoreData(P){var b;(b=E.chart)==null||b.applyMoreData(P,P.length>=h.limitSize)},loadMore(P){h.loadMore(P,T.applyMoreData)},setPrecision(){var P,b;(P=E.chart)==null||P.setPriceVolumePrecision(h.pricePrecision,h.quantityPrecision),(b=E.chart)==null||b.$updateTooltip()},setGraph(P){var b;(b=E.chart)==null||b.$setGraph(P)}};return Et(()=>{var b;const P={theme:h.theme,showMa:h.showMa,showVol:h.showVol,locale:h.lang};E.chart=ar(E.el,P),T.setPrecision(),T.setGraph(h.graph),h.list.length&&T.applyNewData(h.list),(b=E.chart)==null||b.loadMore(T.loadMore)}),ue(()=>h.latestData,P=>{var b;P&&((b=E.chart)==null||b.updateData(P))}),ue(()=>h.list,(P,b)=>{!P.length&&!b||T.applyNewData(P)},{immediate:!0}),ue(()=>h.lang,P=>{var b;P&&((b=E.chart)==null||b.setLocale(h.lang))}),ue(()=>h.theme,P=>{var b;P&&((b=E.chart)==null||b.$setTheme(P))}),ue(()=>h.pricePrecision,()=>{T.setPrecision()}),ue(()=>h.quantityPrecision,()=>{T.setPrecision()}),ue(()=>h.graph,P=>{T.setGraph(P)}),y({chart:To(E,"chart")}),(P,b)=>(G(),te("section",{ref:I=>E.el=I,class:"simple-chart"},[h.loading?(G(),Oe(Ao,{key:0})):Me("",!0),h.watermark?(G(),Oe(Lo,{key:1,text:h.watermark},null,8,["text"])):Me("",!0)],512))}});const br=Ye(wr,[["__scopeId","data-v-4fc4d524"]]),Er={class:"tv-chart"},Tr=Fe({inheritAttrs:!1,__name:"Tv",props:Nt("tv"),setup(m,{expose:y}){const h=m,E=bt({el:null,chart:null,chart_ready:!1,chart_loading:!0,active_chart:void 0,mounted:!1,get_bar_times:1,loading:!1}),T=()=>h.interval&&h.symbol&&E.mounted,P={init(){E.chart=pr(E.el,{symbol:h.symbol,interval:h.interval,locale:h.lang,library_path:h.libraryPath,showMa:h.showMa,theme:h.theme,custom_css_url:h.customCssUrl,datafeed:{searchSymbols(b,I,B,M){M([{symbol:h.symbol,full_name:`${h.exchange}:${h.symbol}`,description:"",exchange:h.exchange,type:"crypto"}])},resolveSymbol(b,I){E.chart._iFrame.style.opacity==="0"&&(E.chart._iFrame.style.opacity="1",E.chart_loading=!1);const B={name:b,ticker:b,description:b,exchange:h.exchange,listed_exchange:h.exchange,type:"crypto",session:"24x7",timezone:"Etc/UTC",minmov:1,minmove2:0,pricescale:10**h.pricePrecision,has_seconds:!0,has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,volume_precision:h.quantityPrecision,visible_plots_set:h.showVol?"ohlcv":"ohlc"};setTimeout(()=>{I(B)})},getBars:(b,I,B,M)=>{var Y;if(B.firstDataRequest){E.loading=!0,E.get_bar_times=1;const W=`${h.symbol}_${h.interval}`===((Y=h.list[0])==null?void 0:Y.id);!h.loading&&(!h.list.length||W)?M(h.list):P.onResult=M}else E.get_bar_times+=1,E.get_bar_times===2&&h.list.length<h.limitSize?M([],{noData:!0}):h.loadMore(h.list[0].time,W=>{var Q;(!W.length||`${h.symbol}_${h.interval}`===((Q=W[0])==null?void 0:Q.id))&&M(W,{noData:W.length<h.limitSize})})},subscribeBars(b,I,B,M,Y){E.loading=!1,P.onTick=B,P.onResetCache=Y,h.latestData&&B(h.latestData)}},onPlusClick:h.onPlusClick}),E.chart.onChartReady(()=>{var I,B,M,Y,W,Q;E.chart_ready=!0,E.active_chart=(I=E.chart)==null?void 0:I.activeChart(),P.changeTheme(),((B=E.active_chart)==null?void 0:B.chartType())!==h.graph&&((M=E.active_chart)==null||M.setChartType(h.graph)),((Y=E.active_chart)==null?void 0:Y.resolution())!==h.interval&&((W=E.active_chart)==null||W.setResolution(h.interval));const b=(Q=E.active_chart)==null?void 0:Q.getTimeScale();b==null||b.setRightOffset(7)})},onResult(b,I){},onTick(b){},onResetCache(){},reset(){P.onResult=()=>{},P.onTick=()=>{}},changeTheme(){var b;E.chart_ready&&((b=E.chart)==null||b.changeTheme(h.theme).then(()=>{var I;(I=E.chart)==null||I.applyOverrides(Fo(h.theme))}))}};return Et(()=>{E.mounted=!0}),ue(T,b=>{b&&P.init()}),ue([()=>h.symbol,()=>!E.loading],([b,I])=>{var B;E.chart_ready&&b&&I&&(P.reset(),(B=E.chart)==null||B.activeChart().setSymbol(b))}),ue([()=>h.interval,()=>!E.loading],([b,I])=>{var B;E.chart_ready&&b&&I&&(P.reset(),(B=E.chart)==null||B.activeChart().setResolution(b))}),ue(()=>h.list,(b,I)=>{!b.length&&!I||(P.onResult(b),P.onResult=()=>{})},{immediate:!0}),ue(()=>h.latestData,b=>{b&&P.onTick(b)}),ue(()=>h.lang,b=>{var I;b&&E.chart_ready&&((I=E.chart)==null||I.remove(),P.init(),E.chart_ready=!1,E.chart_loading=!0,E.active_chart=void 0)}),ue(()=>h.theme,b=>{b&&P.changeTheme()}),ue(()=>h.exchange,b=>{var I;b&&(P.onResetCache(),(I=E.active_chart)==null||I.resetData(),P.reset())}),ue(()=>h.graph,b=>{var I;(I=E.active_chart)==null||I.setChartType(b,()=>{})}),y({chart:To(E,"chart")}),(b,I)=>(G(),te("section",Er,[Ee("div",{ref:B=>E.el=B,class:"tv-body"},null,512),h.loading||E.chart_loading?(G(),Oe(Ao,{key:0})):Me("",!0),h.watermark?(G(),Oe(Lo,{key:1,text:h.watermark},null,8,["text"])):Me("",!0)]))}});const Ir=Ye(Tr,[["__scopeId","data-v-f8198e4b"]]),Dr=m=>{const y=localStorage.getItem(m);let h=null;try{h=y?JSON.parse(y):null}catch{localStorage.removeItem(m),h=null}return h},Pr=(m,y)=>{localStorage.setItem(m,JSON.stringify(y))},xe={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},So=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],wo=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],bo=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],me=typeof window<"u"&&typeof window.document<"u"?window.document:{},be="fullscreenEnabled"in me&&Object.keys(xe)||So[0]in me&&So||wo[0]in me&&wo||bo[0]in me&&bo||[],St={requestFullscreen:m=>m[be[xe.requestFullscreen]](),requestFullscreenFunction:m=>m[be[xe.requestFullscreen]],get exitFullscreen(){return me[be[xe.exitFullscreen]].bind(me)},get fullscreenPseudoClass(){return`:${be[xe.fullscreen]}`},addEventListener:(m,y,h)=>me.addEventListener(be[xe[m]],y,h),removeEventListener:(m,y,h)=>me.removeEventListener(be[xe[m]],y,h),get fullscreenEnabled(){return!!me[be[xe.fullscreenEnabled]]},get fullscreenElement(){return me[be[xe.fullscreenElement]]},get onfullscreenchange(){return me[`on${be[xe.fullscreenchange]}`.toLowerCase()]},set onfullscreenchange(m){me[`on${be[xe.fullscreenchange]}`.toLowerCase()]=m},get onfullscreenerror(){return me[`on${be[xe.fullscreenerror]}`.toLowerCase()]},set onfullscreenerror(m){me[`on${be[xe.fullscreenerror]}`.toLowerCase()]=m}},We={indicator:"Indicators",select_interval:"Select Intervals",edit:"Edit",save:"Save",type:{0:"Bars",1:"Candles",2:"Line",3:"Area",8:"Heikin Ashi",9:"Hollow candles",10:"BaseLine",12:"High-low",13:"Columns",14:"Line with markers",15:"Step line",16:"HLC area"},timezone:{utc:"UTC","-10":"Honolulu","-9":"Juneau","-8":"Los Angeles","-7":"Phoenix","-6":"Mexico City","-5":"New York","-4":"Caracas","-3":"Sao Paulo","+0":"London","+1":"Paris","+2":"Cairo","+3":"Moscow","+3:30":"Tehran","+4":"Dubai","+5":"Ashkhabad","+5:30":"Kolkata","+6":"Almaty","+7":"Bangkok","+8":"Shanghai","+9":"Tokyo","+10":"Brisbane","+10:30":"Adelaide","+11":"Sydney","+12":"Norfolk Island","+13":"New Zealand","+13:45":"Chatham Islands"}},Vt={[_e["en-US"]]:We,[_e["zh-CN"]]:{indicator:"",select_interval:"",edit:"",save:"",type:{0:"",1:"K",2:"",3:"",8:"K",9:"K",10:"",12:"-",13:"",14:"",15:"",16:"HLC "},timezone:{utc:"","-10":"","-9":"","-8":"","-7":"","-6":"","-5":"","-4":"","-3":"","+0":"","+1":"","+2":"","+3":"","+3:30":"","+4":"","+5":"","+5:30":"","+6":"","+7":"","+8":"","+9":"","+10":"","+10:30":"","+11":"","+12":"","+13":"","+13:45":""}},[_e["zh-TW"]]:{indicator:"",select_interval:"",edit:"",save:"",type:{0:"",1:"K",2:"",3:"",8:"K",9:"K",10:"",12:"-",13:"",14:"",15:"",16:"HLC"},timezone:{utc:"","-10":"","-9":"","-8":"","-7":"","-6":"","-5":"","-4":"","-3":"","+0":"","+1":"","+2":"","+3":"","+3:30":"","+4":"","+5":"","+5:30":"","+6":"","+7":"","+8":"","+9":"","+10":"","+10:30":"","+11":"","+12":"","+13":"","+13:45":""}},[_e["ja-JP"]]:{indicator:"",select_interval:"",edit:"",save:"",type:{0:"",1:"",2:"",3:"",8:"",9:"",10:"",12:"",13:"",14:"",15:"",16:"HLC"},timezone:We.timezone},[_e["vi-VN"]]:{indicator:"Cc ch bo",select_interval:"Chn khong thi gian",edit:"Chnh sa",save:"lu",type:{0:"Hnh Thanh",1:"Biu  nn",2:"ng thng",3:"Biu  vng",8:"M hnh Heikin Ashi",9:"Biu  nn Hollow",10:"ng c s",12:"nh-y",13:"Cc ct",14:"Biu  ng c im nh du",15:"Biu  ng bc",16:"Vng HLC"},timezone:We.timezone},[_e["es-ES"]]:{indicator:"Indicadores",select_interval:"Seleccionar perodo",edit:"Editar",save:"guardar",type:{0:"Barras",1:"Velas",2:"Lnea",3:"rea",8:"Heikin Ashi",9:"Velas huecas",10:"Lnea de referencia",12:"Mximo-mnimo",13:"Columnas",14:"Lnea con marcadores",15:"Lnea de pasos",16:"rea HLC"},timezone:We.timezone},[_e["ru-RU"]]:{indicator:"",select_interval:" ",edit:"",save:"C",type:{0:"",1:" ",2:"",3:"",8:" ",9:" ",10:" ",12:"-",13:"",14:"  ",15:" ",16:" HLC"},timezone:We.timezone},[_e["tr-TR"]]:{indicator:"Gstergeler",select_interval:"Dnem se",edit:"Dzenle",save:"Kaydet",type:{0:"ubuk Grafikler",1:"Mum Grafikler",2:"izgi",3:"Alan",8:"Heikin Ashi",9:"i Bo Mumlar",10:"Temel izgi",12:"Yksek-dk",13:"Stunlar",14:"aretli izgi",15:"Adm izgisi",16:"HLC alan"},timezone:We.timezone},[_e["pt-BR"]]:{indicator:"Indicadores",select_interval:"Selecionar perodo",edit:"Editar",save:"Salvar",type:{0:"Barras",1:"Velas",2:"Linha",3:"rea",8:"Heiken Ashi",9:"Candles Vazios",10:"Linha Base",12:"Mxima-Mnima",13:"Colunas",14:"Linha com marcadores",15:"Degrau",16:"rea HLC"},timezone:We.timezone},[_e["fr-FR"]]:{indicator:"Indicateurs",select_interval:"Slectionner la priode",edit:"Modifier",save:"enregistrer",type:{0:"Barres",1:"Bougies",2:"Droite",3:"Rgion",8:"Heikin Ashi",9:"Bougies Creuses",10:"Ligne de base",12:"Haut-Bas",13:"Colonnes",14:"Ligne avec marqueurs",15:"Ligne en escalier",16:"Zone HLC"},timezone:We.timezone},[_e["th-TH"]]:{indicator:"",select_interval:"",edit:"",save:"",type:{0:"",1:"",2:"",3:"",8:" ",9:"",10:"",12:"-",13:"",14:"",15:"",16:"HLC area"},timezone:We.timezone},[_e["id-ID"]]:{indicator:"Indikator",select_interval:"Pilih periode",edit:"Sunting",save:"simpan",type:{0:"Bar",1:"Candle",2:"Garis",3:"Area",8:"Heikin Ashi",9:"Candle Kosong",10:"Garis dasar",12:"Tertinggi-Terendah",13:"Kolom-Kolom",14:"Garis dengan penanda",15:"Garis tahap",16:"Area HLC"},timezone:We.timezone}},Mr=["width","height","innerHTML"],Xe=Fe({__name:"SvgIcon",props:{icon:{type:String,default:"",required:!0},width:{type:String,default:"16"},height:{type:String,default:"16"}},setup(m){const y={0:'<path fill="currentColor" d="M22.667 2.667c0.736 0 1.333 0.597 1.333 1.333v14.667h2.667c0.736 0 1.333 0.597 1.333 1.333s-0.597 1.333-1.333 1.333v0h-2.667v4c0 0 0 0 0 0 0 0.736-0.597 1.333-1.333 1.333s-1.333-0.597-1.333-1.333c0-0 0-0 0-0v0-14.667h-2.667c-0 0-0 0-0 0-0.736 0-1.333-0.597-1.333-1.333s0.597-1.333 1.333-1.333c0 0 0 0 0 0h2.667v-4c0-0.736 0.597-1.333 1.333-1.333v0zM9.333 5.333c-0.736 0-1.333 0.597-1.333 1.333v0 16h-2.667c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333v0h2.667v2.667c0 0 0 0 0 0 0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333c0-0 0-0 0-0v0-13.333h2.667c0 0 0 0 0 0 0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333c-0 0-0 0-0 0h-2.667v-5.333c0-0.736-0.597-1.333-1.333-1.333v0z" />',1:'<path fill="currentColor" d="M11.333 4c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 10.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-10.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM10.667 22.667h-1.333c-0.736 0-1.333-0.597-1.333-1.333v0-10.667c0-0.736 0.597-1.333 1.333-1.333h1.333c0.736 0 1.333 0.597 1.333 1.333v0 10.667c0 0.736-0.597 1.333-1.333 1.333v0zM23.333 6.667c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 6.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-6.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM22.667 21.333h-1.333c-0.736 0-1.333-0.597-1.333-1.333v0-6.667c0-0.736 0.597-1.333 1.333-1.333v0h1.333c0.736 0 1.333 0.597 1.333 1.333v0 6.667c0 0.736-0.597 1.333-1.333 1.333v0z" />',2:'<path fill="currentColor" d="M28.885 9.671c0.275 0.245 0.447 0.601 0.447 0.996 0 0.34-0.128 0.651-0.337 0.887l0.001-0.001-5.333 6c-0.245 0.275-0.6 0.448-0.996 0.448h-4.115l-5.609 5.609c-0.241 0.241-0.574 0.39-0.943 0.39-0.411 0-0.778-0.186-1.022-0.477l-0.002-0.002-2.4-2.879-3.633 3.635c-0.24 0.232-0.566 0.374-0.926 0.374-0.736 0-1.333-0.597-1.333-1.333 0-0.36 0.143-0.687 0.375-0.927l4.666-4.666c0.241-0.241 0.574-0.39 0.943-0.39 0.411 0 0.778 0.186 1.022 0.477l0.002 0.002 2.4 2.879 4.967-4.968c0.241-0.241 0.575-0.391 0.943-0.391h4.067l4.937-5.552c0.245-0.275 0.601-0.447 0.996-0.447 0.34 0 0.651 0.128 0.887 0.337l-0.001-0.001z" />',3:'<path fill="currentColor" d="M25.196 5.123c0.246-0.28 0.604-0.456 1.004-0.456 0.737 0 1.334 0.597 1.334 1.334 0 0.337-0.125 0.645-0.331 0.88l-4.199 4.798c-0.246 0.279-0.604 0.455-1.003 0.455-0 0-0.001 0-0.001 0h-3l-4.404 4.952c-0.245 0.275-0.601 0.447-0.996 0.447-0.325 0-0.624-0.117-0.855-0.31l0.002 0.002-2.667-2.22-3.939 3.939c-0.24 0.232-0.566 0.374-0.926 0.374-0.736 0-1.333-0.597-1.333-1.333 0-0.36 0.143-0.687 0.375-0.927l4.8-4.8c0.241-0.241 0.575-0.39 0.943-0.39 0.326 0 0.624 0.117 0.856 0.311l-0.002-0.002 2.608 2.173 3.943-4.435c0.245-0.275 0.601-0.448 0.997-0.448 0 0 0 0 0 0h2.995l3.801-4.344zM25.772 10.351c0.246-0.297 0.615-0.484 1.028-0.484 0.736 0 1.333 0.597 1.333 1.333 0 0 0 0 0 0v0 14.4c0 0.736-0.597 1.333-1.333 1.333v0h-21.6c-0.736 0-1.333-0.597-1.333-1.333v0-2.52c0-0 0-0 0-0.001 0-0.397 0.174-0.754 0.449-0.998l0.001-0.001 5.237-4.62c0.234-0.207 0.543-0.333 0.881-0.333 0.37 0 0.705 0.151 0.946 0.394l2.327 2.345 5.599-5.645c0.242-0.244 0.577-0.395 0.947-0.395h2.645l2.872-3.476zM25.467 14.907l-0.912 1.103c-0.246 0.296-0.614 0.484-1.027 0.484h-0.040l1.979 2.32v-3.907zM18.931 18.388l4.745 5.88h1.791v-1.349l-5.103-5.976-1.433 1.445zM15.613 21.735l2.011 2.412c0.032 0.039 0.063 0.080 0.089 0.12h2.536l-3.208-3.973-1.427 1.44zM9.244 21.291l2.38 2.856c0.033 0.039 0.063 0.080 0.089 0.12h2.54l-1.067-1.28c-0.165-0.071-0.306-0.169-0.424-0.288l-0-0-2.387-2.407-1.132 0.999zM6.533 23.68v0.587h1.72l-1.009-1.213-0.711 0.627z" />',8:'<path fill="currentColor" d="M22 2.667c0.736 0 1.333 0.597 1.333 1.333v2.721c1.904 0.331 3.333 1.97 3.333 3.944 0 0 0 0.001 0 0.001v-0 6.667c0 2.209-1.791 4-4 4v0h-1.333c-2.209 0-4-1.791-4-4v0-6.667c0-0 0-0.001 0-0.001 0-1.974 1.429-3.613 3.309-3.941l0.024-0.003v-2.721c0-0.736 0.597-1.333 1.333-1.333v0zM22.667 9.333h-1.333c-0.736 0-1.333 0.597-1.333 1.333v0 6.667c0 0.736 0.597 1.333 1.333 1.333v0h1.333c0.736 0 1.333-0.597 1.333-1.333v0-6.667c0-0.736-0.597-1.333-1.333-1.333v0zM10 4c0.736 0 1.333 0.597 1.333 1.333v0 2.721c1.904 0.331 3.333 1.97 3.333 3.944 0 0 0 0.001 0 0.001v-0 12c0 2.209-1.791 4-4 4v0h-1.333c-2.209 0-4-1.791-4-4v0-12c0-0 0-0.001 0-0.001 0-1.974 1.429-3.613 3.309-3.941l0.024-0.003v-2.721c0-0.736 0.597-1.333 1.333-1.333v0zM10.667 10.667h-1.333c-0.736 0-1.333 0.597-1.333 1.333v0 12c0 0.736 0.597 1.333 1.333 1.333h1.333c0.736 0 1.333-0.597 1.333-1.333v0-12c0-0.736-0.597-1.333-1.333-1.333v0z" />',9:'<path fill="currentColor" d="M11.333 4c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 10.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-10.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM10.667 22.667h-1.333c-0.13 0-0.255-0.018-0.373-0.053l0.009 0.002 3.031-1.683v0.4c0 0.736-0.597 1.333-1.333 1.333v0zM8 10.667c0-0.736 0.597-1.333 1.333-1.333h1.333c0.13 0 0.255 0.018 0.373 0.053l-0.009-0.002-3.031 1.683v-0.4zM12 11.896v1.349l-4 2.4v-1.528l4-2.221zM8 20.104v-1.349l4-2.4v1.528l-4 2.221zM23.333 6.667c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 6.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-6.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM22.667 21.333h-1.333c-0.736 0-1.333-0.597-1.333-1.333v0-6.667c0-0.736 0.597-1.333 1.333-1.333v0h1.333c0.736 0 1.333 0.597 1.333 1.333v0 6.667c0 0.736-0.597 1.333-1.333 1.333v0z" />',10:'<path fill="currentColor" d="M14.448 6.667c0.523 0.006 0.974 0.312 1.187 0.755l0.003 0.008 3.74 7.904h-2.952l-2.027-4.285-1.151 2.3c-0.224 0.44-0.673 0.736-1.192 0.736-0.473 0-0.888-0.246-1.125-0.617l-0.003-0.005-0.204-0.324-1.2 2.196h-3.040l2.989-5.469c0.231-0.416 0.668-0.693 1.17-0.693 0.473 0 0.889 0.247 1.126 0.619l0.003 0.005 0.151 0.24 1.316-2.631c0.224-0.441 0.674-0.737 1.193-0.737 0.005 0 0.011 0 0.016 0h-0.001zM22.328 21.571l-1.057-2.237h-2.951l2.805 5.931c0.219 0.455 0.676 0.763 1.205 0.763 0.53 0 0.988-0.31 1.203-0.758l0.003-0.008 2.795-5.928h-2.948l-1.055 2.237zM4.303 19.333h3.040l-2.171 3.973c-0.231 0.416-0.668 0.694-1.17 0.694-0.737 0-1.334-0.597-1.334-1.334 0-0.235 0.061-0.455 0.167-0.647l-0.003 0.007 1.472-2.693zM25.271 15.333h2.947l0.991-2.099c0.080-0.166 0.127-0.362 0.127-0.568 0-0.737-0.597-1.334-1.334-1.334-0.53 0-0.988 0.309-1.203 0.758l-0.003 0.008-1.524 3.235zM5.197 16.267h-2.264v2.133h2.263v-2.133zM9.997 16.267h-2.393v2.133h2.392v-2.133zM14.797 16.267h-2.393v2.133h2.392v-2.133zM19.597 16.267h-2.392v2.133h2.392v-2.133zM24.397 16.267h-2.392v2.133h2.392v-2.133zM29.068 16.267h-2.263v2.133h2.261v-2.133z"/>',12:'<path fill="currentColor" d="M4.857 3h-0.928v26h9.286v-26h-8.357zM5.786 27.143v-22.286h5.572v22.286h-5.572zM19.714 6.714h-0.928v18.572h9.286v-18.572h-8.357zM20.643 23.428v-14.857h5.572v14.857h-5.572z" />',13:'<path stroke="currentColor" d="M12.429 6v20h7.143v-20h-7.143zM18.143 7.429h-4.286v17.143h4.286v-17.143zM22.429 17.429v8.571h7.143v-8.571h-7.143zM28.143 18.857h-4.286v5.714h4.286v-5.714zM2.429 13.143h7.143v12.857h-7.143v-12.857zM3.857 14.571h4.286v10h-4.286v-10z" />',14:`
        <g stroke="currentColor">
            <path d="M22.219 18.677l9.781-12.086-1.096-0.871-9.781 12.086c-0.471-0.251-1.030-0.399-1.623-0.399-0.78 0-1.501 0.255-2.083 0.687l0.009-0.007-3.106-2.839c0.174-0.402 0.275-0.871 0.275-1.363 0-1.94-1.573-3.513-3.513-3.513-0.003 0-0.006 0-0.009 0h0c-0.002 0-0.005 0-0.007 0-1.94 0-3.513 1.573-3.513 3.513s1.573 3.513 3.513 3.513c0.947 0 1.807-0.375 2.439-0.985l-0.001 0.001 2.979 2.698c-0.31 0.513-0.493 1.133-0.493 1.796 0 1.94 1.573 3.513 3.513 3.513s3.513-1.573 3.513-3.513c0-0.85-0.302-1.63-0.804-2.237l0.005 0.006zM11.074 15.993c1.164 0 2.108-0.944 2.108-2.108s-0.944-2.108-2.108-2.108v0c-1.164 0-2.108 0.944-2.108 2.108s0.944 2.108 2.108 2.108v0zM21.614 20.912c0 1.164-0.944 2.108-2.108 2.108s-2.108-0.944-2.108-2.108v0c0-1.164 0.944-2.108 2.108-2.108s2.108 0.944 2.108 2.108v0z" />
            <path d="M8.081 15.712c0.239 0.422 0.562 0.759 0.956 1.040l-7.968 9.528-1.068-0.899 8.081-9.669z" />
        </g>`,15:'<path fill="currentColor" d="M23.579 0h8.421v1.684h-6.737v21.895h-10.105v-11.789h-6.737v20.211h-8.421v-1.684h6.737v-20.21h10.105v11.789h6.737v-21.895z" />',16:'<path fill="currentColor"  d="M26.667 2v1.333h1.333v-1.333h-1.333zM26.667 4.667v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h1.333v1.333h-1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h-1.333zM25.333 6v-1.333h1.333v1.333h-1.333zM24 7.333v-1.333h1.333v1.333h-1.333zM22.667 8.667v-1.333h1.333v1.333h-1.333zM21.333 10v-1.333h1.333v1.333h-1.333zM20 11.333v-1.333h1.333v1.333h-1.333zM18.667 12.667v-1.333h1.333v1.333h-1.333zM17.333 12.667v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333zM17.333 12.667h1.333v1.333h-1.333v-1.333zM18.453 21.16l10-9.333-0.907-0.987-9.533 8.893-6.213-6.2-0.44-0.453-0.48 0.427-7.333 6.667 0.907 0.987 6.853-6.24 6.227 6.213 0.453 0.467 0.467-0.44zM5.333 28.667h-1.333v1.333h1.333v-1.333zM5.333 27.333h-1.333v-1.333h1.333v1.333zM6.667 27.333v1.333h-1.333v-1.333h1.333zM6.667 26h-1.333v-1.333h1.333v1.333zM8 26v1.333h-1.333v-1.333h1.333zM8 24.667h-1.333v-1.333h1.333v1.333zM9.333 24.667v1.333h-1.333v-1.333h1.333zM9.333 23.333h-1.333v-1.333h1.333v1.333zM10.667 23.333v1.333h-1.333v-1.333h1.333zM10.667 22h-1.333v-1.333h1.333v1.333zM12 22h-1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h-1.333v-1.333h1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v1.333h1.333v1.333zM12 22h1.333v1.333h-1.333v-1.333zM14.667 24.667v1.333h1.333v1.333h1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v-1.333h-1.333v-1.333h-1.333zM14.667 24.667v-1.333h-1.333v1.333h1.333z" />',index:'<path stroke="currentColor" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="2" d="M26.795 21.614l-8.636 8.636M18.159 21.614l8.636 8.636M7.795 12.114h12.091M22.477 6.068c0-2.385-1.933-4.318-4.318-4.318s-4.318 1.933-4.318 4.318v0 19c0 2.385-1.933 4.318-4.318 4.318s-4.318-1.933-4.318-4.318v0" />',set:'<path fill="currentColor" d="M22.485 6.033c-0.234-0.404-0.664-0.672-1.157-0.673h-10.656c-0.477 0-0.92 0.256-1.157 0.673l-5.328 9.293c-0.24 0.417-0.24 0.931 0 1.347l5.328 9.293c0.239 0.417 0.68 0.673 1.157 0.673h10.656c0.477 0 0.92-0.256 1.157-0.673l5.328-9.293c0.24-0.417 0.24-0.931 0-1.347l-5.328-9.293zM7.2 4.687c0.702-1.213 1.993-2.017 3.472-2.020h10.656c1.433 0 2.757 0.769 3.473 2.020l5.328 9.293c0.338 0.58 0.538 1.277 0.538 2.020s-0.2 1.44-0.548 2.039l0.010-0.019-5.328 9.293c-0.702 1.214-1.994 2.018-3.473 2.020h-10.656c-1.479-0.003-2.77-0.807-3.462-2.001l-0.010-0.019-5.328-9.293c-0.338-0.58-0.538-1.277-0.538-2.020s0.2-1.44 0.548-2.039l-0.010 0.019 5.328-9.293zM13.301 15.973c0-1.487 1.197-2.693 2.673-2.693 1.477 0 2.675 1.207 2.675 2.693 0 1.488-1.197 2.693-2.675 2.693-1.478-0.006-2.673-1.205-2.673-2.684 0-0.003 0-0.007 0-0.010v0.001zM15.975 10.587c-2.953 0-5.348 2.412-5.348 5.387s2.395 5.387 5.348 5.387 5.348-2.412 5.348-5.387-2.395-5.387-5.347-5.387z" />',fullScreen:`
        <g fill="currentColor">
            <path d="M6.667 8c0-0.736 0.597-1.333 1.333-1.333v0h5.333c0.736 0 1.333 0.597 1.333 1.333s-0.597 1.333-1.333 1.333v0h-2.115l3.057 3.057c0.232 0.24 0.374 0.566 0.374 0.926 0 0.736-0.597 1.333-1.333 1.333-0.36 0-0.687-0.143-0.927-0.375l-3.057-3.057v2.115c0 0.736-0.597 1.333-1.333 1.333s-1.333-0.597-1.333-1.333v0-5.333zM24.94 24.947c-0.24 0.239-0.572 0.387-0.937 0.387-0.001 0-0.002 0-0.003 0h-5.333c-0.736 0-1.333-0.597-1.333-1.333s0.597-1.333 1.333-1.333v0h2.115l-3.057-3.057c-0.232-0.24-0.374-0.566-0.374-0.926 0-0.736 0.597-1.333 1.333-1.333 0.36 0 0.687 0.143 0.927 0.375l3.057 3.057v-2.115c0-0.736 0.597-1.333 1.333-1.333s1.333 0.597 1.333 1.333v0 5.333c0 0.001 0 0.002 0 0.003 0 0.366-0.148 0.697-0.387 0.937l0-0-0.007 0.005z" />
            <path d="M25.333 5.333c0.736 0 1.333 0.597 1.333 1.333v0 18.667c0 0.736-0.597 1.333-1.333 1.333h-18.667c-0.736 0-1.333-0.597-1.333-1.333v0-18.667c0-0.736 0.597-1.333 1.333-1.333h18.667zM6.667 2.667c-2.209 0-4 1.791-4 4v0 18.667c0 2.209 1.791 4 4 4v0h18.667c2.209 0 4-1.791 4-4v0-18.667c0-2.209-1.791-4-4-4v0h-18.667z" />
        </g>`,fullScreenClose:`
        <g fill="currentColor">
            <path d="M14.667 13.333c0 0.736-0.597 1.333-1.333 1.333h-5.333c-0 0-0 0-0 0-0.736 0-1.333-0.597-1.333-1.333s0.597-1.333 1.333-1.333c0 0 0 0 0 0h2.115l-3.057-3.057c-0.232-0.24-0.374-0.566-0.374-0.926 0-0.736 0.597-1.333 1.333-1.333 0.36 0 0.687 0.143 0.927 0.375l3.057 3.057v-2.115c0-0.736 0.597-1.333 1.333-1.333s1.333 0.597 1.333 1.333v0 5.333zM17.727 17.72c0.24-0.239 0.572-0.387 0.937-0.387 0.001 0 0.002 0 0.003 0h5.333c0 0 0 0 0 0 0.736 0 1.333 0.597 1.333 1.333s-0.597 1.333-1.333 1.333c-0 0-0 0-0 0h-2.115l3.057 3.057c0.232 0.24 0.374 0.566 0.374 0.926 0 0.736-0.597 1.333-1.333 1.333-0.36 0-0.687-0.143-0.927-0.375l-3.057-3.057v2.115c0 0 0 0 0 0 0 0.736-0.597 1.333-1.333 1.333s-1.333-0.597-1.333-1.333c0-0 0-0 0-0v0-5.333c0-0.001 0-0.002 0-0.003 0-0.366 0.148-0.697 0.387-0.937l-0 0 0.007-0.005z" />
            <path d="M25.333 5.333c0.736 0 1.333 0.597 1.333 1.333v0 18.667c0 0.736-0.597 1.333-1.333 1.333h-18.667c-0.736 0-1.333-0.597-1.333-1.333v0-18.667c0-0.736 0.597-1.333 1.333-1.333h18.667zM6.667 2.667c-2.209 0-4 1.791-4 4v0 18.667c0 2.209 1.791 4 4 4v0h18.667c2.209 0 4-1.791 4-4v0-18.667c0-2.209-1.791-4-4-4v0h-18.667z" />
        </g>
    `,photo:'<path fill="currentColor" d="M12.88 4c-1.479 0-2.77 0.803-3.462 1.997l-0.010 0.019-1.515 2.651h-1.227c-2.209 0-4 1.791-4 4v0 11.333c0 2.209 1.791 4 4 4v0h18.667c2.209 0 4-1.791 4-4v0-11.333c0-2.209-1.791-4-4-4v0h-1.227l-1.515-2.651c-0.702-1.213-1.993-2.016-3.472-2.016h-6.239zM11.723 7.339c0.234-0.404 0.665-0.672 1.158-0.672 0 0 0.001 0 0.001 0h6.237c0 0 0.001 0 0.001 0 0.493 0 0.924 0.268 1.154 0.666l0.003 0.006 1.899 3.323c0.234 0.404 0.664 0.672 1.157 0.672h2c0.736 0 1.333 0.597 1.333 1.333v0 11.333c0 0.736-0.597 1.333-1.333 1.333h-18.667c-0.736-0-1.333-0.597-1.333-1.333v-11.333c0-0.736 0.597-1.333 1.333-1.333h2c0.493-0 0.923-0.268 1.154-0.666l0.003-0.006 1.899-3.323zM16 24c3.682 0 6.667-2.985 6.667-6.667s-2.985-6.667-6.667-6.667v0c-3.682 0-6.667 2.985-6.667 6.667s2.985 6.667 6.667 6.667v0zM20 17.333c0 2.209-1.791 4-4 4s-4-1.791-4-4v0c0-2.209 1.791-4 4-4s4 1.791 4 4v0z" />',arrowDown:'<path fill="currentColor" d="M17.693 21.69l6.619-8.93c0.685-0.924 0.482-2.221-0.454-2.898-0.36-0.26-0.794-0.4-1.24-0.4h-13.238c-1.159 0-2.099 0.928-2.099 2.073 0 0.44 0.142 0.869 0.405 1.225l6.619 8.93c0.685 0.924 1.998 1.125 2.933 0.448 0.174-0.126 0.327-0.277 0.454-0.448z" />'};return(h,E)=>(G(),te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:m.width,height:m.height,fill:"none",innerHTML:m.icon&&y[m.icon]?y[m.icon]:""},null,8,Mr))}}),Fr={class:"dropdown-trigger"},kr={key:0,class:"dropdown-popper"},Ar=Fe({__name:"Dropdown",props:{showIcon:{type:Boolean,default:!1},manual:{type:Boolean,default:!1},trigger:{type:String,default:"hover"}},emits:["showChange"],setup(m,{expose:y,emit:h}){const E=m,T=h,P=/Mobi|Android|iPhone/i.test(navigator.userAgent),b=li(!1),I=li(null),B=Ve(()=>P||E.trigger==="click"),M=Ve(()=>B.value?"mousedown":"mouseenter"),Y=Ve(()=>B.value?"":"mouseleave"),W={change(Q){E.manual||b.value===Q||(b.value=Q,T("showChange",Q))},show(){b.value=!0,T("showChange",!0)},hide(){b.value=!1,T("showChange",!1)},listenClick(Q){var se;const oe=Q.target;b.value&&!((se=I.value)!=null&&se.contains(oe))&&W.hide()}};return y({handleShow:W.show,handleHide:W.hide}),Et(()=>{document.addEventListener("click",W.listenClick,!1)}),pi(()=>{document.removeEventListener("click",W.listenClick,!1)}),(Q,oe)=>(G(),te("div",Wt({ref_key:"el",ref:I,class:["dropdown",{show:b.value}]},{[po(M.value)]:oe[0]||(oe[0]=se=>W.change(!0))},{[po(Y.value)]:oe[1]||(oe[1]=se=>W.change(!1))}),[Ee("div",Fr,[ui(Q.$slots,"default",{},void 0,!0),m.showIcon?(G(),Oe(Xe,{key:0,icon:"arrowDown",class:"icon-arrow-down",width:"12",height:"12"})):Me("",!0)]),Q.$slots.dropdown?(G(),te("div",kr,[ui(Q.$slots,"dropdown",{},void 0,!0)])):Me("",!0)],16))}});const Eo=Ye(Ar,[["__scopeId","data-v-0c474f66"]]),Lr={class:"dropdown-content"},Br={class:"operate"},zr=["onClick"],Rr=Fe({__name:"IntervalDropdown",props:{locale:{type:Object,default:()=>({})},selectedList:{type:Array,default:()=>[]},allList:{type:Array,default:()=>[]},interval:{type:String,default:""},selectInterval:{type:Function,default:()=>{}},editInterval:{type:Function,default:()=>{}},edit:{type:Boolean,default:!1}},emits:["update:edit"],setup(m,{emit:y}){const h=m,E=y,T=bt({edits:new Set}),P=Ve(()=>h.edit?[...T.edits]:h.selectedList),b={select(I){h.edit?T.edits.has(I)?T.edits.delete(I):T.edits.add(I):h.interval!==I&&h.selectInterval(I)},changeType(){h.edit?(h.editInterval([...T.edits]),T.edits.clear()):T.edits=new Set(h.selectedList),E("update:edit",!h.edit)}};return(I,B)=>(G(),te("div",Lr,[Ee("div",Br,[Ee("span",null,ht(m.locale.select_interval),1),Ee("button",{type:"button",onClick:B[0]||(B[0]=(...M)=>b.changeType&&b.changeType(...M))},ht(h.edit?m.locale.save:m.locale.edit),1)]),Ee("ul",null,[(G(!0),te(vi,null,gi(m.allList,M=>(G(),te("li",{key:M,class:ot({selected:P.value.includes(M),active:m.interval===M}),onClick:Y=>b.select(M)},ht(m.locale.interval_map[M]),11,zr))),128))])]))}});const Wr=Ye(Rr,[["__scopeId","data-v-7f7c525b"]]),Or={class:"dropdown-content"},Vr=["onClick"],Nr=Fe({__name:"GraphDropdown",props:{graph:{type:Number,default:1},lang:{type:String,default:"en-US"},type:{type:String,default:"tv"}},emits:["selectGraph"],setup(m,{emit:y}){const h=m,E=y,T=Ve(()=>(Vt[h.lang]||Vt["en-US"]).type),P=Ve(()=>h.type==="simple"?Co.simple:Co.tv),b=I=>{h.graph!==I&&E("selectGraph",I)};return P.value.includes(h.graph)||E("selectGraph",1),(I,B)=>(G(),te("ul",Or,[(G(!0),te(vi,null,gi(P.value,M=>(G(),te("li",{key:M,class:ot({active:h.graph===M}),onClick:Y=>b(M)},[Pe(Xe,{icon:String(M)},null,8,["icon"]),Xn(" "+ht(T.value[M]),1)],10,Vr))),128))]))}});const Hr=Ye(Nr,[["__scopeId","data-v-f501f100"]]),Yr=["innerHTML"],Ur=Fe({__name:"Tooltip",props:{message:{type:String,default:""},placement:{type:String,default:"bottom"}},setup(m){const y=li(!1);return(h,E)=>(G(),te("div",{class:ot(["tooltip",[m.placement]]),onMouseenter:E[0]||(E[0]=T=>y.value=!0),onMouseleave:E[1]||(E[1]=T=>y.value=!1)},[Pe(qn,null,{default:ct(()=>[y.value&&m.message?(G(),te("div",{key:0,class:"tooltip-message",innerHTML:m.message},null,8,Yr)):Me("",!0)]),_:1}),ui(h.$slots,"default",{},void 0,!0)],34))}});const $r=Ye(Ur,[["__scopeId","data-v-a808a030"]]),jr=["onClick"],Gr={class:"label"},Xr=Fe({inheritAttrs:!1,__name:"Menu",props:{...Nt("menu"),selectedIntervals:{type:Array,default:()=>[]}},emits:["selectInterval","editInterval","showIndicator","set","screenshot","fullScreen","selectGraph"],setup(m,{emit:y}){const h=m,E=y,T=bt({limit:h.selectedIntervals.length,interval_dropdown:null,grap_dropdown:null,menu_el:null,interval_el:null,operate_el:null,observe:null,edit_interval:!1}),P=Ve(()=>({...Vt[h.lang]||Vt[ko],interval_map:{1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",720:"12h","1D":"1d","3D":"3d","1W":"1w","1M":"1M"}})),b=Ve(()=>{const M=h.selectedIntervals;return h.intervals.filter(W=>M.includes(W)).slice(0,T.limit)}),I=Ve(()=>b.value.includes(h.interval)?"":P.value.interval_map[h.interval]),B={selectInterval(M){h.interval===M||h.loading||E("selectInterval",M,!1)},editInterval(M){T.interval_dropdown&&T.interval_dropdown.handleHide(),E("editInterval",M)},intervalShowChangeHandle(M){!M&&T.edit_interval&&(T.edit_interval=!1)},selectGraph(M){h.graph!==M&&(T.grap_dropdown&&T.grap_dropdown.handleHide(),E("selectGraph",M))},initObserver(){const M=new ResizeObserver(()=>{const Y=T.menu_el.offsetWidth-8,W=T.operate_el.offsetWidth,Q=T.interval_el.offsetWidth,oe=W+Q,se=()=>{oe>Y&&T.limit>2?(T.limit-=1,oe>Y&&T.limit>2&&se()):Y>oe+42&&T.limit<h.selectedIntervals.length&&(T.limit+=1)};se()});M.observe(T.interval_el),M.observe(T.operate_el),M.observe(T.menu_el),T.observe=M}};return Et(()=>{B.initObserver()}),pi(()=>{var M;(M=T.observe)==null||M.disconnect()}),(M,Y)=>(G(),te("section",{ref:W=>T.menu_el=W,class:ot(["kline-menu",[`is-${h.theme}`]])},[Ee("div",{ref:W=>T.interval_el=W,class:"kline-menu-list"},[Ee("ul",null,[(G(!0),te(vi,null,gi(b.value,W=>(G(),te("li",{key:W,class:ot(["item",{active:W===h.interval}]),onClick:Q=>B.selectInterval(W)},ht(P.value.interval_map[W]),11,jr))),128))]),Pe(Eo,{ref:W=>T.interval_dropdown=W,class:"item","show-icon":"",manual:T.edit_interval,onShowChange:B.intervalShowChangeHandle},{dropdown:ct(()=>[Pe(Wr,{edit:T.edit_interval,"onUpdate:edit":Y[0]||(Y[0]=W=>T.edit_interval=W),locale:P.value,"selected-list":h.selectedIntervals,"all-list":h.intervals,interval:h.interval,"select-interval":B.selectInterval,"edit-interval":B.editInterval},null,8,["edit","locale","selected-list","all-list","interval","select-interval","edit-interval"])]),default:ct(()=>[Ee("span",Gr,ht(I.value),1)]),_:1},8,["manual","onShowChange"]),h.type==="tv"?(G(),Oe($r,{key:0,class:"item",message:P.value.indicator,placement:"bottom",onClick:Y[1]||(Y[1]=W=>E("showIndicator"))},{default:ct(()=>[Pe(Xe,{icon:"index"})]),_:1},8,["message"])):Me("",!0),Pe(Eo,{ref:W=>T.grap_dropdown=W,class:"item","show-icon":""},{dropdown:ct(()=>[Pe(Hr,{graph:h.graph,lang:h.lang,type:M.$props.type,onSelectGraph:B.selectGraph},null,8,["graph","lang","type","onSelectGraph"])]),default:ct(()=>[Pe(Xe,{icon:String(h.graph)},null,8,["icon"])]),_:1},512)],512),Ee("div",{ref:W=>T.operate_el=W,class:"operate-list"},[h.type==="tv"?(G(),te("span",{key:0,class:"item",onClick:Y[2]||(Y[2]=W=>E("set"))},[Pe(Xe,{icon:"set"})])):Me("",!0),Ee("span",{class:"item",onClick:Y[3]||(Y[3]=W=>E("screenshot"))},[Pe(Xe,{icon:"photo"})]),Ee("span",{class:"item",onClick:Y[4]||(Y[4]=W=>E("fullScreen",h.fullscreen))},[h.fullscreen?(G(),Oe(Xe,{key:0,icon:"fullScreenClose"})):(G(),Oe(Xe,{key:1,icon:"fullScreen"}))])],512)],2))}});const qr=Ye(Xr,[["__scopeId","data-v-b5816547"]]),Jr=Fe({__name:"Kline",props:Nt(),emits:["selectInterval","editInterval","showIndicator","set","screenshot","fullScreen","selectGraph"],setup(m,{emit:y}){const h=m,E=y,T=bt({el:null,tv:null,simple:null,fullscreen:!1,store:{interval:void 0,intervals:mr,simple_graph:1,tv_graph:1}}),P=Ve(()=>`${h.storeKey}_config`),b={getStore(){var B;const I=Dr(P.value)||{};Object.prototype.toString.call(I)==="[object Object]"&&((B=I.intervals)!=null&&B.length&&(I.intervals=h.intervals.filter(M=>I.intervals.includes(M))),T.store=Object.assign(T.store,I)),h.intervals.includes(T.store.interval)||([T.store.interval]=h.intervals),E("selectInterval",T.store.interval,!0)},setStore(){Pr(P.value,T.store)},selectIntervalHandle(I,B){T.store.interval=I,b.setStore(),E("selectInterval",I,B)},editInterval(I){T.store.intervals=I,b.setStore(),E("editInterval",I)},selectGraph(I){h.type==="tv"?T.store.tv_graph=I:T.store.simple_graph=I,b.setStore(),E("selectGraph",I)},showIndicator(){var I;if(h.type==="tv"){const B=(I=T.tv.chart)==null?void 0:I.activeChart();B==null||B.executeActionById("insertIndicator")}E("showIndicator")},set(){var I;if(h.type==="tv"){const B=(I=T.tv.chart)==null?void 0:I.activeChart();B==null||B.executeActionById("chartProperties")}E("set")},screenshot(){var I,B;h.type==="tv"?(I=T.tv.chart)==null||I.takeScreenshot():(B=T.simple.chart)==null||B.$screenshot(),E("screenshot")},fullScreen(){T.fullscreen&&St.exitFullscreen?St.exitFullscreen():St.requestFullscreen(T.el)},onFullscreenChange(){T.fullscreen=!T.fullscreen,E("fullScreen",T.fullscreen)}};return b.getStore(),Et(()=>{St.addEventListener("fullscreenchange",b.onFullscreenChange,!1)}),pi(()=>{St.removeEventListener("fullscreenchange",b.onFullscreenChange,!1)}),(I,B)=>(G(),te("section",{ref:M=>T.el=M,class:ot(["kline",[`is-${h.theme}`]])},[Pe(qr,Wt(h,{fullscreen:T.fullscreen,"selected-intervals":T.store.intervals,interval:T.store.interval,graph:h.type==="tv"?T.store.tv_graph:T.store.simple_graph,onSelectInterval:b.selectIntervalHandle,onEditInterval:b.editInterval,onSet:b.set,onScreenshot:b.screenshot,onFullScreen:b.fullScreen,onShowIndicator:b.showIndicator,onSelectGraph:b.selectGraph}),null,16,["fullscreen","selected-intervals","interval","graph","onSelectInterval","onEditInterval","onSet","onScreenshot","onFullScreen","onShowIndicator","onSelectGraph"]),h.types.includes("simple")&&h.type==="simple"?(G(),Oe(br,Wt({key:0,ref:M=>T.simple=M},h,{graph:T.store.simple_graph}),null,16,["graph"])):Me("",!0),h.types.includes("tv")?Kn((G(),Oe(Ir,Wt({key:1,ref:M=>T.tv=M},h,{interval:T.store.interval,graph:T.store.tv_graph}),null,16,["interval","graph"])),[[Zn,h.type==="tv"]]):Me("",!0)],2))}});export{br as S,Ir as T,Jr as _};
