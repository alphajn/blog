import{l as m}from"./index.88dc1bbd.js";import"./el-option.4ed993c7.js";import{d as P,o as c,D as v,E as p,c as _,F as T,R as x,J as y,a5 as z,k as D,q as U,a6 as B,a as q,t as b,C as a,n as N,G as V,S as R,U as $,_ as M}from"./framework.810436bc.js";import"./el-button.4ed993c7.js";import{E}from"./index.dc0a6508.js";const X=P({__name:"Lang",props:{lang:{type:String,default:"zh-CN"}},emits:["change"],setup(u,{emit:k}){const g=k,h=[{key:"en-US",cn:"英文"},{key:"zh-CN",cn:"中文简体"},{key:"zh-TW",cn:"中文繁体"},{key:"ja-JP",cn:"日语"},{key:"vi-VN",cn:"越南语"},{key:"es-ES",cn:"西班牙语(国际)"},{key:"ru-RU",cn:"俄语"},{key:"tr-TR",cn:"土耳其语"},{key:"pt-BR",cn:"葡萄牙语(巴西)"},{key:"fr-FR",cn:"法语(法国)"},{key:"th-TH",cn:"泰语"},{key:"id-ID",cn:"印度尼西亚语"}];return(S,e)=>{const n=m.ElOption,t=m.ElSelect;return c(),v(t,{"model-value":u.lang,size:"small",class:"w-100%",onChange:e[0]||(e[0]=o=>g("change",o))},{default:p(()=>[(c(),_(T,null,x(h,o=>y(n,{key:o.key,label:`${o.key} ${o.cn}`,value:o.key},null,8,["label","value"])),64))]),_:1},8,["model-value"])}}});const C=u=>(R("data-v-c70d81aa"),u=u(),$(),u),O=C(()=>a("ul",{class:"c-black"},[a("li",{class:"grid px-4px py-8px font-bold"},[a("span",null,"交易对"),a("span",null,"价格精度"),a("span",null,"数量精度")])],-1)),F={class:"c-black flex-1 overflow-auto"},L=["onClick"],H=C(()=>a("br",null,null,-1)),j={key:0,class:"text-12px not-italic c-#15bb7a"},J=P({__name:"Symbol",props:{exchange:{type:String,default:"meex"}},emits:["change"],setup(u,{emit:k}){const g=u,h=k,S={bybit:"https://api.bybit.com/spot/api/basic/symbol_list",meex:"https://openapi.meex.com/sapi/v1/symbols"},e=z({loading:!1,quotes:[],map:{},quote:"",symbol_info:{},drawer:!1,drawer_size:"30%"}),n={getBybitSymbols(){e.loading=!0,fetch(S.bybit).then(t=>t.json()).then(t=>{if(e.loading=!1,t.ret_code===0){const o=t.result.sort((i,d)=>i.customOrder-d.customOrder),f=[];o.forEach(i=>{var d;if((d=i.quoteTokenSymbols)!=null&&d.length&&!i.isTest){f.push(i.tokenId);const w=i.quoteTokenSymbols.filter(s=>s.showStatus).sort((s,l)=>l.customOrder-s.customOrder);e.map[i.tokenId]=w.map(s=>({symbol:s.symbolName,fullName:s.tokenFullName,quantityPrecision:n.getPrecision(s.basePrecision),pricePrecision:n.getPrecision(s.minPricePrecision),amountPrecision:n.getPrecision(s.quotePrecision),baseToken:s.baseTokenId,quoteToken:s.quoteTokenId}))}}),e.quotes=f,[e.quote]=e.quotes,[e.symbol_info]=e.map[e.quote],n.emitChange()}else E.error(t.ret_msg)}).catch(t=>{E.error(t)})},getMeexSymbols(){e.loading=!0,setTimeout(()=>{e.loading=!1,e.quotes=["USDT"],e.map={USDT:[{symbol:"BTCUSDT",quantityPrecision:5,pricePrecision:2,baseToken:"BTC",quoteToken:"USDT"},{symbol:"ETHUSDT",quantityPrecision:4,pricePrecision:2,baseToken:"ETH",quoteToken:"USDT"}]},e.quote="USDT",[e.symbol_info]=e.map[e.quote],n.emitChange()},500)},getPrecision(t){let o=0;return t.includes(".")&&(o=t.slice(2).length),o},onClick(t){e.symbol_info.symbol!==t.symbol&&(e.symbol_info=t,n.emitChange())},windowResize(){e.drawer_size=window.innerWidth>1e3?"30%":"70%"},emitChange(){h("change",e.symbol_info)}};return D(()=>{switch(g.exchange){case"bybit":n.getBybitSymbols();break;case"meex":n.getMeexSymbols();break}}),U(()=>{window.addEventListener("resize",n.windowResize,!1)}),B(()=>{window.removeEventListener("resize",n.windowResize,!1)}),(t,o)=>{const f=m.ElButton,i=m.ElScrollbar,d=m.ElTabPane,w=m.ElTabs,s=m.ElDrawer;return c(),_("section",null,[y(f,{class:"w-100%",loading:e.loading,size:"small",type:"primary",plain:"",onClick:o[0]||(o[0]=l=>e.drawer=!0)},{default:p(()=>[q(b(e.symbol_info.symbol||"交易对"),1)]),_:1},8,["loading"]),y(s,{modelValue:e.drawer,"onUpdate:modelValue":o[2]||(o[2]=l=>e.drawer=l),title:`${g.exchange}-交易所`,"append-to-body":"",direction:"ltr",size:e.drawer_size,class:"symbol-drawer"},{default:p(()=>[y(w,{modelValue:e.quote,"onUpdate:modelValue":o[1]||(o[1]=l=>e.quote=l),class:"symbol-tabs",stretch:""},{default:p(()=>[(c(!0),_(T,null,x(e.quotes,l=>(c(),v(d,{key:l,label:l,name:l,lazy:"",class:"flex flex-1 flex-col overflow-hidden"},{default:p(()=>[O,y(i,null,{default:p(()=>[a("ul",F,[(c(!0),_(T,null,x(e.map[l],r=>(c(),_("li",{key:r.symbol,class:N(["grid items-center px-4px py-8px cursor-pointer hover-bg-#384452/20 lh-16px",{"bg-#384452/20 c-#d2334d":r.symbol===e.symbol_info.symbol}]),onClick:W=>n.onClick(r)},[a("span",null,[q(b(r.symbol)+" ",1),H,r.fullName?(c(),_("i",j," ("+b(r.fullName)+") ",1)):V("",!0)]),a("span",null,b(r.pricePrecision),1),a("span",null,b(r.quantityPrecision),1)],10,L))),128))])]),_:2},1024)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title","size"])])}}});const Y=M(J,[["__scopeId","data-v-c70d81aa"]]);export{Y as _,X as a};
