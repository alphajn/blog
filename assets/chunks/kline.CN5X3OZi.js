import{d as mt,o as j,c as se,p as er,h as Ie,v as ur,$ as Wt,j as Fe,r as tr,b as kt,e as ut,K as Ni,af as Pr,_ as Dt,F as cr,C as hr,n as It,G as Ae,a as Wi,t as ct,a4 as Xt,w as lt,T as Xi,u as Hi,s as Ui,ag as Zr,D as $i}from"./framework.3EWjcNId.js";import{b as Jr,f as Qr,a as Yi,c as Gi,x as Dr,s as at}from"./index.BbVwo5FL.js";import{I as ji,w as Ki}from"./config.C3IDp1Hm.js";var H=(r=>(r["en-US"]="en-US",r["zh-CN"]="zh-CN",r["zh-TW"]="zh-TW",r["ja-JP"]="ja-JP",r["vi-VN"]="vi-VN",r["es-ES"]="es-ES",r["ru-RU"]="ru-RU",r["tr-TR"]="tr-TR",r["pt-BR"]="pt-BR",r["fr-FR"]="fr-FR",r["th-TH"]="th-TH",r["id-ID"]="id-ID",r["ko-KR"]="ko-KR",r))(H||{}),Bt=(r=>(r["en-US"]="en",r["zh-CN"]="zh",r["zh-TW"]="zh_TW",r["ja-JP"]="ja",r["vi-VN"]="vi",r["es-ES"]="es",r["ru-RU"]="ru",r["tr-TR"]="tr",r["pt-BR"]="pt",r["fr-FR"]="fr",r["th-TH"]="th",r["id-ID"]="id_ID",r["ko-KR"]="ko",r))(Bt||{});const ht="dark",dr="en-US",ei="kline_chart",qi="60",ti=["1","3","5","15","30","60","120","240","360","720","1D","3D","1W","1M"],Zi=["1","15","60","240","1D","1W"],rr={tv:[0,1,2,3,8,9,10,12,13,14,15,16],simple:[0,1,3,9],simple_map:{0:"ohlc",1:"candle_solid",3:"area",9:"candle_up_stroke"}},Te={__proto__:null,Lang:H,TvLang:Bt,graphs:rr,interval:qi,intervals:ti,lang:dr,showIntervals:Zi,storeKey:ei,theme:ht};function Ji(r){const e=localStorage.getItem(r);let t=null;try{t=e?JSON.parse(e):null}catch{localStorage.removeItem(r),t=null}return t}function Qi(r,e){localStorage.setItem(r,JSON.stringify(e))}function en(r){localStorage.removeItem(r)}const tn={__proto__:null,getStore:Ji,removeStore:en,setStore:Qi},Ee={indicator:"Indicators",select_interval:"Select Intervals",edit:"Edit",save:"Save",type:{0:"Bars",1:"Candles",2:"Line",3:"Area",8:"Heikin Ashi",9:"Hollow candles",10:"BaseLine",12:"High-low",13:"Columns",14:"Line with markers",15:"Step line",16:"HLC area"},timezone:{utc:"UTC","-10":"Honolulu","-9":"Juneau","-8":"Los Angeles","-7":"Phoenix","-6":"Mexico City","-5":"New York","-4":"Caracas","-3":"Sao Paulo","+0":"London","+1":"Paris","+2":"Cairo","+3":"Moscow","+3:30":"Tehran","+4":"Dubai","+5":"Ashkhabad","+5:30":"Kolkata","+6":"Almaty","+7":"Bangkok","+8":"Shanghai","+9":"Tokyo","+10":"Brisbane","+10:30":"Adelaide","+11":"Sydney","+12":"Norfolk Island","+13":"New Zealand","+13:45":"Chatham Islands"}},Rt={[H["en-US"]]:Ee,[H["zh-CN"]]:{indicator:"指标",select_interval:"选择周期",edit:"编辑",save:"保存",type:{0:"美国线",1:"K线图",2:"线形图",3:"面积图",8:"平均K线",9:"空心K线图",10:"基准线",12:"高-低",13:"柱状图",14:"带标记线",15:"阶梯线",16:"HLC 区域"},timezone:{utc:"世界统一时间","-10":"檀香山","-9":"朱诺","-8":"洛杉矶","-7":"菲尼克斯","-6":"墨西哥城","-5":"纽约","-4":"加拉加斯","-3":"圣保罗","+0":"伦敦","+1":"巴黎","+2":"开罗","+3":"莫斯科","+3:30":"德黑兰","+4":"迪拜","+5":"阿什哈巴德","+5:30":"加尔各答","+6":"阿拉木图","+7":"曼谷","+8":"上海","+9":"东京","+10":"布里斯班","+10:30":"阿德莱德","+11":"悉尼","+12":"诺福克岛","+13":"新西兰","+13:45":"查塔姆群岛"}},[H["zh-TW"]]:{indicator:"技術指標",select_interval:"選擇周期",edit:"編輯",save:"保存",type:{0:"美國線",1:"K線",2:"線形圖",3:"面積圖",8:"平均K線",9:"空心K線",10:"基準線",12:"高-低",13:"柱狀圖",14:"帶標記線",15:"階梯線",16:"HLC區域"},timezone:{utc:"世界統一時間","-10":"檀香山","-9":"朱諾","-8":"洛杉磯","-7":"菲尼克斯","-6":"墨西哥城","-5":"紐約","-4":"加拉加斯","-3":"聖保羅","+0":"倫敦","+1":"巴黎","+2":"開羅","+3":"莫斯科","+3:30":"德黑蘭","+4":"迪拜","+5":"阿什哈巴德","+5:30":"加爾各答","+6":"阿拉木圖","+7":"曼谷","+8":"上海","+9":"東京","+10":"布里斯班","+10:30":"阿德萊德","+11":"悉尼","+12":"諾福克島","+13":"新西蘭","+13:45":"查塔姆群島"}},[H["ja-JP"]]:{indicator:"インジケーター",select_interval:"期間を選択",edit:"編集",save:"保存",type:{0:"バー",1:"ローソク足",2:"ライン",3:"エリア",8:"平均足",9:"中空ローソク足",10:"ベースライン",12:"ハイロー",13:"棒グラフ",14:"マーク付きライン",15:"ステップライン",16:"HLCエリア"},timezone:Ee.timezone},[H["vi-VN"]]:{indicator:"Các chỉ báo",select_interval:"Chọn khoảng thời gian",edit:"Chỉnh sửa",save:"lưu",type:{0:"Hình Thanh",1:"Biểu đồ nến",2:"Đường thẳng",3:"Biểu đồ vùng",8:"Mô hình Heikin Ashi",9:"Biểu đồ nến Hollow",10:"Đường cơ sở",12:"Đỉnh-Đáy",13:"Các cột",14:"Biểu đồ Đường có điểm đánh dấu",15:"Biểu đồ Đường bậc",16:"Vùng HLC"},timezone:Ee.timezone},[H["es-ES"]]:{indicator:"Indicadores",select_interval:"Seleccionar período",edit:"Editar",save:"guardar",type:{0:"Barras",1:"Velas",2:"Línea",3:"Área",8:"Heikin Ashi",9:"Velas huecas",10:"Línea de referencia",12:"Máximo-mínimo",13:"Columnas",14:"Línea con marcadores",15:"Línea de pasos",16:"Área HLC"},timezone:Ee.timezone},[H["ru-RU"]]:{indicator:"Индикаторы",select_interval:"Выбрать период",edit:"Редактировать",save:"Cохранить",type:{0:"Бары",1:"Японские свечи",2:"Линия",3:"Область",8:"Хейкен Аши",9:"Пустые свечи",10:"Базовая линия",12:"Мин-Макс",13:"Столбцы",14:"Линия с точками",15:"Ступенчатая линия",16:"Область HLC"},timezone:Ee.timezone},[H["tr-TR"]]:{indicator:"Göstergeler",select_interval:"Dönem seç",edit:"Düzenle",save:"Kaydet",type:{0:"Çubuk Grafikler",1:"Mum Grafikler",2:"Çizgi",3:"Alan",8:"Heikin Ashi",9:"İçi Boş Mumlar",10:"Temel Çizgi",12:"Yüksek-düşük",13:"Sütunlar",14:"İşaretli çizgi",15:"Adım çizgisi",16:"HLC alanı"},timezone:Ee.timezone},[H["pt-BR"]]:{indicator:"Indicadores",select_interval:"Selecionar período",edit:"Editar",save:"Salvar",type:{0:"Barras",1:"Velas",2:"Linha",3:"Área",8:"Heiken Ashi",9:"Candles Vazios",10:"Linha Base",12:"Máxima-Mínima",13:"Colunas",14:"Linha com marcadores",15:"Degrau",16:"Área HLC"},timezone:Ee.timezone},[H["fr-FR"]]:{indicator:"Indicateurs",select_interval:"Sélectionner la période",edit:"Modifier",save:"enregistrer",type:{0:"Barres",1:"Bougies",2:"Droite",3:"Région",8:"Heikin Ashi",9:"Bougies Creuses",10:"Ligne de base",12:"Haut-Bas",13:"Colonnes",14:"Ligne avec marqueurs",15:"Ligne en escalier",16:"Zone HLC"},timezone:Ee.timezone},[H["th-TH"]]:{indicator:"อินดิเคเตอร์",select_interval:"เลือกช่วงเวลา",edit:"แก้ไข",save:"บันทึก",type:{0:"บาร์",1:"แท่งเทียน",2:"เส้น",3:"พื้นที่",8:"ไฮเกน อาชิ",9:"แท่งเทียนแบบกลวง",10:"เส้นฐาน",12:"สูง-ต่ำ",13:"คอลัมน์",14:"เส้นพร้อมการแสดงจุด",15:"เส้นระดับ",16:"HLC area"},timezone:Ee.timezone},[H["id-ID"]]:{indicator:"Indikator",select_interval:"Pilih periode",edit:"Sunting",save:"simpan",type:{0:"Bar",1:"Candle",2:"Garis",3:"Area",8:"Heikin Ashi",9:"Candle Kosong",10:"Garis dasar",12:"Tertinggi-Terendah",13:"Kolom-Kolom",14:"Garis dengan penanda",15:"Garis tahap",16:"Area HLC"},timezone:Ee.timezone},[H["ko-KR"]]:{indicator:"색인",select_interval:"주기 선택",edit:"편집하다",save:"구하다",type:{0:"아메리칸 라인",1:"K-라인 차트",2:"선 그래프",3:"면적 차트",8:"평균 K라인",9:"중공 K-라인 차트",10:"기준선",12:"고-저",13:"히스토그램",14:"태그된 줄",15:"스텝라인",16:"HLC 영역"},timezone:Ee.timezone}},ce={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Ar=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Mr=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Tr=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],ue=typeof window<"u"&&typeof window.document<"u"?window.document:{},ge="fullscreenEnabled"in ue&&Object.keys(ce)||Ar[0]in ue&&Ar||Mr[0]in ue&&Mr||Tr[0]in ue&&Tr||[],St={requestFullscreen:r=>r[ge[ce.requestFullscreen]](),requestFullscreenFunction:r=>r[ge[ce.requestFullscreen]],get exitFullscreen(){return ue[ge[ce.exitFullscreen]].bind(ue)},get fullscreenPseudoClass(){return`:${ge[ce.fullscreen]}`},addEventListener:(r,e,t)=>ue.addEventListener(ge[ce[r]],e,t),removeEventListener:(r,e,t)=>ue.removeEventListener(ge[ce[r]],e,t),get fullscreenEnabled(){return!!ue[ge[ce.fullscreenEnabled]]},get fullscreenElement(){return ue[ge[ce.fullscreenElement]]},get onfullscreenchange(){return ue[`on${ge[ce.fullscreenchange]}`.toLowerCase()]},set onfullscreenchange(r){ue[`on${ge[ce.fullscreenchange]}`.toLowerCase()]=r},get onfullscreenerror(){return ue[`on${ge[ce.fullscreenerror]}`.toLowerCase()]},set onfullscreenerror(r){ue[`on${ge[ce.fullscreenerror]}`.toLowerCase()]=r}},Fr={up:"#19bf86",up_opacity:"rgba(25, 191, 134, 0.6)",down:"#f8495e",down_opacity:"rgba(248, 73, 94, 0.6)",family:"Helvetica Neue",text_size:10,crosshair:"#fff",crosshair_bg:"#4c525e",ma:"#f7a600"},Lt={light:{...Fr,background:"#fff",grid:"rgba(243, 245, 247, 0.7)",price_mark:"#81858c",cross_line:"rgba(16, 16, 20, 0.6)",scales_text:"#81858c",scales_line:"#e9edf2",tooltip_color:"#81858c"},dark:{...Fr,background:"#101014",grid:"rgba(32, 33, 36, 0.7)",price_mark:"#adb1b8",cross_line:"rgba(255, 255, 255, 0.6)",scales_text:"#adb1b8",scales_line:"#404347",tooltip_color:"#adb1b8"}},rn=["width","height","innerHTML"],Ye=mt({__name:"SvgIcon",props:{icon:{type:String,default:"",required:!0},width:{type:String,default:"16"},height:{type:String,default:"16"}},setup(r){const e={0:'<path fill="currentColor" d="M22.667 2.667c0.736 0 1.333 0.597 1.333 1.333v14.667h2.667c0.736 0 1.333 0.597 1.333 1.333s-0.597 1.333-1.333 1.333v0h-2.667v4c0 0 0 0 0 0 0 0.736-0.597 1.333-1.333 1.333s-1.333-0.597-1.333-1.333c0-0 0-0 0-0v0-14.667h-2.667c-0 0-0 0-0 0-0.736 0-1.333-0.597-1.333-1.333s0.597-1.333 1.333-1.333c0 0 0 0 0 0h2.667v-4c0-0.736 0.597-1.333 1.333-1.333v0zM9.333 5.333c-0.736 0-1.333 0.597-1.333 1.333v0 16h-2.667c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333v0h2.667v2.667c0 0 0 0 0 0 0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333c0-0 0-0 0-0v0-13.333h2.667c0 0 0 0 0 0 0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333c-0 0-0 0-0 0h-2.667v-5.333c0-0.736-0.597-1.333-1.333-1.333v0z" />',1:'<path fill="currentColor" d="M11.333 4c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 10.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-10.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM10.667 22.667h-1.333c-0.736 0-1.333-0.597-1.333-1.333v0-10.667c0-0.736 0.597-1.333 1.333-1.333h1.333c0.736 0 1.333 0.597 1.333 1.333v0 10.667c0 0.736-0.597 1.333-1.333 1.333v0zM23.333 6.667c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 6.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-6.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM22.667 21.333h-1.333c-0.736 0-1.333-0.597-1.333-1.333v0-6.667c0-0.736 0.597-1.333 1.333-1.333v0h1.333c0.736 0 1.333 0.597 1.333 1.333v0 6.667c0 0.736-0.597 1.333-1.333 1.333v0z" />',2:'<path fill="currentColor" d="M28.885 9.671c0.275 0.245 0.447 0.601 0.447 0.996 0 0.34-0.128 0.651-0.337 0.887l0.001-0.001-5.333 6c-0.245 0.275-0.6 0.448-0.996 0.448h-4.115l-5.609 5.609c-0.241 0.241-0.574 0.39-0.943 0.39-0.411 0-0.778-0.186-1.022-0.477l-0.002-0.002-2.4-2.879-3.633 3.635c-0.24 0.232-0.566 0.374-0.926 0.374-0.736 0-1.333-0.597-1.333-1.333 0-0.36 0.143-0.687 0.375-0.927l4.666-4.666c0.241-0.241 0.574-0.39 0.943-0.39 0.411 0 0.778 0.186 1.022 0.477l0.002 0.002 2.4 2.879 4.967-4.968c0.241-0.241 0.575-0.391 0.943-0.391h4.067l4.937-5.552c0.245-0.275 0.601-0.447 0.996-0.447 0.34 0 0.651 0.128 0.887 0.337l-0.001-0.001z" />',3:'<path fill="currentColor" d="M25.196 5.123c0.246-0.28 0.604-0.456 1.004-0.456 0.737 0 1.334 0.597 1.334 1.334 0 0.337-0.125 0.645-0.331 0.88l-4.199 4.798c-0.246 0.279-0.604 0.455-1.003 0.455-0 0-0.001 0-0.001 0h-3l-4.404 4.952c-0.245 0.275-0.601 0.447-0.996 0.447-0.325 0-0.624-0.117-0.855-0.31l0.002 0.002-2.667-2.22-3.939 3.939c-0.24 0.232-0.566 0.374-0.926 0.374-0.736 0-1.333-0.597-1.333-1.333 0-0.36 0.143-0.687 0.375-0.927l4.8-4.8c0.241-0.241 0.575-0.39 0.943-0.39 0.326 0 0.624 0.117 0.856 0.311l-0.002-0.002 2.608 2.173 3.943-4.435c0.245-0.275 0.601-0.448 0.997-0.448 0 0 0 0 0 0h2.995l3.801-4.344zM25.772 10.351c0.246-0.297 0.615-0.484 1.028-0.484 0.736 0 1.333 0.597 1.333 1.333 0 0 0 0 0 0v0 14.4c0 0.736-0.597 1.333-1.333 1.333v0h-21.6c-0.736 0-1.333-0.597-1.333-1.333v0-2.52c0-0 0-0 0-0.001 0-0.397 0.174-0.754 0.449-0.998l0.001-0.001 5.237-4.62c0.234-0.207 0.543-0.333 0.881-0.333 0.37 0 0.705 0.151 0.946 0.394l2.327 2.345 5.599-5.645c0.242-0.244 0.577-0.395 0.947-0.395h2.645l2.872-3.476zM25.467 14.907l-0.912 1.103c-0.246 0.296-0.614 0.484-1.027 0.484h-0.040l1.979 2.32v-3.907zM18.931 18.388l4.745 5.88h1.791v-1.349l-5.103-5.976-1.433 1.445zM15.613 21.735l2.011 2.412c0.032 0.039 0.063 0.080 0.089 0.12h2.536l-3.208-3.973-1.427 1.44zM9.244 21.291l2.38 2.856c0.033 0.039 0.063 0.080 0.089 0.12h2.54l-1.067-1.28c-0.165-0.071-0.306-0.169-0.424-0.288l-0-0-2.387-2.407-1.132 0.999zM6.533 23.68v0.587h1.72l-1.009-1.213-0.711 0.627z" />',8:'<path fill="currentColor" d="M22 2.667c0.736 0 1.333 0.597 1.333 1.333v2.721c1.904 0.331 3.333 1.97 3.333 3.944 0 0 0 0.001 0 0.001v-0 6.667c0 2.209-1.791 4-4 4v0h-1.333c-2.209 0-4-1.791-4-4v0-6.667c0-0 0-0.001 0-0.001 0-1.974 1.429-3.613 3.309-3.941l0.024-0.003v-2.721c0-0.736 0.597-1.333 1.333-1.333v0zM22.667 9.333h-1.333c-0.736 0-1.333 0.597-1.333 1.333v0 6.667c0 0.736 0.597 1.333 1.333 1.333v0h1.333c0.736 0 1.333-0.597 1.333-1.333v0-6.667c0-0.736-0.597-1.333-1.333-1.333v0zM10 4c0.736 0 1.333 0.597 1.333 1.333v0 2.721c1.904 0.331 3.333 1.97 3.333 3.944 0 0 0 0.001 0 0.001v-0 12c0 2.209-1.791 4-4 4v0h-1.333c-2.209 0-4-1.791-4-4v0-12c0-0 0-0.001 0-0.001 0-1.974 1.429-3.613 3.309-3.941l0.024-0.003v-2.721c0-0.736 0.597-1.333 1.333-1.333v0zM10.667 10.667h-1.333c-0.736 0-1.333 0.597-1.333 1.333v0 12c0 0.736 0.597 1.333 1.333 1.333h1.333c0.736 0 1.333-0.597 1.333-1.333v0-12c0-0.736-0.597-1.333-1.333-1.333v0z" />',9:'<path fill="currentColor" d="M11.333 4c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 10.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-10.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM10.667 22.667h-1.333c-0.13 0-0.255-0.018-0.373-0.053l0.009 0.002 3.031-1.683v0.4c0 0.736-0.597 1.333-1.333 1.333v0zM8 10.667c0-0.736 0.597-1.333 1.333-1.333h1.333c0.13 0 0.255 0.018 0.373 0.053l-0.009-0.002-3.031 1.683v-0.4zM12 11.896v1.349l-4 2.4v-1.528l4-2.221zM8 20.104v-1.349l4-2.4v1.528l-4 2.221zM23.333 6.667c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333v0 2.721c-1.904 0.331-3.333 1.97-3.333 3.944 0 0 0 0.001 0 0.001v-0 6.667c0 0 0 0.001 0 0.001 0 1.974 1.429 3.613 3.309 3.941l0.024 0.003v2.721c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v0-2.721c1.904-0.331 3.333-1.97 3.333-3.944 0-0 0-0.001 0-0.001v0-6.667c0-0 0-0.001 0-0.001 0-1.974-1.429-3.613-3.309-3.941l-0.024-0.003v-2.721zM22.667 21.333h-1.333c-0.736 0-1.333-0.597-1.333-1.333v0-6.667c0-0.736 0.597-1.333 1.333-1.333v0h1.333c0.736 0 1.333 0.597 1.333 1.333v0 6.667c0 0.736-0.597 1.333-1.333 1.333v0z" />',10:'<path fill="currentColor" d="M14.448 6.667c0.523 0.006 0.974 0.312 1.187 0.755l0.003 0.008 3.74 7.904h-2.952l-2.027-4.285-1.151 2.3c-0.224 0.44-0.673 0.736-1.192 0.736-0.473 0-0.888-0.246-1.125-0.617l-0.003-0.005-0.204-0.324-1.2 2.196h-3.040l2.989-5.469c0.231-0.416 0.668-0.693 1.17-0.693 0.473 0 0.889 0.247 1.126 0.619l0.003 0.005 0.151 0.24 1.316-2.631c0.224-0.441 0.674-0.737 1.193-0.737 0.005 0 0.011 0 0.016 0h-0.001zM22.328 21.571l-1.057-2.237h-2.951l2.805 5.931c0.219 0.455 0.676 0.763 1.205 0.763 0.53 0 0.988-0.31 1.203-0.758l0.003-0.008 2.795-5.928h-2.948l-1.055 2.237zM4.303 19.333h3.040l-2.171 3.973c-0.231 0.416-0.668 0.694-1.17 0.694-0.737 0-1.334-0.597-1.334-1.334 0-0.235 0.061-0.455 0.167-0.647l-0.003 0.007 1.472-2.693zM25.271 15.333h2.947l0.991-2.099c0.080-0.166 0.127-0.362 0.127-0.568 0-0.737-0.597-1.334-1.334-1.334-0.53 0-0.988 0.309-1.203 0.758l-0.003 0.008-1.524 3.235zM5.197 16.267h-2.264v2.133h2.263v-2.133zM9.997 16.267h-2.393v2.133h2.392v-2.133zM14.797 16.267h-2.393v2.133h2.392v-2.133zM19.597 16.267h-2.392v2.133h2.392v-2.133zM24.397 16.267h-2.392v2.133h2.392v-2.133zM29.068 16.267h-2.263v2.133h2.261v-2.133z"/>',12:'<path fill="currentColor" d="M4.857 3h-0.928v26h9.286v-26h-8.357zM5.786 27.143v-22.286h5.572v22.286h-5.572zM19.714 6.714h-0.928v18.572h9.286v-18.572h-8.357zM20.643 23.428v-14.857h5.572v14.857h-5.572z" />',13:'<path stroke="currentColor" d="M12.429 6v20h7.143v-20h-7.143zM18.143 7.429h-4.286v17.143h4.286v-17.143zM22.429 17.429v8.571h7.143v-8.571h-7.143zM28.143 18.857h-4.286v5.714h4.286v-5.714zM2.429 13.143h7.143v12.857h-7.143v-12.857zM3.857 14.571h4.286v10h-4.286v-10z" />',14:`
        <g stroke="currentColor">
            <path d="M22.219 18.677l9.781-12.086-1.096-0.871-9.781 12.086c-0.471-0.251-1.030-0.399-1.623-0.399-0.78 0-1.501 0.255-2.083 0.687l0.009-0.007-3.106-2.839c0.174-0.402 0.275-0.871 0.275-1.363 0-1.94-1.573-3.513-3.513-3.513-0.003 0-0.006 0-0.009 0h0c-0.002 0-0.005 0-0.007 0-1.94 0-3.513 1.573-3.513 3.513s1.573 3.513 3.513 3.513c0.947 0 1.807-0.375 2.439-0.985l-0.001 0.001 2.979 2.698c-0.31 0.513-0.493 1.133-0.493 1.796 0 1.94 1.573 3.513 3.513 3.513s3.513-1.573 3.513-3.513c0-0.85-0.302-1.63-0.804-2.237l0.005 0.006zM11.074 15.993c1.164 0 2.108-0.944 2.108-2.108s-0.944-2.108-2.108-2.108v0c-1.164 0-2.108 0.944-2.108 2.108s0.944 2.108 2.108 2.108v0zM21.614 20.912c0 1.164-0.944 2.108-2.108 2.108s-2.108-0.944-2.108-2.108v0c0-1.164 0.944-2.108 2.108-2.108s2.108 0.944 2.108 2.108v0z" />
            <path d="M8.081 15.712c0.239 0.422 0.562 0.759 0.956 1.040l-7.968 9.528-1.068-0.899 8.081-9.669z" />
        </g>`,15:'<path fill="currentColor" d="M23.579 0h8.421v1.684h-6.737v21.895h-10.105v-11.789h-6.737v20.211h-8.421v-1.684h6.737v-20.21h10.105v11.789h6.737v-21.895z" />',16:'<path fill="currentColor"  d="M26.667 2v1.333h1.333v-1.333h-1.333zM26.667 4.667v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h1.333v1.333h-1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h-1.333zM25.333 6v-1.333h1.333v1.333h-1.333zM24 7.333v-1.333h1.333v1.333h-1.333zM22.667 8.667v-1.333h1.333v1.333h-1.333zM21.333 10v-1.333h1.333v1.333h-1.333zM20 11.333v-1.333h1.333v1.333h-1.333zM18.667 12.667v-1.333h1.333v1.333h-1.333zM17.333 12.667v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333zM17.333 12.667h1.333v1.333h-1.333v-1.333zM18.453 21.16l10-9.333-0.907-0.987-9.533 8.893-6.213-6.2-0.44-0.453-0.48 0.427-7.333 6.667 0.907 0.987 6.853-6.24 6.227 6.213 0.453 0.467 0.467-0.44zM5.333 28.667h-1.333v1.333h1.333v-1.333zM5.333 27.333h-1.333v-1.333h1.333v1.333zM6.667 27.333v1.333h-1.333v-1.333h1.333zM6.667 26h-1.333v-1.333h1.333v1.333zM8 26v1.333h-1.333v-1.333h1.333zM8 24.667h-1.333v-1.333h1.333v1.333zM9.333 24.667v1.333h-1.333v-1.333h1.333zM9.333 23.333h-1.333v-1.333h1.333v1.333zM10.667 23.333v1.333h-1.333v-1.333h1.333zM10.667 22h-1.333v-1.333h1.333v1.333zM12 22h-1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h-1.333v-1.333h1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v-1.333h-1.333v1.333h1.333v1.333zM12 22h1.333v1.333h-1.333v-1.333zM14.667 24.667v1.333h1.333v1.333h1.333v1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h1.333v-1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v1.333h-1.333v-1.333h-1.333v-1.333h-1.333zM14.667 24.667v-1.333h-1.333v1.333h1.333z" />',index:'<path stroke="currentColor" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="2" d="M26.795 21.614l-8.636 8.636M18.159 21.614l8.636 8.636M7.795 12.114h12.091M22.477 6.068c0-2.385-1.933-4.318-4.318-4.318s-4.318 1.933-4.318 4.318v0 19c0 2.385-1.933 4.318-4.318 4.318s-4.318-1.933-4.318-4.318v0" />',set:'<path fill="currentColor" d="M22.485 6.033c-0.234-0.404-0.664-0.672-1.157-0.673h-10.656c-0.477 0-0.92 0.256-1.157 0.673l-5.328 9.293c-0.24 0.417-0.24 0.931 0 1.347l5.328 9.293c0.239 0.417 0.68 0.673 1.157 0.673h10.656c0.477 0 0.92-0.256 1.157-0.673l5.328-9.293c0.24-0.417 0.24-0.931 0-1.347l-5.328-9.293zM7.2 4.687c0.702-1.213 1.993-2.017 3.472-2.020h10.656c1.433 0 2.757 0.769 3.473 2.020l5.328 9.293c0.338 0.58 0.538 1.277 0.538 2.020s-0.2 1.44-0.548 2.039l0.010-0.019-5.328 9.293c-0.702 1.214-1.994 2.018-3.473 2.020h-10.656c-1.479-0.003-2.77-0.807-3.462-2.001l-0.010-0.019-5.328-9.293c-0.338-0.58-0.538-1.277-0.538-2.020s0.2-1.44 0.548-2.039l-0.010 0.019 5.328-9.293zM13.301 15.973c0-1.487 1.197-2.693 2.673-2.693 1.477 0 2.675 1.207 2.675 2.693 0 1.488-1.197 2.693-2.675 2.693-1.478-0.006-2.673-1.205-2.673-2.684 0-0.003 0-0.007 0-0.010v0.001zM15.975 10.587c-2.953 0-5.348 2.412-5.348 5.387s2.395 5.387 5.348 5.387 5.348-2.412 5.348-5.387-2.395-5.387-5.347-5.387z" />',fullScreen:`
        <g fill="currentColor">
            <path d="M6.667 8c0-0.736 0.597-1.333 1.333-1.333v0h5.333c0.736 0 1.333 0.597 1.333 1.333s-0.597 1.333-1.333 1.333v0h-2.115l3.057 3.057c0.232 0.24 0.374 0.566 0.374 0.926 0 0.736-0.597 1.333-1.333 1.333-0.36 0-0.687-0.143-0.927-0.375l-3.057-3.057v2.115c0 0.736-0.597 1.333-1.333 1.333s-1.333-0.597-1.333-1.333v0-5.333zM24.94 24.947c-0.24 0.239-0.572 0.387-0.937 0.387-0.001 0-0.002 0-0.003 0h-5.333c-0.736 0-1.333-0.597-1.333-1.333s0.597-1.333 1.333-1.333v0h2.115l-3.057-3.057c-0.232-0.24-0.374-0.566-0.374-0.926 0-0.736 0.597-1.333 1.333-1.333 0.36 0 0.687 0.143 0.927 0.375l3.057 3.057v-2.115c0-0.736 0.597-1.333 1.333-1.333s1.333 0.597 1.333 1.333v0 5.333c0 0.001 0 0.002 0 0.003 0 0.366-0.148 0.697-0.387 0.937l0-0-0.007 0.005z" />
            <path d="M25.333 5.333c0.736 0 1.333 0.597 1.333 1.333v0 18.667c0 0.736-0.597 1.333-1.333 1.333h-18.667c-0.736 0-1.333-0.597-1.333-1.333v0-18.667c0-0.736 0.597-1.333 1.333-1.333h18.667zM6.667 2.667c-2.209 0-4 1.791-4 4v0 18.667c0 2.209 1.791 4 4 4v0h18.667c2.209 0 4-1.791 4-4v0-18.667c0-2.209-1.791-4-4-4v0h-18.667z" />
        </g>`,fullScreenClose:`
        <g fill="currentColor">
            <path d="M14.667 13.333c0 0.736-0.597 1.333-1.333 1.333h-5.333c-0 0-0 0-0 0-0.736 0-1.333-0.597-1.333-1.333s0.597-1.333 1.333-1.333c0 0 0 0 0 0h2.115l-3.057-3.057c-0.232-0.24-0.374-0.566-0.374-0.926 0-0.736 0.597-1.333 1.333-1.333 0.36 0 0.687 0.143 0.927 0.375l3.057 3.057v-2.115c0-0.736 0.597-1.333 1.333-1.333s1.333 0.597 1.333 1.333v0 5.333zM17.727 17.72c0.24-0.239 0.572-0.387 0.937-0.387 0.001 0 0.002 0 0.003 0h5.333c0 0 0 0 0 0 0.736 0 1.333 0.597 1.333 1.333s-0.597 1.333-1.333 1.333c-0 0-0 0-0 0h-2.115l3.057 3.057c0.232 0.24 0.374 0.566 0.374 0.926 0 0.736-0.597 1.333-1.333 1.333-0.36 0-0.687-0.143-0.927-0.375l-3.057-3.057v2.115c0 0 0 0 0 0 0 0.736-0.597 1.333-1.333 1.333s-1.333-0.597-1.333-1.333c0-0 0-0 0-0v0-5.333c0-0.001 0-0.002 0-0.003 0-0.366 0.148-0.697 0.387-0.937l-0 0 0.007-0.005z" />
            <path d="M25.333 5.333c0.736 0 1.333 0.597 1.333 1.333v0 18.667c0 0.736-0.597 1.333-1.333 1.333h-18.667c-0.736 0-1.333-0.597-1.333-1.333v0-18.667c0-0.736 0.597-1.333 1.333-1.333h18.667zM6.667 2.667c-2.209 0-4 1.791-4 4v0 18.667c0 2.209 1.791 4 4 4v0h18.667c2.209 0 4-1.791 4-4v0-18.667c0-2.209-1.791-4-4-4v0h-18.667z" />
        </g>
    `,photo:'<path fill="currentColor" d="M12.88 4c-1.479 0-2.77 0.803-3.462 1.997l-0.010 0.019-1.515 2.651h-1.227c-2.209 0-4 1.791-4 4v0 11.333c0 2.209 1.791 4 4 4v0h18.667c2.209 0 4-1.791 4-4v0-11.333c0-2.209-1.791-4-4-4v0h-1.227l-1.515-2.651c-0.702-1.213-1.993-2.016-3.472-2.016h-6.239zM11.723 7.339c0.234-0.404 0.665-0.672 1.158-0.672 0 0 0.001 0 0.001 0h6.237c0 0 0.001 0 0.001 0 0.493 0 0.924 0.268 1.154 0.666l0.003 0.006 1.899 3.323c0.234 0.404 0.664 0.672 1.157 0.672h2c0.736 0 1.333 0.597 1.333 1.333v0 11.333c0 0.736-0.597 1.333-1.333 1.333h-18.667c-0.736-0-1.333-0.597-1.333-1.333v-11.333c0-0.736 0.597-1.333 1.333-1.333h2c0.493-0 0.923-0.268 1.154-0.666l0.003-0.006 1.899-3.323zM16 24c3.682 0 6.667-2.985 6.667-6.667s-2.985-6.667-6.667-6.667v0c-3.682 0-6.667 2.985-6.667 6.667s2.985 6.667 6.667 6.667v0zM20 17.333c0 2.209-1.791 4-4 4s-4-1.791-4-4v0c0-2.209 1.791-4 4-4s4 1.791 4 4v0z" />',arrowDown:'<path fill="currentColor" d="M17.693 21.69l6.619-8.93c0.685-0.924 0.482-2.221-0.454-2.898-0.36-0.26-0.794-0.4-1.24-0.4h-13.238c-1.159 0-2.099 0.928-2.099 2.073 0 0.44 0.142 0.869 0.405 1.225l6.619 8.93c0.685 0.924 1.998 1.125 2.933 0.448 0.174-0.126 0.327-0.277 0.454-0.448z" />'};return(t,i)=>(j(),se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:r.width,height:r.height,fill:"none",innerHTML:r.icon&&e[r.icon]?e[r.icon]:""},null,8,rn))}}),nn={class:"dropdown-trigger"},on={key:0,class:"dropdown-popper"},an=mt({__name:"Dropdown",props:{showIcon:{type:Boolean,default:!1},manual:{type:Boolean,default:!1},trigger:{type:String,default:"hover"}},emits:["showChange"],setup(r,{expose:e,emit:t}){const i=r,n=t,o=typeof window<"u"?/Mobi|Android|iPhone/i.test(navigator.userAgent):!1,a=er(!1),s=er(null),l=Ie(()=>o||i.trigger==="click"),u=Ie(()=>l.value?"mousedown":"mouseenter"),c=Ie(()=>l.value?"":"mouseleave"),h={change(f){i.manual||a.value===f||(a.value=f,n("showChange",f))},show(){a.value=!0,n("showChange",!0)},hide(){a.value=!1,n("showChange",!1)},listenClick(f){var d;const v=f.target;a.value&&!((d=s.value)!=null&&d.contains(v))&&h.hide()}};return e({show:h.show,hide:h.hide}),ur(()=>{document.addEventListener("click",h.listenClick,!1)}),Wt(()=>{document.removeEventListener("click",h.listenClick,!1)}),(f,v)=>(j(),se("div",Ni({ref_key:"el",ref:s,class:["dropdown",{show:a.value}]},{[Pr(u.value)]:v[0]||(v[0]=d=>h.change(!0))},{[Pr(c.value)]:v[1]||(v[1]=d=>h.change(!1))}),[Fe("div",nn,[tr(f.$slots,"default",{},void 0,!0),r.showIcon?(j(),kt(Ye,{key:0,icon:"arrowDown",class:"icon-arrow-down",width:"12",height:"12"})):ut("",!0)]),f.$slots.dropdown?(j(),se("div",on,[tr(f.$slots,"dropdown",{},void 0,!0)])):ut("",!0)],16))}}),kr=Dt(an,[["__scopeId","data-v-ccb62fee"]]),k={types:{type:Array,default:()=>["simple","tv"]},type:{type:String,default:"simple"},libraryPath:{type:String,default:""},customCssUrl:{type:String,default:"theme.css"},storeKey:{type:String,default:Te.storeKey},exchange:{type:String,default:""},watermark:{type:String,defatult:""},theme:{type:String,default:Te.theme},lang:{type:String,default:Te.lang},showMa:{type:Boolean,default:!0},showVol:{type:Boolean,default:!0},interval:{type:String,default:Te.interval},intervals:{type:Array,default:()=>Te.intervals},selectedIntervals:{type:Array,default:()=>Te.showIntervals},graph:{type:Number,default:1},fullscreen:{type:Boolean,default:!1},symbol:{type:String,default:""},pricePrecision:{type:Number,default:4},quantityPrecision:{type:Number,default:4},loading:{type:Boolean,default:!0},loadingColor:{type:String,default:"#f8b200"},limitSize:{type:Number,default:1e3}},sn={type:k.type,theme:k.theme,lang:k.lang,interval:k.interval,intervals:k.intervals,selectedIntervals:k.selectedIntervals,graph:k.graph,fullscreen:k.fullscreen,loading:k.loading},ps={libraryPath:k.libraryPath,customCssUrl:k.customCssUrl,storeKey:k.storeKey,exchange:k.exchange,watermark:k.watermark,theme:k.theme,lang:k.lang,showMa:k.showMa,showVol:k.showVol,interval:k.interval,graph:k.graph,symbol:k.symbol,pricePrecision:k.pricePrecision,quantityPrecision:k.quantityPrecision,loading:k.loading,loadingColor:k.loadingColor,limitSize:k.limitSize,list:{type:Array,default:()=>[]},latestData:{type:Object,default:()=>null},loadMore:{type:Function,default:()=>{}}},gs={storeKey:k.storeKey,watermark:k.watermark,theme:k.theme,lang:k.lang,showMa:k.showMa,showVol:k.showVol,graph:k.graph,pricePrecision:k.pricePrecision,quantityPrecision:k.quantityPrecision,loading:k.loading,loadingColor:k.loadingColor,limitSize:k.limitSize,list:{type:Array,default:()=>[]},latestData:{type:Object,default:()=>null},loadMore:{type:Function,default:()=>{}}},ms={types:k.types,type:k.type,libraryPath:k.libraryPath,customCssUrl:k.customCssUrl,storeKey:k.storeKey,exchange:k.exchange,watermark:k.watermark,theme:k.theme,lang:k.lang,showMa:k.showMa,showVol:k.showVol,intervals:k.intervals,symbol:k.symbol,pricePrecision:k.pricePrecision,quantityPrecision:k.quantityPrecision,loading:k.loading,loadingColor:k.loadingColor,limitSize:k.limitSize,list:{type:Array,default:()=>[]},latestData:{type:Object,default:()=>null},loadMore:{type:Function,default:()=>{}}},ln={class:"dropdown-content"},un=["onClick"],cn=mt({__name:"GraphDropdown",props:{graph:k.graph,lang:k.lang,type:{type:String,default:"tv"}},emits:["selectGraph"],setup(r,{emit:e}){const t=r,i=e,n=Ie(()=>(Rt[t.lang]||Rt["en-US"]).type),o=Ie(()=>t.type==="simple"?Te.graphs.simple:Te.graphs.tv);function a(s){t.graph!==s&&i("selectGraph",s)}return o.value.includes(t.graph)||i("selectGraph",1),(s,l)=>(j(),se("ul",ln,[(j(!0),se(cr,null,hr(o.value,u=>(j(),se("li",{key:u,class:It({active:t.graph===u}),onClick:c=>a(u)},[Ae(Ye,{icon:String(u)},null,8,["icon"]),Wi(" "+ct(n.value[u]),1)],10,un))),128))]))}}),hn=Dt(cn,[["__scopeId","data-v-22a514ba"]]),dn={class:"dropdown-content"},vn={class:"operate"},fn=["onClick"],pn=mt({__name:"IntervalDropdown",props:{locale:{type:Object,default:()=>{}},selectedList:{type:Array,default:()=>[]},allList:{type:Array,default:()=>[]},interval:{type:String,default:""},selectInterval:{type:Function,default:()=>{}},editInterval:{type:Function,default:()=>{}},edit:{type:Boolean,default:!1}},emits:["update:edit"],setup(r,{emit:e}){const t=r,i=e,n=Xt({edits:new Set}),o=Ie(()=>t.edit?[...n.edits]:t.selectedList),a={select(s){t.edit?n.edits.has(s)?n.edits.delete(s):n.edits.add(s):t.interval!==s&&t.selectInterval(s)},changeType(){t.edit?(t.editInterval([...n.edits]),n.edits.clear()):n.edits=new Set(t.selectedList),i("update:edit",!t.edit)}};return(s,l)=>(j(),se("div",dn,[Fe("div",vn,[Fe("span",null,ct(r.locale.select_interval),1),Fe("button",{type:"button",onClick:l[0]||(l[0]=(...u)=>a.changeType&&a.changeType(...u))},ct(t.edit?r.locale.save:r.locale.edit),1)]),Fe("ul",null,[(j(!0),se(cr,null,hr(r.allList,u=>(j(),se("li",{key:u,class:It({selected:o.value.includes(u),active:r.interval===u}),onClick:c=>a.select(u)},ct(r.locale.interval_map[u]),11,fn))),128))])]))}}),gn=Dt(pn,[["__scopeId","data-v-57203988"]]),mn=["innerHTML"],_n=mt({__name:"Tooltip",props:{message:{type:String,default:""},placement:{type:String,default:"bottom"}},setup(r){const e=er(!1);return(t,i)=>(j(),se("div",{class:It(["tooltip",[r.placement]]),onMouseenter:i[0]||(i[0]=n=>e.value=!0),onMouseleave:i[1]||(i[1]=n=>e.value=!1)},[Ae(Xi,null,{default:lt(()=>[e.value&&r.message?(j(),se("div",{key:0,class:"tooltip-message",innerHTML:r.message},null,8,mn)):ut("",!0)]),_:1}),tr(t.$slots,"default",{},void 0,!0)],34))}}),yn=Dt(_n,[["__scopeId","data-v-44e2e038"]]),Sn=["onClick"],Cn={key:0,class:"label"},bn=mt({inheritAttrs:!1,__name:"Menu",props:sn,emits:["selectInterval","editInterval","showIndicator","selectGraph","set","screenshot","fullScreen"],setup(r,{emit:e}){const t=r,i=e,n=Xt({limit:t.selectedIntervals.length,interval_dropdown:null,grap_dropdown:null,menu_el:null,interval_el:null,operate_el:null,observe:null,edit_interval:!1}),o=Ie(()=>({...Rt[t.lang]||Rt[Te.lang],interval_map:{1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",720:"12h","1D":"1d","3D":"3d","1W":"1w","1M":"1M"}})),a=Ie(()=>{const u=t.selectedIntervals;return t.intervals.filter(h=>u.includes(h)).slice(0,n.limit)}),s=Ie(()=>a.value.includes(t.interval)?"":o.value.interval_map[t.interval]),l={selectInterval(u){t.interval===u||t.loading||i("selectInterval",u,!1)},editInterval(u){n.interval_dropdown&&n.interval_dropdown.hide(),i("editInterval",u)},intervalShowChangeHandle(u){!u&&n.edit_interval&&(n.edit_interval=!1)},selectGraph(u){t.graph!==u&&(n.grap_dropdown&&n.grap_dropdown.hide(),i("selectGraph",u))},observeMenu(){const u=new ResizeObserver(()=>{const c=n.menu_el.offsetWidth-8,h=n.operate_el.offsetWidth,f=n.interval_el.offsetWidth,v=h+f,d=()=>{v>c&&n.limit>2?(n.limit-=1,v>c&&n.limit>2&&d()):c>v+42&&n.limit<t.selectedIntervals.length&&(n.limit+=1)};d()});u.observe(n.interval_el),u.observe(n.operate_el),u.observe(n.menu_el),n.observe=u}};return ur(()=>{l.observeMenu()}),Wt(()=>{var u;(u=n.observe)==null||u.disconnect()}),(u,c)=>(j(),se("section",{ref:h=>n.menu_el=h,class:It(["kline-menu",[`is-${t.theme}`]])},[Fe("div",{ref:h=>n.interval_el=h,class:"kline-menu-list"},[Fe("ul",null,[(j(!0),se(cr,null,hr(a.value,h=>(j(),se("li",{key:h,class:It(["item",{active:h===t.interval}]),onClick:f=>l.selectInterval(h)},ct(o.value.interval_map[h]),11,Sn))),128))]),Ae(kr,{ref:h=>n.interval_dropdown=h,class:"item","show-icon":"",manual:n.edit_interval,onShowChange:l.intervalShowChangeHandle},{dropdown:lt(()=>[Ae(gn,{edit:n.edit_interval,"onUpdate:edit":c[0]||(c[0]=h=>n.edit_interval=h),locale:o.value,"selected-list":t.selectedIntervals,"all-list":t.intervals,interval:t.interval,"select-interval":l.selectInterval,"edit-interval":l.editInterval},null,8,["edit","locale","selected-list","all-list","interval","select-interval","edit-interval"])]),default:lt(()=>[s.value?(j(),se("span",Cn,ct(s.value),1)):ut("",!0)]),_:1},8,["manual","onShowChange"]),t.type==="tv"?(j(),kt(yn,{key:0,class:"item",message:o.value.indicator,placement:"bottom",onClick:c[1]||(c[1]=h=>i("showIndicator"))},{default:lt(()=>[Ae(Ye,{icon:"index"})]),_:1},8,["message"])):ut("",!0),Ae(kr,{ref:h=>n.grap_dropdown=h,class:"item","show-icon":""},{dropdown:lt(()=>[Ae(hn,{graph:t.graph,lang:t.lang,type:u.$props.type,onSelectGraph:l.selectGraph},null,8,["graph","lang","type","onSelectGraph"])]),default:lt(()=>[Ae(Ye,{icon:String(t.graph)},null,8,["icon"])]),_:1},512)],512),Fe("div",{ref:h=>n.operate_el=h,class:"operate-list"},[t.type==="tv"?(j(),se("span",{key:0,class:"item",onClick:c[2]||(c[2]=h=>i("set"))},[Ae(Ye,{icon:"set"})])):ut("",!0),Fe("span",{class:"item",onClick:c[3]||(c[3]=h=>i("screenshot"))},[Ae(Ye,{icon:"photo"})]),Fe("span",{class:"item",onClick:c[4]||(c[4]=h=>i("fullScreen",t.fullscreen))},[t.fullscreen?(j(),kt(Ye,{key:0,icon:"fullScreenClose"})):(j(),kt(Ye,{key:1,icon:"fullScreen"}))])],512)],2))}}),_s=Dt(bn,[["__scopeId","data-v-55f58a08"]]);/**
     * @license
     * KLineChart v9.8.10
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var ir=function(r,e){return ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},ir(r,e)};function N(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ir(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var B=function(){return B=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},B.apply(this,arguments)};function dt(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(i.next(c))}catch(h){a(h)}}function l(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((i=i.apply(r,[])).next())})}function vt(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(i=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,n=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],n=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function rt(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,o=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o}function ri(r,e,t){if(arguments.length===2)for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return r.concat(o||Array.prototype.slice.call(e))}var R;(function(r){r.Dashed="dashed",r.Solid="solid"})(R||(R={}));var O;(function(r){r.Stroke="stroke",r.Fill="fill",r.StrokeFill="stroke_fill"})(O||(O={}));var je;(function(r){r.Always="always",r.FollowCross="follow_cross",r.None="none"})(je||(je={}));var me;(function(r){r.Standard="standard",r.Rect="rect"})(me||(me={}));var Et;(function(r){r.Left="left",r.Middle="middle",r.Right="right"})(Et||(Et={}));var zt;(function(r){r.Fixed="fixed",r.Pointer="pointer"})(zt||(zt={}));var de;(function(r){r.CandleSolid="candle_solid",r.CandleStroke="candle_stroke",r.CandleUpStroke="candle_up_stroke",r.CandleDownStroke="candle_down_stroke",r.Ohlc="ohlc",r.Area="area"})(de||(de={}));var ze;(function(r){r.Left="left",r.Right="right"})(ze||(ze={}));var ee;(function(r){r.Normal="normal",r.Percentage="percentage",r.Log="log"})(ee||(ee={}));var Mt="#F92855",Gt="rgba(249, 40, 85, .7)",Tt="#2DC08E",jt="rgba(45, 192, 142, .7)",Qe="#888888",Ht="#FFFFFF",he="#1677FF",et="#76808F",nr="#DDDDDD";function ft(r){return"rgba(22, 119, 255, ".concat(r,")")}function wn(){function r(){return{show:!0,size:1,color:"#EDEDED",style:R.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:r(),vertical:r()}}function En(){var r={show:!0,color:et,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:de.CandleSolid,bar:{upColor:Tt,downColor:Mt,noChangeColor:Qe,upBorderColor:Tt,downBorderColor:Mt,noChangeBorderColor:Qe,upWickColor:Tt,downWickColor:Mt,noChangeWickColor:Qe},area:{lineSize:2,lineColor:he,smooth:!1,value:"close",backgroundColor:[{offset:0,color:ft(.01)},{offset:1,color:ft(.2)}],point:{show:!0,color:he,radius:4,rippleColor:ft(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:B({},r),low:B({},r),last:{show:!0,upColor:Tt,downColor:Mt,noChangeColor:Qe,line:{show:!0,style:R.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:O.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:R.Solid,borderSize:0,borderDashedValue:[2,2],color:Ht,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:je.Always,showType:me.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:zt.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:et,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function xn(){var r=["#FF9600","#935EBD",he,"#E11D74","#01C5C4"].map(function(e){return{style:R.Solid,smooth:!1,size:1,dashedValue:[2,2],color:e}});return{ohlc:{upColor:jt,downColor:Gt,noChangeColor:Qe},bars:[{style:O.Fill,borderStyle:R.Solid,borderSize:1,borderDashedValue:[2,2],upColor:jt,downColor:Gt,noChangeColor:Qe}],lines:r,circles:[{style:O.Fill,borderStyle:R.Solid,borderSize:1,borderDashedValue:[2,2],upColor:jt,downColor:Gt,noChangeColor:Qe}],lastValueMark:{show:!1,text:{show:!1,style:O.Fill,color:Ht,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:R.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:je.Always,showType:me.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:et,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function ii(){return{show:!0,size:"auto",axisLine:{show:!0,color:nr,size:1},tickText:{show:!0,color:et,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:nr}}}function In(){var r=ii();return r.type=ee.Normal,r.position=ze.Right,r.inside=!1,r.reverse=!1,r}function Pn(){function r(){return{show:!0,line:{show:!0,style:R.Dashed,dashedValue:[4,2],size:1,color:et},text:{show:!0,style:O.Fill,color:Ht,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:R.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:et,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:et}}}return{show:!0,horizontal:r(),vertical:r()}}function Dn(){var r=ft(.35),e=ft(.25);function t(){return{style:O.Fill,color:Ht,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:R.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:he,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:he}}return{point:{color:he,borderColor:r,borderSize:1,radius:5,activeColor:he,activeBorderColor:r,activeBorderSize:3,activeRadius:5},line:{style:R.Solid,smooth:!1,color:he,size:1,dashedValue:[2,2]},rect:{style:O.Fill,color:e,borderColor:he,borderSize:1,borderRadius:0,borderStyle:R.Solid,borderDashedValue:[2,2]},polygon:{style:O.Fill,color:he,borderColor:he,borderSize:1,borderStyle:R.Solid,borderDashedValue:[2,2]},circle:{style:O.Fill,color:e,borderColor:he,borderSize:1,borderStyle:R.Solid,borderDashedValue:[2,2]},arc:{style:R.Solid,color:he,size:1,dashedValue:[2,2]},text:t(),rectText:t()}}function An(){return{size:1,color:nr,fill:!0,activeBackgroundColor:ft(.08)}}function Mn(){return{grid:wn(),candle:En(),indicator:xn(),xAxis:ii(),yAxis:In(),separator:An(),crosshair:Pn(),overlay:Dn()}}function Se(r,e){if(!(!ke(r)&&!ke(e))){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=r[t],n=e[t];ke(n)&&ke(i)?Se(i,n):P(e[t])&&(r[t]=Pt(e[t]))}}}function Pt(r){if(!ke(r))return r;var e;xe(r)?e=[]:e={};for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var i=r[t];ke(i)?e[t]=Pt(i):e[t]=i}return e}function xe(r){return Object.prototype.toString.call(r)==="[object Array]"}function Ve(r){return typeof r=="function"}function ke(r){return typeof r=="object"&&P(r)}function F(r){return typeof r=="number"&&!isNaN(r)}function P(r){return r!=null}function tt(r){return typeof r=="boolean"}function V(r){return typeof r=="string"}var Tn=/\\(\\)?/g,Fn=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function ne(r,e,t){if(P(r)){var i=[];e.replace(Fn,function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=s;return P(l[1])?c=l[2].replace(Tn,"$1"):P(l[0])&&(c=l[0].trim()),i.push(c),""});for(var n=r,o=0,a=i.length;P(n)&&o<a;)n=n==null?void 0:n[i[o++]];return P(n)?n:t??"--"}return t??"--"}function kn(r,e,t){var i={};return r.formatToParts(new Date(e)).forEach(function(n){var o=n.type,a=n.value;switch(o){case"year":{i.YYYY=a;break}case"month":{i.MM=a;break}case"day":{i.DD=a;break}case"hour":{i.HH=a==="24"?"00":a;break}case"minute":{i.mm=a;break}case"second":{i.ss=a;break}}}),t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return i[n]})}function Z(r,e){var t=+r;return F(t)?t.toFixed(e??2):"".concat(r)}function Bn(r){var e=+r;if(F(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(r)}function te(r,e){var t="".concat(r);if(e.length===0)return t;if(t.includes(".")){var i=t.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)}),".").concat(i[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)})}function ie(r,e){var t="".concat(r),i=new RegExp("\\.0{"+e+",}[1-9][0-9]*$");if(i.test(t)){var n=t.split("."),o=n[n.length-1],a=o.match(/0*/);if(P(a)){var s=a[0].length;return n[n.length-1]=o.replace(/0*/,"0{".concat(s,"}")),n.join(".")}}return t}var Ct;function Ge(r){var e,t,i;return(i=(t=(e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&i!==void 0?i:1}function it(r,e,t){return"".concat(e??"normal"," ").concat(r??12,"px ").concat(t??"Helvetica Neue")}function Vt(r,e,t,i){if(!P(Ct)){var n=document.createElement("canvas"),o=Ge(n);Ct=n.getContext("2d"),Ct.scale(o,o)}return Ct.font=it(e,t,i),Math.round(Ct.measureText(r).width)}var ye;(function(r){r.OnDataReady="onDataReady",r.OnZoom="onZoom",r.OnScroll="onScroll",r.OnVisibleRangeChange="onVisibleRangeChange",r.OnTooltipIconClick="onTooltipIconClick",r.OnCrosshairChange="onCrosshairChange",r.OnCandleBarClick="onCandleBarClick",r.OnPaneDrag="onPaneDrag"})(ye||(ye={}));var Rn=function(){function r(){this._callbacks=[]}return r.prototype.subscribe=function(e){var t,i=(t=this._callbacks.indexOf(e))!==null&&t!==void 0?t:-1;i<0&&this._callbacks.push(e)},r.prototype.unsubscribe=function(e){var t;if(Ve(e)){var i=(t=this._callbacks.indexOf(e))!==null&&t!==void 0?t:-1;i>-1&&this._callbacks.splice(i,1)}else this._callbacks=[]},r.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},r.prototype.isEmpty=function(){return this._callbacks.length===0},r}(),ve;(function(r){r.Normal="normal",r.Price="price",r.Volume="volume"})(ve||(ve={}));function vr(r,e,t,i,n){var o=e.result,a=e.figures,s=e.styles,l=ne(s,"circles",i.circles),u=l.length,c=ne(s,"bars",i.bars),h=c.length,f=ne(s,"lines",i.lines),v=f.length,d=0,p=0,g=0,m,_=0;a.forEach(function(S){var y;switch(S.type){case"circle":{_=d;var C=l[d%u];m=B(B({},C),{color:C.noChangeColor}),d++;break}case"bar":{_=p;var w=c[p%h];m=B(B({},w),{color:w.noChangeColor}),p++;break}case"line":{_=g,m=f[g%v],g++;break}}if(P(m)){var b={prev:{kLineData:r[t-1],indicatorData:o[t-1]},current:{kLineData:r[t],indicatorData:o[t]},next:{kLineData:r[t+1],indicatorData:o[t+1]}},x=(y=S.styles)===null||y===void 0?void 0:y.call(S,b,e,i);n(S,B(B({},m),x),_)}})}var Ln=function(){function r(e){this.result=[],this._precisionFlag=!1;var t=e.name,i=e.shortName,n=e.series,o=e.calcParams,a=e.figures,s=e.precision,l=e.shouldOhlc,u=e.shouldFormatBigNumber,c=e.visible,h=e.zLevel,f=e.minValue,v=e.maxValue,d=e.styles,p=e.extendData,g=e.regenerateFigures,m=e.createTooltipDataSource,_=e.draw;this.name=t,this.shortName=i??t,this.series=n??ve.Normal,this.precision=s??4,this.calcParams=o??[],this.figures=a??[],this.shouldOhlc=l??!1,this.shouldFormatBigNumber=u??!1,this.visible=c??!0,this.zLevel=h??0,this.minValue=f??null,this.maxValue=v??null,this.styles=Pt(d??{}),this.extendData=p,this.regenerateFigures=g??null,this.createTooltipDataSource=m??null,this.draw=_??null}return r.prototype.setShortName=function(e){return this.shortName!==e?(this.shortName=e,!0):!1},r.prototype.setSeries=function(e){return this.series!==e?(this.series=e,!0):!1},r.prototype.setPrecision=function(e,t){var i=t??!1,n=Math.floor(e);return n!==this.precision&&e>=0&&(!i||i&&!this._precisionFlag)?(this.precision=n,i||(this._precisionFlag=!0),!0):!1},r.prototype.setCalcParams=function(e){var t,i;return this.calcParams=e,this.figures=(i=(t=this.regenerateFigures)===null||t===void 0?void 0:t.call(this,e))!==null&&i!==void 0?i:this.figures,!0},r.prototype.setShouldOhlc=function(e){return this.shouldOhlc!==e?(this.shouldOhlc=e,!0):!1},r.prototype.setShouldFormatBigNumber=function(e){return this.shouldFormatBigNumber!==e?(this.shouldFormatBigNumber=e,!0):!1},r.prototype.setVisible=function(e){return this.visible!==e?(this.visible=e,!0):!1},r.prototype.setZLevel=function(e){return this.zLevel!==e?(this.zLevel=e,!0):!1},r.prototype.setStyles=function(e){return Se(this.styles,e),!0},r.prototype.setExtendData=function(e){return this.extendData!==e?(this.extendData=e,!0):!1},r.prototype.setFigures=function(e){return this.figures!==e?(this.figures=e,!0):!1},r.prototype.setMinValue=function(e){return this.minValue!==e?(this.minValue=e,!0):!1},r.prototype.setMaxValue=function(e){return this.maxValue!==e?(this.maxValue=e,!0):!1},r.prototype.setRegenerateFigures=function(e){return this.regenerateFigures!==e?(this.regenerateFigures=e,!0):!1},r.prototype.setCreateTooltipDataSource=function(e){return this.createTooltipDataSource!==e?(this.createTooltipDataSource=e,!0):!1},r.prototype.setDraw=function(e){return this.draw!==e?(this.draw=e,!0):!1},r.prototype.calcIndicator=function(e){return dt(this,void 0,void 0,function(){var t;return vt(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=i.sent(),this.result=t,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},r.extend=function(e){var t=function(i){N(n,i);function n(){return i.call(this,e)||this}return n.prototype.calc=function(o,a){return e.calc(o,a)},n}(r);return t},r}(),pt;(function(r){r.Normal="normal",r.WeakMagnet="weak_magnet",r.StrongMagnet="strong_magnet"})(pt||(pt={}));function zn(){return["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]}var Br=1,bt=-1,Vn="overlay_",st="overlay_figure_",On=Number.MAX_SAFE_INTEGER,Nn=function(){function r(e){this.currentStep=Br,this.points=[],this._prevPressedPoint=null,this._prevPressedPoints=[];var t=e.mode,i=e.modeSensitivity,n=e.extendData,o=e.styles,a=e.name,s=e.totalStep,l=e.lock,u=e.visible,c=e.zLevel,h=e.needDefaultPointFigure,f=e.needDefaultXAxisFigure,v=e.needDefaultYAxisFigure,d=e.createPointFigures,p=e.createXAxisFigures,g=e.createYAxisFigures,m=e.performEventPressedMove,_=e.performEventMoveForDrawing,S=e.onDrawStart,y=e.onDrawing,C=e.onDrawEnd,w=e.onClick,b=e.onDoubleClick,x=e.onRightClick,E=e.onPressedMoveStart,I=e.onPressedMoving,D=e.onPressedMoveEnd,A=e.onMouseEnter,M=e.onMouseLeave,T=e.onRemoved,z=e.onSelected,L=e.onDeselected;this.name=a,this.totalStep=!F(s)||s<2?1:s,this.lock=l??!1,this.visible=u??!0,this.zLevel=c??0,this.needDefaultPointFigure=h??!1,this.needDefaultXAxisFigure=f??!1,this.needDefaultYAxisFigure=v??!1,this.mode=t??pt.Normal,this.modeSensitivity=i??8,this.extendData=n,this.styles=Pt(o??{}),this.createPointFigures=d??null,this.createXAxisFigures=p??null,this.createYAxisFigures=g??null,this.performEventPressedMove=m??null,this.performEventMoveForDrawing=_??null,this.onDrawStart=S??null,this.onDrawing=y??null,this.onDrawEnd=C??null,this.onClick=w??null,this.onDoubleClick=b??null,this.onRightClick=x??null,this.onPressedMoveStart=E??null,this.onPressedMoving=I??null,this.onPressedMoveEnd=D??null,this.onMouseEnter=A??null,this.onMouseLeave=M??null,this.onRemoved=T??null,this.onSelected=z??null,this.onDeselected=L??null}return r.prototype.setId=function(e){return V(this.id)?!1:(this.id=e,!0)},r.prototype.setGroupId=function(e){return V(this.groupId)?!1:(this.groupId=e,!0)},r.prototype.setPaneId=function(e){this.paneId=e},r.prototype.setExtendData=function(e){return e!==this.extendData?(this.extendData=e,!0):!1},r.prototype.setStyles=function(e){return Se(this.styles,e),!0},r.prototype.setPoints=function(e){if(e.length>0){var t=void 0;if(this.points=ri([],nt(e),!1),e.length>=this.totalStep-1?(this.currentStep=bt,t=this.totalStep-1):(this.currentStep=e.length+1,t=e.length),this.performEventMoveForDrawing!==null)for(var i=0;i<t;i++)this.performEventMoveForDrawing({currentStep:i+2,mode:this.mode,points:this.points,performPointIndex:i,performPoint:this.points[i]});return this.currentStep===bt&&this.performEventPressedMove!==null&&this.performEventPressedMove({currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}),!0}return!1},r.prototype.setLock=function(e){return this.lock!==e?(this.lock=e,!0):!1},r.prototype.setVisible=function(e){return this.visible!==e?(this.visible=e,!0):!1},r.prototype.setZLevel=function(e){return this.zLevel!==e?(this.zLevel=e,!0):!1},r.prototype.setMode=function(e){return this.mode!==e?(this.mode=e,!0):!1},r.prototype.setModeSensitivity=function(e){return this.modeSensitivity!==e?(this.modeSensitivity=e,!0):!1},r.prototype.setOnDrawStartCallback=function(e){return this.onDrawStart!==e?(this.onDrawStart=e,!0):!1},r.prototype.setOnDrawingCallback=function(e){return this.onDrawing!==e?(this.onDrawing=e,!0):!1},r.prototype.setOnDrawEndCallback=function(e){return this.onDrawEnd!==e?(this.onDrawEnd=e,!0):!1},r.prototype.setOnClickCallback=function(e){return this.onClick!==e?(this.onClick=e,!0):!1},r.prototype.setOnDoubleClickCallback=function(e){return this.onDoubleClick!==e?(this.onDoubleClick=e,!0):!1},r.prototype.setOnRightClickCallback=function(e){return this.onRightClick!==e?(this.onRightClick=e,!0):!1},r.prototype.setOnPressedMoveStartCallback=function(e){return this.onPressedMoveStart!==e?(this.onPressedMoveStart=e,!0):!1},r.prototype.setOnPressedMovingCallback=function(e){return this.onPressedMoving!==e?(this.onPressedMoving=e,!0):!1},r.prototype.setOnPressedMoveEndCallback=function(e){return this.onPressedMoveEnd!==e?(this.onPressedMoveEnd=e,!0):!1},r.prototype.setOnMouseEnterCallback=function(e){return this.onMouseEnter!==e?(this.onMouseEnter=e,!0):!1},r.prototype.setOnMouseLeaveCallback=function(e){return this.onMouseLeave!==e?(this.onMouseLeave=e,!0):!1},r.prototype.setOnRemovedCallback=function(e){return this.onRemoved!==e?(this.onRemoved=e,!0):!1},r.prototype.setOnSelectedCallback=function(e){return this.onSelected!==e?(this.onSelected=e,!0):!1},r.prototype.setOnDeselectedCallback=function(e){return this.onDeselected!==e?(this.onDeselected=e,!0):!1},r.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=bt:this.currentStep++},r.prototype.forceComplete=function(){this.currentStep=bt},r.prototype.isDrawing=function(){return this.currentStep!==bt},r.prototype.isStart=function(){return this.currentStep===Br},r.prototype.eventMoveForDrawing=function(e){var t,i=this.currentStep-1,n={};F(e.timestamp)&&(n.timestamp=e.timestamp),F(e.dataIndex)&&(n.dataIndex=e.dataIndex),F(e.value)&&(n.value=e.value),this.points[i]=n,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},r.prototype.eventPressedPointMove=function(e,t){var i;F(e.dataIndex)&&(this.points[t].dataIndex=e.dataIndex,this.points[t].timestamp=e.timestamp),F(e.value)&&(this.points[t].value=e.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},r.prototype.startPressedMove=function(e){this._prevPressedPoint=B({},e),this._prevPressedPoints=Pt(this.points)},r.prototype.eventPressedOtherMove=function(e,t){if(this._prevPressedPoint!==null){var i;F(e.dataIndex)&&F(this._prevPressedPoint.dataIndex)&&(i=e.dataIndex-this._prevPressedPoint.dataIndex);var n;F(e.value)&&F(this._prevPressedPoint.value)&&(n=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var a;F(o.timestamp)&&(o.dataIndex=t.timestampToDataIndex(o.timestamp));var s=B({},o);return F(i)&&F(o.dataIndex)&&(s.dataIndex=o.dataIndex+i,s.timestamp=(a=t.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),F(n)&&F(o.value)&&(s.value=o.value+n),s})}},r.extend=function(e){var t=function(i){N(n,i);function n(){return i.call(this,e)||this}return n}(r);return t},r}(),ae;(function(r){r[r.Tooltip=0]="Tooltip",r[r.Crosshair=1]="Crosshair",r[r.XAxis=2]="XAxis"})(ae||(ae={}));function Wn(){return{formatDate:kn,formatBigNumber:Bn}}var Xn="en-US",Kt=-1;function Ot(r){return Ve(window.requestAnimationFrame)?window.requestAnimationFrame(r):window.setTimeout(r,20)}function Rr(r){Ve(window.cancelAnimationFrame)?window.cancelAnimationFrame(r):window.clearTimeout(r)}var or=function(){function r(e){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Se(this._options,e)}return r.prototype._loop=function(){var e=this;this._running=!0;var t=function(){var i;if(e._running){var n=new Date().getTime()-e._time;n<e._options.duration?((i=e._doFrameCallback)===null||i===void 0||i.call(e,n),Ot(t)):(e.stop(),e._currentIterationCount++,e._currentIterationCount<e._options.iterationCount&&e.start())}};Ot(t)},r.prototype.doFrame=function(e){return this._doFrameCallback=e,this},r.prototype.setDuration=function(e){return this._options.duration=e,this},r.prototype.setIterationCount=function(e){return this._options.iterationCount=e,this},r.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},r.prototype.stop=function(){var e;this._running&&((e=this._doFrameCallback)===null||e===void 0||e.call(this,this._options.duration)),this._running=!1},r}(),qt=1,Lr=new Date().getTime();function ni(r){var e=new Date().getTime();return e===Lr?++qt:qt=1,Lr=e,"".concat(r??"").concat(e,"_").concat(qt)}function Oe(r,e){var t,i=document.createElement(r),n=e??{};for(var o in n)i.style[o]=(t=n[o])!==null&&t!==void 0?t:"";return i}function ar(r,e,t){var i=0,n=0;for(n=r.length-1;i!==n;){var o=Math.floor((n+i)/2),a=n-i,s=r[o][e];if(t===r[i][e])return i;if(t===r[n][e])return n;if(t===s)return o;if(t>s?i=o:n=o,a<=2)break}return i}function Hn(r){var e=Math.floor(wt(r)),t=Je(e),i=r/t,n=0;return i<1.5?n=1:i<2.5?n=2:i<3.5?n=3:i<4.5?n=4:i<5.5?n=5:i<6.5?n=6:n=8,r=n*t,e>=-20?+r.toFixed(e<0?-e:0):r}function zr(r,e){e==null&&(e=10),e=Math.min(Math.max(0,e),20);var t=(+r).toFixed(e);return+t}function Un(r){var e=r.toString(),t=e.indexOf("e");if(t>0){var i=+e.slice(t+1);return i<0?-i:0}else{var n=e.indexOf(".");return n<0?0:e.length-1-n}}function oi(r,e,t){var i=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];return r.forEach(function(n){var o,a;i[0]=Math.max((o=n[e])!==null&&o!==void 0?o:n,i[0]),i[1]=Math.min((a=n[t])!==null&&a!==void 0?a:n,i[1])}),i}function wt(r){return Math.log(r)/Math.log(10)}function Je(r){return Math.pow(10,r)}var _e;(function(r){r.Init="init",r.Forward="forward",r.Backward="backward"})(_e||(_e={}));function Vr(){return{from:0,to:0,realFrom:0,realTo:0}}var Or={MIN:1,MAX:50},$n=8,Yn=80,Gn=.88,sr=10,jn=function(){function r(e){this._dateTimeFormat=this._buildDateTimeFormat(),this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=$n,this._offsetRightDistance=Yn,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=Vr(),this._chartStore=e,this._gapBarSpace=this._calcGapBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace}return r.prototype._calcGapBarSpace=function(){var e;return this._barSpace>3?e=Math.floor(this._barSpace*Gn):(e=Math.floor(this._barSpace),e===this._barSpace&&e--),e%2===0&&e--,e=Math.max(1,e),e},r.prototype.adjustVisibleRange=function(){var e,t,i=this._chartStore.getDataList(),n=i.length,o=this._totalBarSpace/this._barSpace,a,s;this._scrollLimitRole===1?(a=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,s=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(a=this._minVisibleBarCount.left,s=this._minVisibleBarCount.right),a=Math.max(0,a),s=Math.max(0,s);var l=o-Math.min(a,n);this._lastBarRightSideDiffBarCount>l&&(this._lastBarRightSideDiffBarCount=l);var u=-n+Math.min(s,n);this._lastBarRightSideDiffBarCount<u&&(this._lastBarRightSideDiffBarCount=u);var c=Math.round(this._lastBarRightSideDiffBarCount+n+.5),h=c;c>n&&(c=n);var f=Math.round(c-o)-1;f<0&&(f=0);var v=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-o)-1:f;if(this._visibleRange={from:f,to:c,realFrom:v,realTo:h},this._chartStore.getActionStore().execute(ye.OnVisibleRangeChange,this._visibleRange),this._chartStore.adjustVisibleDataList(),f===0){var d=i[0];this._chartStore.executeLoadMoreCallback((e=d==null?void 0:d.timestamp)!==null&&e!==void 0?e:null),this._chartStore.executeLoadDataCallback({type:_e.Forward,data:d??null})}c===n&&this._chartStore.executeLoadDataCallback({type:_e.Backward,data:(t=i[n-1])!==null&&t!==void 0?t:null})},r.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},r.prototype._buildDateTimeFormat=function(e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};V(e)&&(t.timeZone=e);var i=null;try{i=new Intl.DateTimeFormat("en",t)}catch{}return i},r.prototype.setTimezone=function(e){var t=this._buildDateTimeFormat(e);t!==null&&(this._dateTimeFormat=t)},r.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},r.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},r.prototype.setBarSpace=function(e,t){e<Or.MIN||e>Or.MAX||this._barSpace===e||(this._barSpace=e,this._gapBarSpace=this._calcGapBarSpace(),t==null||t(),this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0))},r.prototype.setTotalBarSpace=function(e){return this._totalBarSpace!==e&&(this._totalBarSpace=e,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0)),this},r.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,e):e,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(t??!1)&&(this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0)),this},r.prototype.resetOffsetRightDistance=function(){this.setOffsetRightDistance(this._offsetRightDistance)},r.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},r.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},r.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},r.prototype.setLastBarRightSideDiffBarCount=function(e){return this._lastBarRightSideDiffBarCount=e,this},r.prototype.setMaxOffsetLeftDistance=function(e){return this._scrollLimitRole=1,this._maxOffsetDistance.left=e,this},r.prototype.setMaxOffsetRightDistance=function(e){return this._scrollLimitRole=1,this._maxOffsetDistance.right=e,this},r.prototype.setLeftMinVisibleBarCount=function(e){return this._scrollLimitRole=0,this._minVisibleBarCount.left=e,this},r.prototype.setRightMinVisibleBarCount=function(e){return this._scrollLimitRole=0,this._minVisibleBarCount.right=e,this},r.prototype.getVisibleRange=function(){return this._visibleRange},r.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},r.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-t,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0);var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this._chartStore.getActionStore().execute(ye.OnScroll,{distance:n})}},r.prototype.getDataByDataIndex=function(e){var t;return(t=this._chartStore.getDataList()[e])!==null&&t!==void 0?t:null},r.prototype.coordinateToFloatIndex=function(e){var t=this._chartStore.getDataList().length,i=(this._totalBarSpace-e)/this._barSpace,n=t+this._lastBarRightSideDiffBarCount-i;return Math.round(n*1e6)/1e6},r.prototype.dataIndexToTimestamp=function(e){var t,i=this.getDataByDataIndex(e);return(t=i==null?void 0:i.timestamp)!==null&&t!==void 0?t:null},r.prototype.timestampToDataIndex=function(e){var t=this._chartStore.getDataList();return t.length===0?0:ar(t,"timestamp",e)},r.prototype.dataIndexToCoordinate=function(e){var t=this._chartStore.getDataList().length,i=t+this._lastBarRightSideDiffBarCount-e;return Math.floor(this._totalBarSpace-(i-.5)*this._barSpace)},r.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},r.prototype.zoom=function(e,t){var i=this,n;if(this._zoomEnabled){var o=t??null;if(!F(o==null?void 0:o.x)){var a=this._chartStore.getTooltipStore().getCrosshair();o={x:(n=a==null?void 0:a.x)!==null&&n!==void 0?n:this._totalBarSpace/2}}var s=o.x,l=this.coordinateToFloatIndex(s),u=this._barSpace,c=this._barSpace+e*(this._barSpace/sr);this.setBarSpace(c,function(){i._lastBarRightSideDiffBarCount+=l-i.coordinateToFloatIndex(s)});var h=this._barSpace/u;h!==1&&this._chartStore.getActionStore().execute(ye.OnZoom,{scale:h})}},r.prototype.setZoomEnabled=function(e){return this._zoomEnabled=e,this},r.prototype.getZoomEnabled=function(){return this._zoomEnabled},r.prototype.setScrollEnabled=function(e){return this._scrollEnabled=e,this},r.prototype.getScrollEnabled=function(){return this._scrollEnabled},r.prototype.clear=function(){this._visibleRange=Vr()},r}(),Kn={name:"AVP",shortName:"AVP",series:ve.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(r){var e=0,t=0;return r.map(function(i){var n,o,a={},s=(n=i==null?void 0:i.turnover)!==null&&n!==void 0?n:0,l=(o=i==null?void 0:i.volume)!==null&&o!==void 0?o:0;return e+=s,t+=l,t!==0&&(a.avp=e/t),a})}},qn={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(r,e,t){var i,n,o,a,s=r.prev,l=r.current,u=(n=(i=s.indicatorData)===null||i===void 0?void 0:i.ao)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,c=(a=(o=l.indicatorData)===null||o===void 0?void 0:o.ao)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER,h;c>u?h=ne(e.styles,"bars[0].upColor",t.bars[0].upColor):h=ne(e.styles,"bars[0].downColor",t.bars[0].downColor);var f=c>u?O.Stroke:O.Fill;return{color:h,style:f,borderColor:h}}}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,a=0,s=0;return r.map(function(l,u){var c={},h=(l.low+l.high)/2;if(n+=h,o+=h,u>=t[0]-1){a=n/t[0];var f=r[u-(t[0]-1)];n-=(f.low+f.high)/2}if(u>=t[1]-1){s=o/t[1];var f=r[u-(t[1]-1)];o-=(f.low+f.high)/2}return u>=i-1&&(c.ao=a-s),c})}},Zn={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;if(n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1){var f=n[c]/t[c];s[i[c].key]=(l-f)/f*100,n[c]-=r[a-(u-1)].close}}),s})}};function Jn(r,e){var t=r.length,i=0;return r.forEach(function(n){var o=n.close-e;i+=o*o}),i=Math.abs(i),Math.sqrt(i/t)}var Qn={name:"BOLL",shortName:"BOLL",series:ve.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0;return r.map(function(o,a){var s=o.close,l={};if(n+=s,a>=i){l.mid=n/t[0];var u=Jn(r.slice(a-i,a+1),l.mid);l.up=l.mid+t[1]*u,l.dn=l.mid-t[1]*u,n-=r[a-i].close}return l})}},eo={name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0;return r.map(function(s,l){var u,c,h={},f=s.high,v=s.low,d=s.open,p=((u=r[l-1])!==null&&u!==void 0?u:s).close;if(o+=f-d,a+=d-v,i+=f-p,n+=p-v,l>=t[0]-1){a!==0?h.ar=o/a*100:h.ar=0,n!==0?h.br=i/n*100:h.br=0;var g=r[l-(t[0]-1)],m=g.high,_=g.low,S=g.open,y=((c=r[l-t[0]])!==null&&c!==void 0?c:r[l-(t[0]-1)]).close;i-=m-y,n-=y-_,o-=m-S,a-=S-_}return h})}},to={name:"BBI",shortName:"BBI",series:ve.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max.apply(Math,ri([],nt(t),!1)),n=[],o=[];return r.map(function(a,s){var l={},u=a.close;if(t.forEach(function(h,f){var v;n[f]=((v=n[f])!==null&&v!==void 0?v:0)+u,s>=h-1&&(o[f]=n[f]/h,n[f]-=r[s-(h-1)].close)}),s>=i-1){var c=0;o.forEach(function(h){c+=h}),l.bbi=c/4}return l})}},ro={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0,o=[];return r.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(n+=u,o.push(u),s>=i){var c=n/t[0],h=o.slice(s-i,s+1),f=0;h.forEach(function(p){f+=Math.abs(p-c)});var v=f/t[0];l.cci=v!==0?(u-c)/v/.015:0;var d=(r[s-i].high+r[s-i].low+r[s-i].close)/3;n-=d}return l})}},io={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.ceil(t[1]/2.5+1),n=Math.ceil(t[2]/2.5+1),o=Math.ceil(t[3]/2.5+1),a=Math.ceil(t[4]/2.5+1),s=0,l=[],u=0,c=[],h=0,f=[],v=0,d=[],p=[];return r.forEach(function(g,m){var _,S,y,C,w,b={},x=(_=r[m-1])!==null&&_!==void 0?_:g,E=(x.high+x.close+x.low+x.open)/4,I=Math.max(0,g.high-E),D=Math.max(0,E-g.low);m>=t[0]-1&&(D!==0?b.cr=I/D*100:b.cr=0,s+=b.cr,u+=b.cr,h+=b.cr,v+=b.cr,m>=t[0]+t[1]-2&&(l.push(s/t[1]),m>=t[0]+t[1]+i-3&&(b.ma1=l[l.length-1-i]),s-=(S=p[m-(t[1]-1)].cr)!==null&&S!==void 0?S:0),m>=t[0]+t[2]-2&&(c.push(u/t[2]),m>=t[0]+t[2]+n-3&&(b.ma2=c[c.length-1-n]),u-=(y=p[m-(t[2]-1)].cr)!==null&&y!==void 0?y:0),m>=t[0]+t[3]-2&&(f.push(h/t[3]),m>=t[0]+t[3]+o-3&&(b.ma3=f[f.length-1-o]),h-=(C=p[m-(t[3]-1)].cr)!==null&&C!==void 0?C:0),m>=t[0]+t[4]-2&&(d.push(v/t[4]),m>=t[0]+t[4]+a-3&&(b.ma4=d[d.length-1-a]),v-=(w=p[m-(t[4]-1)].cr)!==null&&w!==void 0?w:0)),p.push(b)}),p}},no={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,a=0,s=[];return r.forEach(function(l,u){var c,h={},f=l.close;n+=f,o+=f;var v=0,d=0;if(u>=t[0]-1&&(v=n/t[0],n-=r[u-(t[0]-1)].close),u>=t[1]-1&&(d=o/t[1],o-=r[u-(t[1]-1)].close),u>=i-1){var p=v-d;h.dma=p,a+=p,u>=i+t[2]-2&&(h.ama=a/t[2],a-=(c=s[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(h)}),s}},oo={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=0,c=0,h=[];return r.forEach(function(f,v){var d,p,g={},m=(d=r[v-1])!==null&&d!==void 0?d:f,_=m.close,S=f.high,y=f.low,C=S-y,w=Math.abs(S-_),b=Math.abs(_-y),x=S-m.high,E=m.low-y,I=Math.max(Math.max(C,w),b),D=x>0&&x>E?x:0,A=E>0&&E>x?E:0;if(i+=I,n+=D,o+=A,v>=t[0]-1){v>t[0]-1?(a=a-a/t[0]+I,s=s-s/t[0]+D,l=l-l/t[0]+A):(a=i,s=n,l=o);var M=0,T=0;a!==0&&(M=s*100/a,T=l*100/a),g.pdi=M,g.mdi=T;var z=0;T+M!==0&&(z=Math.abs(T-M)/(T+M)*100),u+=z,v>=t[0]*2-2&&(v>t[0]*2-2?c=(c*(t[0]-1)+z)/t[0]:c=u/t[0],g.adx=c,v>=t[0]*2+t[1]-3&&(g.adxr=(((p=h[v-(t[1]-1)].adx)!==null&&p!==void 0?p:0)+c)/2))}h.push(g)}),h}},ao={name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.map(function(o,a){var s,l={};if(a>0){var u=r[a-1],c=o.high,h=o.low,f=(s=o.volume)!==null&&s!==void 0?s:0,v=(c+h)/2-(u.high+u.low)/2;if(f===0||c-h===0)l.emv=0;else{var d=f/1e8/(c-h);l.emv=v/d}i+=l.emv,n.push(l.emv),a>=t[0]&&(l.maEmv=i/t[0],i-=n[a-t[0]])}return l})}},so={name:"EMA",shortName:"EMA",series:ve.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=0,o=[];return r.map(function(a,s){var l={},u=a.close;return n+=u,t.forEach(function(c,h){s>=c-1&&(s>c-1?o[h]=(2*u+(c-1)*o[h])/(c+1):o[h]=n/c,l[i[h].key]=o[h])}),l})}},lo={name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.forEach(function(o,a){var s,l={};if(a>=t[0]){var u=o.close,c=r[a-t[0]].close;l.mtm=u-c,i+=l.mtm,a>=t[0]+t[1]-1&&(l.maMtm=i/t[1],i-=(s=n[a-(t[1]-1)].mtm)!==null&&s!==void 0?s:0)}n.push(l)}),n}},uo={name:"MA",shortName:"MA",series:ve.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1&&(s[i[c].key]=n[c]/u,n[c]-=r[a-(u-1)].close)}),s})}},co={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(r,e,t){var i,n,o,a,s=r.prev,l=r.current,u=(n=(i=s.indicatorData)===null||i===void 0?void 0:i.macd)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,c=(a=(o=l.indicatorData)===null||o===void 0?void 0:o.macd)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER,h;c>0?h=ne(e.styles,"bars[0].upColor",t.bars[0].upColor):c<0?h=ne(e.styles,"bars[0].downColor",t.bars[0].downColor):h=ne(e.styles,"bars[0].noChangeColor",t.bars[0].noChangeColor);var f=u<c?O.Stroke:O.Fill;return{style:f,color:h,borderColor:h}}}],calc:function(r,e){var t=e.calcParams,i=0,n,o,a=0,s=0,l=0,u=Math.max(t[0],t[1]);return r.map(function(c,h){var f={},v=c.close;return i+=v,h>=t[0]-1&&(h>t[0]-1?n=(2*v+(t[0]-1)*n)/(t[0]+1):n=i/t[0]),h>=t[1]-1&&(h>t[1]-1?o=(2*v+(t[1]-1)*o)/(t[1]+1):o=i/t[1]),h>=u-1&&(a=n-o,f.dif=a,s+=a,h>=u+t[2]-2&&(h>u+t[2]-2?l=(a*2+l*(t[2]-1))/(t[2]+1):l=s/t[2],f.macd=(a-l)*2,f.dea=l)),f})}},ho={name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[];return r.forEach(function(a,s){var l,u,c,h,f=(l=r[s-1])!==null&&l!==void 0?l:a;a.close<f.close?n-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>f.close&&(n+=(c=a.volume)!==null&&c!==void 0?c:0);var v={obv:n};i+=n,s>=t[0]-1&&(v.maObv=i/t[0],i-=(h=o[s-(t[0]-1)].obv)!==null&&h!==void 0?h:0),o.push(v)}),o}},vo={name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(r){var e=0;return r.map(function(t,i){var n,o,a={},s=t.close,l=(n=t.volume)!==null&&n!==void 0?n:1,u=((o=r[i-1])!==null&&o!==void 0?o:t).close,c=0,h=u*l;return h!==0&&(c=(s-u)/h),e+=c,a.pvt=e,a})}},fo={name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[],a=[];return r.forEach(function(s,l){var u,c,h={},f=((u=r[l-1])!==null&&u!==void 0?u:s).close,v=s.close-f>0?1:0;o.push(v),i+=v,l>=t[0]-1&&(h.psy=i/t[0]*100,n+=h.psy,l>=t[0]+t[1]-2&&(h.maPsy=n/t[1],n-=(c=a[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),i-=o[l-(t[0]-1)]),a.push(h)}),a}},po={name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[],n=0;return r.forEach(function(o,a){var s,l,u={};if(a>=t[0]-1){var c=o.close,h=((s=r[a-t[0]])!==null&&s!==void 0?s:r[a-(t[0]-1)]).close;h!==0?u.roc=(c-h)/h*100:u.roc=0,n+=u.roc,a>=t[0]-1+t[1]-1&&(u.maRoc=n/t[1],n-=(l=i[a-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},go={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){var i=t+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[],o=[];return r.map(function(a,s){var l,u={},c=((l=r[s-1])!==null&&l!==void 0?l:a).close,h=a.close-c;return t.forEach(function(f,v){var d,p,g;if(h>0?n[v]=((d=n[v])!==null&&d!==void 0?d:0)+h:o[v]=((p=o[v])!==null&&p!==void 0?p:0)+Math.abs(h),s>=f-1){o[v]!==0?u[i[v].key]=100-100/(1+n[v]/o[v]):u[i[v].key]=0;var m=r[s-(f-1)],_=(g=r[s-f])!==null&&g!==void 0?g:m,S=m.close-_.close;S>0?n[v]-=S:o[v]-=Math.abs(S)}}),u})}},mo={name:"SMA",shortName:"SMA",series:ve.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(r,e){var t=e.calcParams,i=0,n=0;return r.map(function(o,a){var s={},l=o.close;return i+=l,a>=t[0]-1&&(a>t[0]-1?n=(l*t[1]+n*(t[0]-t[1]+1))/(t[0]+1):n=i/t[0],s.sma=n),s})}},_o={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[];return r.forEach(function(n,o){var a,s,l,u,c={},h=n.close;if(o>=t[0]-1){var f=oi(r.slice(o-(t[0]-1),o+1),"high","low"),v=f[0],d=f[1],p=v-d,g=(h-d)/(p===0?1:p)*100;c.k=((t[1]-1)*((s=(a=i[o-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+g)/t[1],c.d=((t[2]-1)*((u=(l=i[o-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},yo={name:"SAR",shortName:"SAR",series:ve.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(r,e,t){var i,n,o=r.current,a=(n=(i=o.indicatorData)===null||i===void 0?void 0:i.sar)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,s=o.kLineData,l=((s==null?void 0:s.high)+(s==null?void 0:s.low))/2,u=a<l?ne(e.styles,"circles[0].upColor",t.circles[0].upColor):ne(e.styles,"circles[0].downColor",t.circles[0].downColor);return{color:u}}}],calc:function(r,e){var t=e.calcParams,i=t[0]/100,n=t[1]/100,o=t[2]/100,a=i,s=-100,l=!1,u=0;return r.map(function(c,h){var f=u,v=c.high,d=c.low;if(l){(s===-100||s<v)&&(s=v,a=Math.min(a+n,o)),u=f+a*(s-f);var p=Math.min(r[Math.max(1,h)-1].low,d);u>c.low?(u=s,a=i,s=-100,l=!l):u>p&&(u=p)}else{(s===-100||s>d)&&(s=d,a=Math.min(a+n,o)),u=f+a*(s-f);var g=Math.max(r[Math.max(1,h)-1].high,v);u<c.high?(u=s,a=0,s=-100,l=!l):u<g&&(u=g)}return{sar:u}})}},So={name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n,o,a,s=0,l=0,u=0,c=[];return r.forEach(function(h,f){var v,d={},p=h.close;if(i+=p,f>=t[0]-1&&(f>t[0]-1?n=(2*p+(t[0]-1)*n)/(t[0]+1):n=i/t[0],s+=n,f>=t[0]*2-2&&(f>t[0]*2-2?o=(2*n+(t[0]-1)*o)/(t[0]+1):o=s/t[0],l+=o,f>=t[0]*3-3))){var g=void 0,m=0;f>t[0]*3-3?(g=(2*o+(t[0]-1)*a)/(t[0]+1),m=(g-a)/a*100):g=l/t[0],a=g,d.trix=m,u+=m,f>=t[0]*3+t[1]-4&&(d.maTrix=u/t[1],u-=(v=c[f-(t[1]-1)].trix)!==null&&v!==void 0?v:0)}c.push(d)}),c}};function Nr(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(r,e,t){var i=r.current.kLineData,n=ne(e.styles,"bars[0].noChangeColor",t.bars[0].noChangeColor);return P(i)&&(i.close>i.open?n=ne(e.styles,"bars[0].upColor",t.bars[0].upColor):i.close<i.open&&(n=ne(e.styles,"bars[0].downColor",t.bars[0].downColor))),{color:n}}}}var Co={name:"VOL",shortName:"VOL",series:ve.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},Nr()],regenerateFigures:function(r){var e=r.map(function(t,i){return{key:"ma".concat(i+1),title:"MA".concat(t,": "),type:"line"}});return e.push(Nr()),e},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s,l=(s=o.volume)!==null&&s!==void 0?s:0,u={volume:l};return t.forEach(function(c,h){var f,v;n[h]=((f=n[h])!==null&&f!==void 0?f:0)+l,a>=c-1&&(u[i[h].key]=n[h]/c,n[h]-=(v=r[a-(c-1)].volume)!==null&&v!==void 0?v:0)}),u})}},bo={name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=[];return r.forEach(function(l,u){var c,h,f,v,d,p={},g=l.close,m=((c=r[u-1])!==null&&c!==void 0?c:l).close,_=(h=l.volume)!==null&&h!==void 0?h:0;if(g>m?i+=_:g<m?n+=_:o+=_,u>=t[0]-1){var S=o/2;n+S===0?p.vr=0:p.vr=(i+S)/(n+S)*100,a+=p.vr,u>=t[0]+t[1]-2&&(p.maVr=a/t[1],a-=(f=s[u-(t[1]-1)].vr)!==null&&f!==void 0?f:0);var y=r[u-(t[0]-1)],C=(v=r[u-t[0]])!==null&&v!==void 0?v:y,w=y.close,b=(d=y.volume)!==null&&d!==void 0?d:0;w>C.close?i-=b:w<C.close?n-=b:o-=b}s.push(p)}),s}},wo={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures;return r.map(function(n,o){var a={},s=n.close;return t.forEach(function(l,u){var c=l-1;if(o>=c){var h=oi(r.slice(o-c,o+1),"high","low"),f=h[0],v=h[1],d=f-v;a[i[u].key]=d===0?0:(s-f)/d*100}}),a})}},ai={},Eo=[Kn,qn,Zn,Qn,eo,to,ro,io,no,oo,ao,so,lo,uo,co,ho,vo,fo,po,go,mo,_o,yo,So,Co,bo,wo];Eo.forEach(function(r){ai[r.name]=Ln.extend(r)});function si(r){var e;return(e=ai[r])!==null&&e!==void 0?e:null}var xo=function(){function r(e){this._instances=new Map,this._chartStore=e}return r.prototype._overrideInstance=function(e,t){var i=t.shortName,n=t.series,o=t.calcParams,a=t.precision,s=t.figures,l=t.minValue,u=t.maxValue,c=t.shouldOhlc,h=t.shouldFormatBigNumber,f=t.visible,v=t.zLevel,d=t.styles,p=t.extendData,g=t.regenerateFigures,m=t.createTooltipDataSource,_=t.draw,S=t.calc,y=!1;V(i)&&e.setShortName(i)&&(y=!0),P(n)&&e.setSeries(n)&&(y=!0);var C=!1;xe(o)&&e.setCalcParams(o)&&(y=!0,C=!0),xe(s)&&e.setFigures(s)&&(y=!0,C=!0),l!==void 0&&e.setMinValue(l)&&(y=!0),u!==void 0&&e.setMinValue(u)&&(y=!0),F(a)&&e.setPrecision(a)&&(y=!0),tt(c)&&e.setShouldOhlc(c)&&(y=!0),tt(h)&&e.setShouldFormatBigNumber(h)&&(y=!0),tt(f)&&e.setVisible(f)&&(y=!0);var w=!1;return F(v)&&e.setZLevel(v)&&(y=!0,w=!0),P(d)&&e.setStyles(d)&&(y=!0),p!==void 0&&e.setExtendData(p)&&(y=!0,C=!0),g!==void 0&&e.setRegenerateFigures(g)&&(y=!0),m!==void 0&&e.setCreateTooltipDataSource(m)&&(y=!0),_!==void 0&&e.setDraw(_)&&(y=!0),Ve(S)&&(e.calc=S,C=!0),[y,C,w]},r.prototype._sort=function(e){var t;V(e)?(t=this._instances.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._instances.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype.addInstance=function(e,t,i){return dt(this,void 0,void 0,function(){var n,o,a,s,l;return vt(this,function(u){switch(u.label){case 0:return n=e.name,o=this._instances.get(t),P(o)?(a=o.find(function(c){return c.name===n}),P(a)?[4,Promise.reject(new Error("Duplicate indicators."))]:[3,2]):[3,2];case 1:return[2,u.sent()];case 2:return P(o)||(o=[]),s=si(n),l=new s,this.synchronizeSeriesPrecision(l),this._overrideInstance(l,e),i||(o=[]),o.push(l),this._instances.set(t,o),this._sort(t),[4,l.calcIndicator(this._chartStore.getDataList())];case 3:return[2,u.sent()]}})})},r.prototype.getInstances=function(e){var t;return(t=this._instances.get(e))!==null&&t!==void 0?t:[]},r.prototype.removeInstance=function(e,t){var i,n=!1,o=this._instances.get(e);if(P(o)){if(V(t)){var a=o.findIndex(function(s){return s.name===t});a>-1&&(o.splice(a,1),n=!0)}else this._instances.set(e,[]),n=!0;((i=this._instances.get(e))===null||i===void 0?void 0:i.length)===0&&this._instances.delete(e)}return n},r.prototype.hasInstances=function(e){return this._instances.has(e)},r.prototype.calcInstance=function(e,t){return dt(this,void 0,void 0,function(){var i,n,o,a,s=this;return vt(this,function(l){switch(l.label){case 0:return i=[],V(e)?V(t)?(n=this._instances.get(t),P(n)&&(o=n.find(function(u){return u.name===e}),P(o)&&i.push(o.calcIndicator(this._chartStore.getDataList())))):this._instances.forEach(function(u){var c=u.find(function(h){return h.name===e});P(c)&&i.push(c.calcIndicator(s._chartStore.getDataList()))}):this._instances.forEach(function(u){u.forEach(function(c){i.push(c.calcIndicator(s._chartStore.getDataList()))})}),[4,Promise.all(i)];case 1:return a=l.sent(),[2,a.includes(!0)]}})})},r.prototype.getInstanceByPaneId=function(e,t){var i,n,o=function(l){var u=new Map;return l.forEach(function(c){u.set(c.name,c)}),u};if(V(e)){var a=(i=this._instances.get(e))!==null&&i!==void 0?i:[];return V(t)?(n=a==null?void 0:a.find(function(l){return l.name===t}))!==null&&n!==void 0?n:null:o(a)}var s=new Map;return this._instances.forEach(function(l,u){s.set(u,o(l))}),s},r.prototype.synchronizeSeriesPrecision=function(e){var t=this._chartStore.getPrecision(),i=t.price,n=t.volume,o=function(a){switch(a.series){case ve.Price:{a.setPrecision(i,!0);break}case ve.Volume:{a.setPrecision(n,!0);break}}};P(e)?o(e):this._instances.forEach(function(a){a.forEach(function(s){o(s)})})},r.prototype.override=function(e,t){return dt(this,void 0,void 0,function(){var i,n,o,a,s,l,u,c=this;return vt(this,function(h){switch(h.label){case 0:return i=e.name,n=new Map,t!==null?(o=this._instances.get(t),P(o)&&n.set(t,o)):n=this._instances,a=!1,s=[],l=!1,n.forEach(function(f){var v=f.find(function(p){return p.name===i});if(P(v)){var d=c._overrideInstance(v,e);d[2]&&(l=!0),d[1]?s.push(v.calcIndicator(c._chartStore.getDataList())):d[0]&&(a=!0)}}),l&&this._sort(),[4,Promise.all(s)];case 1:return u=h.sent(),[2,[a,u.includes(!0)]]}})})},r}(),Io=function(){function r(e){this._crosshair={},this._activeIcon=null,this._chartStore=e}return r.prototype.setCrosshair=function(e,t){var i=this._chartStore.getDataList(),n=e??{},o,a;F(n.x)?(o=this._chartStore.getTimeScaleStore().coordinateToDataIndex(n.x),o<0?a=0:o>i.length-1?a=i.length-1:a=o):(o=i.length-1,a=o);var s=i[a],l=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(o),u={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=B(B({},n),{realX:l,kLineData:s,realDataIndex:o,dataIndex:a}),(u.x!==n.x||u.y!==n.y||u.paneId!==n.paneId)&&(s!==null&&this._chartStore.getChart().crosshairChange(this._crosshair),(t??!1)||this._chartStore.getChart().updatePane(1))},r.prototype.recalculateCrosshair=function(e){this.setCrosshair(this._crosshair,e)},r.prototype.getCrosshair=function(){return this._crosshair},r.prototype.setActiveIcon=function(e){this._activeIcon=e??null},r.prototype.getActiveIcon=function(){return this._activeIcon},r.prototype.clear=function(){this.setCrosshair({},!0),this.setActiveIcon()},r}(),Po={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t=r.coordinates,i=r.bounding,n=r.overlay,o=r.precision,a=r.thousandsSeparator,s=r.decimalFoldThreshold,l=r.yAxis,u=n.points;if(t.length>0){var c=!((e=l==null?void 0:l.isInCandle())!==null&&e!==void 0)||e?o.price:o.excludePriceVolumeMax,h=[],f=[],v=0,d=i.width;if(t.length>1&&F(u[0].value)&&F(u[1].value)){var p=[1,.786,.618,.5,.382,.236,0],g=t[0].y-t[1].y,m=u[0].value-u[1].value;p.forEach(function(_){var S,y=t[1].y+g*_,C=ie(te((((S=u[1].value)!==null&&S!==void 0?S:0)+m*_).toFixed(c),a),s);h.push({coordinates:[{x:v,y},{x:d,y}]}),f.push({x:v,y,text:"".concat(C," (").concat((_*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:h},{type:"text",isCheckEvent:!1,attrs:f}]}return[]}},Do={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding,i={x:0,y:e[0].y};return P(e[1])&&e[0].x<e[1].x&&(i.x=t.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},Ao={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},Mo={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]}}]}},fr=function(){function r(){this._children=[],this._callbacks=new Map}return r.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},r.prototype.onEvent=function(e,t,i){var n=this._callbacks.get(e);return P(n)&&this.checkEventOn(t)?n(t,i):!1},r.prototype.checkEventOn=function(e){var t,i;try{for(var n=rt(this._children),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.checkEventOn(e))return!0}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!1},r.prototype.dispatchEvent=function(e,t,i){var n=this._children.length-1;if(n>-1){for(var o=n;o>-1;o--)if(this._children[o].dispatchEvent(e,t,i))return!0}return this.onEvent(e,t,i)},r.prototype.addChild=function(e){return this._children.push(e),this},r.prototype.clear=function(){this._children=[]},r}(),re=2,To=function(r){N(e,r);function e(t){var i=r.call(this)||this;return i.attrs=t.attrs,i.styles=t.styles,i}return e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var i=function(n){N(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}return o.prototype.checkEventOnImp=function(a,s,l){return t.checkEventOn(a,s,l)},o.prototype.drawImp=function(a,s,l){t.draw(a,s,l)},o}(e);return i},e}(fr);function Fo(r,e){var t=[];t=t.concat(e);for(var i=0;i<t.length;i++){var n=t[i].coordinates;if(n.length>1)for(var o=1;o<n.length;o++){var a=n[o-1],s=n[o];if(a.x===s.x){if(Math.abs(a.y-r.y)+Math.abs(s.y-r.y)-Math.abs(a.y-s.y)<re+re&&Math.abs(r.x-a.x)<re)return!0}else{var l=pr(a,s),u=li(l,r),c=Math.abs(u-r.y);if(Math.abs(a.x-r.x)+Math.abs(s.x-r.x)-Math.abs(a.x-s.x)<re+re&&c*c/(l[0]*l[0]+1)<re*re)return!0}}}return!1}function li(r,e){return r!==null?e.x*r[0]+r[1]:e.y}function Nt(r,e,t){var i=pr(r,e);return li(i,t)}function pr(r,e){var t=r.x-e.x;if(t!==0){var i=(r.y-e.y)/t,n=r.y-i*r.x;return[i,n]}return null}function ui(r,e,t){var i=e.length,n=F(t)?t>0&&t<1?t:0:t?.5:0;if(n>0&&i>2){for(var o=e[0].x,a=e[0].y,s=1;s<i-1;s++){var l=e[s-1],u=e[s],c=e[s+1],h=u.x-l.x,f=u.y-l.y,v=c.x-u.x,d=c.y-u.y,p=c.x-l.x,g=c.y-l.y,m=Math.sqrt(h*h+f*f),_=Math.sqrt(v*v+d*d),S=_/(_+m),y=u.x+p*n*S,C=u.y+g*n*S;y=Math.min(y,Math.max(c.x,u.x)),C=Math.min(C,Math.max(c.y,u.y)),y=Math.max(y,Math.min(c.x,u.x)),C=Math.max(C,Math.min(c.y,u.y)),p=y-u.x,g=C-u.y;var w=u.x-p*m/_,b=u.y-g*m/_;w=Math.min(w,Math.max(l.x,u.x)),b=Math.min(b,Math.max(l.y,u.y)),w=Math.max(w,Math.min(l.x,u.x)),b=Math.max(b,Math.min(l.y,u.y)),p=u.x-w,g=u.y-b,y=u.x+p*_/m,C=u.y+g*_/m,r.bezierCurveTo(o,a,w,b,u.x,u.y),o=y,a=C}var x=e[i-1];r.bezierCurveTo(o,a,x.x,x.y,x.x,x.y)}else for(var s=1;s<i;s++)r.lineTo(e[s].x,e[s].y)}function ko(r,e,t){var i=[];i=i.concat(e);var n=t.style,o=n===void 0?R.Solid:n,a=t.smooth,s=a===void 0?!1:a,l=t.size,u=l===void 0?1:l,c=t.color,h=c===void 0?"currentColor":c,f=t.dashedValue,v=f===void 0?[2,2]:f;r.lineWidth=u,r.strokeStyle=h,o===R.Dashed?r.setLineDash(v):r.setLineDash([]);var d=u%2===1?.5:0;i.forEach(function(p){var g=p.coordinates;g.length>1&&(g.length===2&&(g[0].x===g[1].x||g[0].y===g[1].y)?(r.beginPath(),g[0].x===g[1].x?(r.moveTo(g[0].x+d,g[0].y),r.lineTo(g[1].x+d,g[1].y)):(r.moveTo(g[0].x,g[0].y+d),r.lineTo(g[1].x,g[1].y+d)),r.stroke(),r.closePath()):(r.save(),u%2===1&&r.translate(.5,.5),r.beginPath(),r.moveTo(g[0].x,g[0].y),ui(r,g,s),r.stroke(),r.closePath(),r.restore()))})}var Bo={name:"line",checkEventOn:Fo,draw:function(r,e,t){ko(r,e,t)}};function ci(r,e,t){var i=t??0,n=[];if(r.length>1)if(r[0].x===r[1].x){var o=0,a=e.height;if(n.push({coordinates:[{x:r[0].x,y:o},{x:r[0].x,y:a}]}),r.length>2){n.push({coordinates:[{x:r[2].x,y:o},{x:r[2].x,y:a}]});for(var s=r[0].x-r[2].x,l=0;l<i;l++){var u=s*(l+1);n.push({coordinates:[{x:r[0].x+u,y:o},{x:r[0].x+u,y:a}]})}}}else{var c=0,h=e.width,f=pr(r[0],r[1]),v=f[0],d=f[1];if(n.push({coordinates:[{x:c,y:c*v+d},{x:h,y:h*v+d}]}),r.length>2){var p=r[2].y-v*r[2].x;n.push({coordinates:[{x:c,y:c*v+p},{x:h,y:h*v+p}]});for(var s=d-p,l=0;l<i;l++){var g=d+s*(l+1);n.push({coordinates:[{x:c,y:c*v+g},{x:h,y:h*v+g}]})}}}return n}var Ro={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:ci(e,t)}]}},Lo={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:ci(e,t,1)}]}},zo={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t=r.coordinates,i=r.bounding,n=r.precision,o=r.overlay,a=r.thousandsSeparator,s=r.decimalFoldThreshold,l=r.yAxis,u=o.points[0].value,c=u===void 0?0:u,h=!((e=l==null?void 0:l.isInCandle())!==null&&e!==void 0)||e?n.price:n.excludePriceVolumeMax;return[{type:"line",attrs:{coordinates:[t[0],{x:i.width,y:t[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:t[0].x,y:t[0].y,text:ie(te(c.toFixed(h),a),s),baseline:"bottom"}}]}};function Vo(r,e){if(r.length>1){var t=void 0;return r[0].x===r[1].x&&r[0].y!==r[1].y?r[0].y<r[1].y?t={x:r[0].x,y:e.height}:t={x:r[0].x,y:0}:r[0].x>r[1].x?t={x:0,y:Nt(r[0],r[1],{x:0,y:r[0].y})}:t={x:e.width,y:Nt(r[0],r[1],{x:e.width,y:r[0].y})},{coordinates:[r[0],t]}}return[]}var Oo={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:Vo(e,t)}]}},No={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},Wo={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Nt(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:Nt(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},Xo={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;if(e.length===2){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=t.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},Ho={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},Uo={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]}},$o={name:"simpleAnnotation",totalStep:2,styles:{line:{style:R.Dashed}},createPointFigures:function(r){var e,t=r.overlay,i=r.coordinates,n;P(t.extendData)&&(Ve(t.extendData)?n=t.extendData(t):n=(e=t.extendData)!==null&&e!==void 0?e:"");var o=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:o,y:a},{x:o,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:s},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:n??"",align:"center",baseline:"bottom"},ignoreEvent:!0}]}},Yo={name:"simpleTag",totalStep:2,styles:{line:{style:R.Dashed}},createPointFigures:function(r){var e=r.bounding,t=r.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(r){var e,t,i=r.overlay,n=r.coordinates,o=r.bounding,a=r.yAxis,s=r.precision,l=(e=a==null?void 0:a.isFromZero())!==null&&e!==void 0?e:!1,u,c;l?(u="left",c=0):(u="right",c=o.width);var h;return P(i.extendData)&&(Ve(i.extendData)?h=i.extendData(i):h=(t=i.extendData)!==null&&t!==void 0?t:""),!P(h)&&F(i.points[0].value)&&(h=Z(i.points[0].value,s.price)),{type:"text",attrs:{x:c,y:n[0].y,text:h??"",align:u,baseline:"middle"}}}},hi={},Go=[Po,Do,Ao,Mo,Ro,Lo,zo,Oo,No,Wo,Xo,Ho,Uo,$o,Yo];Go.forEach(function(r){hi[r.name]=Nn.extend(r)});function jo(r){var e;return(e=hi[r])!==null&&e!==void 0?e:null}var Ko=30,qo=100,X={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},Zo=function(){function r(e){this._instances=new Map,this._progressInstanceInfo=null,this._pressedInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chartStore=e}return r.prototype._overrideInstance=function(e,t){var i=t.id,n=t.groupId,o=t.points,a=t.styles,s=t.lock,l=t.visible,u=t.zLevel,c=t.mode,h=t.modeSensitivity,f=t.extendData,v=t.onDrawStart,d=t.onDrawing,p=t.onDrawEnd,g=t.onClick,m=t.onDoubleClick,_=t.onRightClick,S=t.onPressedMoveStart,y=t.onPressedMoving,C=t.onPressedMoveEnd,w=t.onMouseEnter,b=t.onMouseLeave,x=t.onRemoved,E=t.onSelected,I=t.onDeselected,D=!1,A=!1;return V(i)&&e.setId(i),V(n)&&e.setGroupId(n),xe(o)&&e.setPoints(o)&&(D=!0),P(a)&&e.setStyles(a)&&(D=!0),tt(s)&&e.setLock(s),tt(l)&&e.setVisible(l)&&(D=!0),F(u)&&e.setZLevel(u)&&(D=!0,A=!0),P(c)&&e.setMode(c),F(h)&&e.setModeSensitivity(h),f!==void 0&&e.setExtendData(f)&&(D=!0),v!==void 0&&e.setOnDrawStartCallback(v),d!==void 0&&e.setOnDrawingCallback(d),p!==void 0&&e.setOnDrawEndCallback(p),g!==void 0&&e.setOnClickCallback(g),m!==void 0&&e.setOnDoubleClickCallback(m),_!==void 0&&e.setOnRightClickCallback(_),S!==void 0&&e.setOnPressedMoveStartCallback(S),y!==void 0&&e.setOnPressedMovingCallback(y),C!==void 0&&e.setOnPressedMoveEndCallback(C),w!==void 0&&e.setOnMouseEnterCallback(w),b!==void 0&&e.setOnMouseLeaveCallback(b),x!==void 0&&e.setOnRemovedCallback(x),E!==void 0&&e.setOnSelectedCallback(E),I!==void 0&&e.setOnDeselectedCallback(I),[D,A]},r.prototype.getInstanceById=function(e){var t,i;try{for(var n=rt(this._instances),o=n.next();!o.done;o=n.next()){var a=o.value,s=a[1],l=s.find(function(u){return u.id===e});if(P(l))return l}}catch(u){t={error:u}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return this._progressInstanceInfo!==null&&this._progressInstanceInfo.instance.id===e?this._progressInstanceInfo.instance:null},r.prototype._sort=function(e){var t;V(e)?(t=this._instances.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._instances.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype.addInstances=function(e,t,i){var n=this,o=e.map(function(s){var l,u,c,h,f=(l=s.id)!==null&&l!==void 0?l:ni(Vn);if(n.getInstanceById(f)===null){var v=jo(s.name);if(v!==null){var d=new v;d.setPaneId(t);var p=(u=s.groupId)!==null&&u!==void 0?u:f;return s.id=f,s.groupId=p,n._overrideInstance(d,s),d.isDrawing()?n._progressInstanceInfo={paneId:t,instance:d,appointPaneFlag:i}:(n._instances.has(t)||n._instances.set(t,[]),(c=n._instances.get(t))===null||c===void 0||c.push(d)),d.isStart()&&((h=d.onDrawStart)===null||h===void 0||h.call(d,{overlay:d})),f}}return null});if(o.some(function(s){return s!==null})){this._sort();var a=this._chartStore.getChart();a.updatePane(1,t),a.updatePane(1,X.X_AXIS)}return o},r.prototype.getProgressInstanceInfo=function(){return this._progressInstanceInfo},r.prototype.progressInstanceComplete=function(){var e;if(this._progressInstanceInfo!==null){var t=this._progressInstanceInfo,i=t.instance,n=t.paneId;i.isDrawing()||(this._instances.has(n)||this._instances.set(n,[]),(e=this._instances.get(n))===null||e===void 0||e.push(i),this._sort(n),this._progressInstanceInfo=null)}},r.prototype.updateProgressInstanceInfo=function(e,t){this._progressInstanceInfo!==null&&(tt(t)&&t&&(this._progressInstanceInfo.appointPaneFlag=t),this._progressInstanceInfo.paneId=e,this._progressInstanceInfo.instance.setPaneId(e))},r.prototype.getInstances=function(e){var t;if(!V(e)){var i=[];return this._instances.forEach(function(n){i=i.concat(n)}),i}return(t=this._instances.get(e))!==null&&t!==void 0?t:[]},r.prototype.override=function(e){var t=this,i=e.id,n=e.groupId,o=e.name,a=!1,s=!1,l=function(v){var d=t._overrideInstance(v,e);d[0]&&(a=!0),d[1]&&(s=!0)};if(V(i)){var u=this.getInstanceById(i);u!==null&&l(u)}else{var c=V(o),h=V(n);if(this._instances.forEach(function(v){v.forEach(function(d){(c&&d.name===o||h&&d.groupId===n||!c&&!h)&&l(d)})}),this._progressInstanceInfo!==null){var f=this._progressInstanceInfo.instance;(c&&f.name===o||h&&f.groupId===n||!c&&!h)&&l(f)}}s&&this._sort(),a&&this._chartStore.getChart().updatePane(1)},r.prototype.removeInstance=function(e){var t,i,n,o=function(p,g){if(V(p.id)){if(g.id!==p.id)return!1}else if(V(p.groupId)){if(g.groupId!==p.groupId)return!1}else if(V(p.name)&&g.name!==p.name)return!1;return!0},a=[],s=P(e);if(this._progressInstanceInfo!==null){var l=this._progressInstanceInfo.instance;(!s||s&&o(e,l))&&(a.push(this._progressInstanceInfo.paneId),(n=l.onRemoved)===null||n===void 0||n.call(l,{overlay:l}),this._progressInstanceInfo=null)}if(s){var u=new Map,c=function(p){var g=p[1],m=g.filter(function(_){var S;return o(e,_)?(a.includes(p[0])||a.push(p[0]),(S=_.onRemoved)===null||S===void 0||S.call(_,{overlay:_}),!1):!0});m.length>0&&u.set(p[0],m)};try{for(var h=rt(this._instances),f=h.next();!f.done;f=h.next()){var v=f.value;c(v)}}catch(p){t={error:p}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}this._instances=u}else this._instances.forEach(function(p,g){a.push(g),p.forEach(function(m){var _;(_=m.onRemoved)===null||_===void 0||_.call(m,{overlay:m})})}),this._instances.clear();if(a.length>0){var d=this._chartStore.getChart();a.forEach(function(p){d.updatePane(1,p)}),d.updatePane(1,X.X_AXIS)}},r.prototype.setPressedInstanceInfo=function(e){this._pressedInstanceInfo=e},r.prototype.getPressedInstanceInfo=function(){return this._pressedInstanceInfo},r.prototype.updatePointPosition=function(e,t){if(e>0){var i=this._chartStore.getDataList();this._instances.forEach(function(n){n.forEach(function(o){var a=o.points;a.forEach(function(s){if(!P(s.timestamp)&&P(s.dataIndex)){t===_e.Forward&&(s.dataIndex=s.dataIndex+e);var l=i[s.dataIndex];s.timestamp=l==null?void 0:l.timestamp}})})})}},r.prototype.setHoverInstanceInfo=function(e,t){var i,n,o=this._hoverInstanceInfo,a=o.instance,s=o.figureType,l=o.figureKey,u=o.figureIndex;if(((a==null?void 0:a.id)!==((i=e.instance)===null||i===void 0?void 0:i.id)||s!==e.figureType||u!==e.figureIndex)&&(this._hoverInstanceInfo=e,(a==null?void 0:a.id)!==((n=e.instance)===null||n===void 0?void 0:n.id))){var c=!1,h=!1;a!==null&&(h=!0,Ve(a.onMouseLeave)&&(a.onMouseLeave(B({overlay:a,figureKey:l,figureIndex:u},t)),c=!0)),e.instance!==null&&(h=!0,e.instance.setZLevel(On),Ve(e.instance.onMouseEnter)&&(e.instance.onMouseEnter(B({overlay:e.instance,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),c=!0)),h&&this._sort(),c||this._chartStore.getChart().updatePane(1)}},r.prototype.getHoverInstanceInfo=function(){return this._hoverInstanceInfo},r.prototype.setClickInstanceInfo=function(e,t){var i,n,o,a,s,l,u,c,h,f=this._clickInstanceInfo,v=f.paneId,d=f.instance,p=f.figureType,g=f.figureKey,m=f.figureIndex;if((n=(i=e.instance)===null||i===void 0?void 0:i.isDrawing())!==null&&n!==void 0&&n||(a=(o=e.instance)===null||o===void 0?void 0:o.onClick)===null||a===void 0||a.call(o,B({overlay:e.instance,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),((d==null?void 0:d.id)!==((s=e.instance)===null||s===void 0?void 0:s.id)||p!==e.figureType||m!==e.figureIndex)&&(this._clickInstanceInfo=e,(d==null?void 0:d.id)!==((l=e.instance)===null||l===void 0?void 0:l.id))){(u=d==null?void 0:d.onDeselected)===null||u===void 0||u.call(d,B({overlay:d,figureKey:g,figureIndex:m},t)),(h=(c=e.instance)===null||c===void 0?void 0:c.onSelected)===null||h===void 0||h.call(c,B({overlay:e.instance,figureKey:e.figureKey,figureIndex:e.figureIndex},t));var _=this._chartStore.getChart();_.updatePane(1,e.paneId),v!==e.paneId&&_.updatePane(1,v),_.updatePane(1,X.X_AXIS)}},r.prototype.getClickInstanceInfo=function(){return this._clickInstanceInfo},r.prototype.isEmpty=function(){return this._instances.size===0&&this._progressInstanceInfo===null},r.prototype.isDrawing=function(){var e,t;return this._progressInstanceInfo!==null&&((t=(e=this._progressInstanceInfo)===null||e===void 0?void 0:e.instance.isDrawing())!==null&&t!==void 0?t:!1)},r}(),Jo=function(){function r(){this._actions=new Map}return r.prototype.execute=function(e,t){var i;(i=this._actions.get(e))===null||i===void 0||i.execute(t)},r.prototype.subscribe=function(e,t){var i;this._actions.has(e)||this._actions.set(e,new Rn),(i=this._actions.get(e))===null||i===void 0||i.subscribe(t)},r.prototype.unsubscribe=function(e,t){var i=this._actions.get(e);P(i)&&(i.unsubscribe(t),i.isEmpty()&&this._actions.delete(e))},r.prototype.has=function(e){var t=this._actions.get(e);return P(t)&&!t.isEmpty()},r}(),Qo={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},ea={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},ta={light:Qo,dark:ea};function di(r){var e;return(e=ta[r])!==null&&e!==void 0?e:null}var ra=function(){function r(e,t){this._styles=Mn(),this._customApi=Wn(),this._locale=Xn,this._precision={price:2,volume:0},this._thousandsSeparator=",",this._decimalFoldThreshold=3,this._dataList=[],this._loadMoreCallback=null,this._loadDataCallback=null,this._loading=!0,this._forwardMore=!0,this._backwardMore=!0,this._timeScaleStore=new jn(this),this._indicatorStore=new xo(this),this._overlayStore=new Zo(this),this._tooltipStore=new Io(this),this._actionStore=new Jo,this._visibleDataList=[],this._chart=e,this.setOptions(t)}return r.prototype.adjustVisibleDataList=function(){this._visibleDataList=[];for(var e=this._timeScaleStore.getVisibleRange(),t=e.realFrom,i=e.realTo,n=t;n<i;n++){var o=this._dataList[n],a=this._timeScaleStore.dataIndexToCoordinate(n);this._visibleDataList.push({dataIndex:n,x:a,data:o})}},r.prototype.setOptions=function(e){var t,i,n,o;if(P(e)){var a=e.locale,s=e.timezone,l=e.styles,u=e.customApi,c=e.thousandsSeparator,h=e.decimalFoldThreshold;if(V(a)&&(this._locale=a),V(s)&&this._timeScaleStore.setTimezone(s),P(l)){var f=null;V(l)?f=di(l):f=l,Se(this._styles,f),xe((i=(t=f==null?void 0:f.candle)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.custom)&&(this._styles.candle.tooltip.custom=(o=(n=f==null?void 0:f.candle)===null||n===void 0?void 0:n.tooltip)===null||o===void 0?void 0:o.custom)}P(u)&&Se(this._customApi,u),V(c)&&(this._thousandsSeparator=c),F(h)&&h>0&&(this._decimalFoldThreshold=h)}return this},r.prototype.getStyles=function(){return this._styles},r.prototype.getLocale=function(){return this._locale},r.prototype.getCustomApi=function(){return this._customApi},r.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},r.prototype.getDecimalFoldThreshold=function(){return this._decimalFoldThreshold},r.prototype.getPrecision=function(){return this._precision},r.prototype.setPrecision=function(e){return this._precision=e,this._indicatorStore.synchronizeSeriesPrecision(),this},r.prototype.getDataList=function(){return this._dataList},r.prototype.getVisibleFirstData=function(){var e,t=this._timeScaleStore.getVisibleRange().from;return(e=this._dataList[t])!==null&&e!==void 0?e:null},r.prototype.getVisibleDataList=function(){return this._visibleDataList},r.prototype.addData=function(e,t,i){return dt(this,void 0,void 0,function(){var n,o,a,s,l,u,c;return vt(this,function(h){switch(h.label){case 0:if(n=!1,o=!1,a=0,xe(e)){switch(a=e.length,t){case _e.Init:{this.clear(),this._dataList=e,this._forwardMore=i??!0,this._timeScaleStore.resetOffsetRightDistance(),o=!0;break}case _e.Backward:{this._dataList=this._dataList.concat(e),this._backwardMore=i??!1,o=a>0;break}case _e.Forward:this._dataList=e.concat(this._dataList),this._forwardMore=i??!1,o=a>0}this._loading=!1,n=!0}else s=this._dataList.length,l=e.timestamp,u=ne(this._dataList[s-1],"timestamp",0),l>u?(this._dataList.push(e),c=this._timeScaleStore.getLastBarRightSideDiffBarCount(),c<0&&this._timeScaleStore.setLastBarRightSideDiffBarCount(--c),a=1,n=!0,o=!0):l===u&&(this._dataList[s-1]=e,n=!0,o=!0);if(!n)return[3,5];h.label=1;case 1:return h.trys.push([1,4,,5]),this._overlayStore.updatePointPosition(a,t),o?(this._timeScaleStore.adjustVisibleRange(),this._tooltipStore.recalculateCrosshair(!0),[4,this._indicatorStore.calcInstance()]):[3,3];case 2:h.sent(),this._chart.adjustPaneViewport(!1,!0,!0,!0),h.label=3;case 3:return this._actionStore.execute(ye.OnDataReady),[3,5];case 4:return h.sent(),[3,5];case 5:return[2]}})})},r.prototype.setLoadMoreCallback=function(e){this._loadMoreCallback=e},r.prototype.executeLoadMoreCallback=function(e){this._forwardMore&&!this._loading&&P(this._loadMoreCallback)&&(this._loading=!0,this._loadMoreCallback(e))},r.prototype.setLoadDataCallback=function(e){this._loadDataCallback=e},r.prototype.executeLoadDataCallback=function(e){var t=this;if(!this._loading&&P(this._loadDataCallback)&&(this._forwardMore&&e.type===_e.Forward||this._backwardMore&&e.type===_e.Backward)){var i=function(n,o){t.addData(n,e.type,o).then(function(){}).catch(function(){})};this._loading=!0,this._loadDataCallback(B(B({},e),{callback:i}))}},r.prototype.clear=function(){this._forwardMore=!0,this._backwardMore=!0,this._loading=!0,this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear(),this._tooltipStore.clear()},r.prototype.getTimeScaleStore=function(){return this._timeScaleStore},r.prototype.getIndicatorStore=function(){return this._indicatorStore},r.prototype.getOverlayStore=function(){return this._overlayStore},r.prototype.getTooltipStore=function(){return this._tooltipStore},r.prototype.getActionStore=function(){return this._actionStore},r.prototype.getChart=function(){return this._chart},r}(),W={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},xt=7;function ia(){return dt(this,void 0,void 0,function(){return vt(this,function(r){switch(r.label){case 0:return[4,new Promise(function(e){var t=new ResizeObserver(function(i){e(i.every(function(n){return"devicePixelContentBoxSize"in n})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,r.sent()]}})})}var Wr=function(){function r(e,t){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Kt,this._mediaQueryListener=function(){var n=Ge(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*n),i._nextPixelHeight=Math.round(i._element.clientHeight*n),i._resetPixelRatio()},this._listener=t,this._element=Oe("canvas",e),this._ctx=this._element.getContext("2d",{willReadFrequently:!0}),ia().then(function(n){i._supportedDevicePixelContentBox=n,n?(i._resizeObserver=new ResizeObserver(function(o){var a,s=o.find(function(u){return u.target===i._element}),l=(a=s==null?void 0:s.devicePixelContentBoxSize)===null||a===void 0?void 0:a[0];P(l)&&(i._nextPixelWidth=l.inlineSize,i._nextPixelHeight=l.blockSize,(i._pixelWidth!==i._nextPixelWidth||i._pixelHeight!==i._nextPixelHeight)&&i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(Ge(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(n){return!1})}return r.prototype._resetPixelRatio=function(){var e=this;this._executeListener(function(){var t=e._element.clientWidth,i=e._element.clientHeight,n=e._nextPixelWidth/t,o=e._nextPixelHeight/i;e._width=t,e._height=i,e._pixelWidth=e._nextPixelWidth,e._pixelHeight=e._nextPixelHeight,e._element.width=e._nextPixelWidth,e._element.height=e._nextPixelHeight,e._ctx.scale(n,o)})},r.prototype._executeListener=function(e){var t=this;this._requestAnimationId===Kt&&(this._requestAnimationId=Ot(function(){t._ctx.clearRect(0,0,t._width,t._height),e==null||e(),t._listener(),t._requestAnimationId=Kt}))},r.prototype.update=function(e,t){if(this._width!==e||this._height!==t){if(this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px"),!this._supportedDevicePixelContentBox){var i=Ge(this._element);this._nextPixelWidth=Math.round(e*i),this._nextPixelHeight=Math.round(t*i),this._resetPixelRatio()}}else this._executeListener()},r.prototype.getElement=function(){return this._element},r.prototype.getContext=function(){return this._ctx},r.prototype.destroy=function(){var e,t;(e=this._resizeObserver)===null||e===void 0||e.unobserve(this._element),(t=this._mediaQueryList)===null||t===void 0||t.removeListener(this._mediaQueryListener)},r}();function vi(r){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return P(r)&&Se(e,r),e}var fi=function(r){N(e,r);function e(t,i){var n=r.call(this)||this;return n._bounding=vi(),n._pane=i,n.init(t),n}return e.prototype.init=function(t){this._rootContainer=t,this._container=this.createContainer(),t.appendChild(this._container)},e.prototype.setBounding=function(t){return Se(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(fr),gr=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(t){var i=this;r.prototype.init.call(this,t),this._mainCanvas=new Wr({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateMain(i._mainCanvas.getContext())}),this._overlayCanvas=new Wr({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateOverlay(i._overlayCanvas.getContext())});var n=this.getContainer();n.appendChild(this._mainCanvas.getElement()),n.appendChild(this._overlayCanvas.getElement())},e.prototype.createContainer=function(){return Oe("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,i,n){var o=i.width,a=i.height,s=i.left;t.style.left="".concat(s,"px");var l=n,u=t.clientWidth,c=t.clientHeight;switch((o!==u||a!==c)&&(t.style.width="".concat(o,"px"),t.style.height="".concat(a,"px"),l=3),l){case 0:{this._mainCanvas.update(o,a);break}case 1:{this._overlayCanvas.update(o,a);break}case 3:case 4:{this._mainCanvas.update(o,a),this._overlayCanvas.update(o,a);break}}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=Oe("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Ge(a);return a.width=n*l,a.height=o*l,s.scale(l,l),s.drawImage(this._mainCanvas.getElement(),0,0,n,o),t&&s.drawImage(this._overlayCanvas.getElement(),0,0,n,o),a},e}(fi);function gt(r){return r==="transparent"||r==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(r)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(r)}function na(r,e){var t=[];t=t.concat(e);for(var i=0;i<t.length;i++){var n=t[i],o=n.x,a=n.y,s=n.r,l=r.x-o,u=r.y-a;if(!(l*l+u*u>s*s))return!0}return!1}function oa(r,e,t){var i=[];i=i.concat(e);var n=t.style,o=n===void 0?O.Fill:n,a=t.color,s=a===void 0?"currentColor":a,l=t.borderSize,u=l===void 0?1:l,c=t.borderColor,h=c===void 0?"currentColor":c,f=t.borderStyle,v=f===void 0?R.Solid:f,d=t.borderDashedValue,p=d===void 0?[2,2]:d,g=(o===O.Fill||t.style===O.StrokeFill)&&(!V(s)||!gt(s));g&&(r.fillStyle=s,i.forEach(function(m){var _=m.x,S=m.y,y=m.r;r.beginPath(),r.arc(_,S,y,0,Math.PI*2),r.closePath(),r.fill()})),(o===O.Stroke||t.style===O.StrokeFill)&&u>0&&!gt(h)&&(r.strokeStyle=h,r.lineWidth=u,v===R.Dashed?r.setLineDash(p):r.setLineDash([]),i.forEach(function(m){var _=m.x,S=m.y,y=m.r;(!g||y>u)&&(r.beginPath(),r.arc(_,S,y,0,Math.PI*2),r.closePath(),r.stroke())}))}var aa={name:"circle",checkEventOn:na,draw:function(r,e,t){oa(r,e,t)}};function sa(r,e){var t=[];t=t.concat(e);for(var i=0;i<t.length;i++){for(var n=!1,o=t[i].coordinates,a=0,s=o.length-1;a<o.length;s=a++)o[a].y>r.y!=o[s].y>r.y&&r.x<(o[s].x-o[a].x)*(r.y-o[a].y)/(o[s].y-o[a].y)+o[a].x&&(n=!n);if(n)return!0}return!1}function la(r,e,t){var i=[];i=i.concat(e);var n=t.style,o=n===void 0?O.Fill:n,a=t.color,s=a===void 0?"currentColor":a,l=t.borderSize,u=l===void 0?1:l,c=t.borderColor,h=c===void 0?"currentColor":c,f=t.borderStyle,v=f===void 0?R.Solid:f,d=t.borderDashedValue,p=d===void 0?[2,2]:d;(o===O.Fill||t.style===O.StrokeFill)&&(!V(s)||!gt(s))&&(r.fillStyle=s,i.forEach(function(g){var m=g.coordinates;r.beginPath(),r.moveTo(m[0].x,m[0].y);for(var _=1;_<m.length;_++)r.lineTo(m[_].x,m[_].y);r.closePath(),r.fill()})),(o===O.Stroke||t.style===O.StrokeFill)&&u>0&&!gt(h)&&(r.strokeStyle=h,r.lineWidth=u,v===R.Dashed?r.setLineDash(p):r.setLineDash([]),i.forEach(function(g){var m=g.coordinates;r.beginPath(),r.moveTo(m[0].x,m[0].y);for(var _=1;_<m.length;_++)r.lineTo(m[_].x,m[_].y);r.closePath(),r.stroke()}))}var ua={name:"polygon",checkEventOn:sa,draw:function(r,e,t){la(r,e,t)}};function ca(r,e){var t=[];t=t.concat(e);for(var i=0;i<t.length;i++){var n=t[i],o=n.x,a=n.width;a<re*2&&(o-=re,a=re*2);var s=n.y,l=n.height;if(l<re*2&&(s-=re,l=re*2),r.x>=o&&r.x<=o+a&&r.y>=s&&r.y<=s+l)return!0}return!1}function pi(r,e,t){var i,n=[];n=n.concat(e);var o=t.style,a=o===void 0?O.Fill:o,s=t.color,l=s===void 0?"transparent":s,u=t.borderSize,c=u===void 0?1:u,h=t.borderColor,f=h===void 0?"transparent":h,v=t.borderStyle,d=v===void 0?R.Solid:v,p=t.borderRadius,g=p===void 0?0:p,m=t.borderDashedValue,_=m===void 0?[2,2]:m,S=(i=r.roundRect)!==null&&i!==void 0?i:r.rect,y=(a===O.Fill||t.style===O.StrokeFill)&&(!V(l)||!gt(l));if(y&&(r.fillStyle=l,n.forEach(function(b){var x=b.x,E=b.y,I=b.width,D=b.height;r.beginPath(),S.call(r,x,E,I,D,g),r.closePath(),r.fill()})),(a===O.Stroke||t.style===O.StrokeFill)&&c>0&&!gt(f)){r.strokeStyle=f,r.fillStyle=f,r.lineWidth=c,d===R.Dashed?r.setLineDash(_):r.setLineDash([]);var C=c%2===1?.5:0,w=Math.round(C*2);n.forEach(function(b){var x=b.x,E=b.y,I=b.width,D=b.height;I>c*2&&D>c*2?(r.beginPath(),S.call(r,x+C,E+C,I-w,D-w,g),r.closePath(),r.stroke()):y||r.fillRect(x,E,I,D)})}}var ha={name:"rect",checkEventOn:ca,draw:function(r,e,t){pi(r,e,t)}};function gi(r,e){var t=e.size,i=t===void 0?12:t,n=e.paddingLeft,o=n===void 0?0:n,a=e.paddingTop,s=a===void 0?0:a,l=e.paddingRight,u=l===void 0?0:l,c=e.paddingBottom,h=c===void 0?0:c,f=e.weight,v=f===void 0?"normal":f,d=e.family,p=r.x,g=r.y,m=r.text,_=r.align,S=_===void 0?"left":_,y=r.baseline,C=y===void 0?"top":y,w=r.width,b=r.height,x=w??o+Vt(m,i,v,d)+u,E=b??s+i+h,I;switch(S){case"left":case"start":{I=p;break}case"right":case"end":{I=p-x;break}default:{I=p-x/2;break}}var D;switch(C){case"top":case"hanging":{D=g;break}case"bottom":case"ideographic":case"alphabetic":{D=g-E;break}default:{D=g-E/2;break}}return{x:I,y:D,width:x,height:E}}function da(r,e,t){var i=[];i=i.concat(e);for(var n=0;n<i.length;n++){var o=gi(i[n],t),a=o.x,s=o.y,l=o.width,u=o.height;if(r.x>=a&&r.x<=a+l&&r.y>=s&&r.y<=s+u)return!0}return!1}function va(r,e,t){var i=[];i=i.concat(e);var n=t.color,o=n===void 0?"currentColor":n,a=t.size,s=a===void 0?12:a,l=t.family,u=t.weight,c=t.paddingLeft,h=c===void 0?0:c,f=t.paddingTop,v=f===void 0?0:f,d=t.paddingRight,p=d===void 0?0:d,g=i.map(function(m){return gi(m,t)});pi(r,g,B(B({},t),{color:t.backgroundColor})),r.textAlign="left",r.textBaseline="top",r.font=it(s,u,l),r.fillStyle=o,i.forEach(function(m,_){var S=g[_];r.fillText(m.text,S.x+h,S.y+v,S.width-h-p)})}var mi={name:"text",checkEventOn:da,draw:function(r,e,t){va(r,e,t)}},fa=mi;function pa(r,e){var t=r.x-e.x,i=r.y-e.y;return Math.sqrt(t*t+i*i)}function ga(r,e){var t=[];t=t.concat(e);for(var i=0;i<t.length;i++){var n=t[i];if(Math.abs(pa(r,n)-n.r)<re){var o=n.r,a=n.startAngle,s=n.endAngle,l=o*Math.cos(a)+n.x,u=o*Math.sin(a)+n.y,c=o*Math.cos(s)+n.x,h=o*Math.sin(s)+n.y;if(r.x<=Math.max(l,c)+re&&r.x>=Math.min(l,c)-re&&r.y<=Math.max(u,h)+re&&r.y>=Math.min(u,h)-re)return!0}}return!1}function ma(r,e,t){var i=[];i=i.concat(e);var n=t.style,o=n===void 0?R.Solid:n,a=t.size,s=a===void 0?1:a,l=t.color,u=l===void 0?"currentColor":l,c=t.dashedValue,h=c===void 0?[2,2]:c;r.lineWidth=s,r.strokeStyle=u,o===R.Dashed?r.setLineDash(h):r.setLineDash([]),i.forEach(function(f){var v=f.x,d=f.y,p=f.r,g=f.startAngle,m=f.endAngle;r.beginPath(),r.arc(v,d,p,g,m),r.stroke(),r.closePath()})}var _a={name:"arc",checkEventOn:ga,draw:function(r,e,t){ma(r,e,t)}},_i={},ya=[aa,Bo,ua,ha,mi,fa,_a];ya.forEach(function(r){_i[r.name]=To.extend(r)});function Sa(r){var e;return(e=_i[r])!==null&&e!==void 0?e:null}var Be=function(r){N(e,r);function e(t){var i=r.call(this)||this;return i._widget=t,i}return e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,i){var n=Sa(t.name);if(n!==null){var o=new n(t);if(P(i)){for(var a in i)i.hasOwnProperty(a)&&o.registerEvent(a,i[a]);this.addChild(o)}return o}return null},e.prototype.draw=function(t){this.clear(),this.drawImp(t)},e}(fr),Ca=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i,n,o=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=o.getBounding(),u=s.getStyles().grid,c=u.show;if(c){t.save(),t.globalCompositeOperation="destination-over";var h=u.horizontal,f=h.show;if(f){var v=a.getAxisComponent(),d=v.getTicks().map(function(_){return{coordinates:[{x:0,y:_.coord},{x:l.width,y:_.coord}]}});(i=this.createFigure({name:"line",attrs:d,styles:h}))===null||i===void 0||i.draw(t)}var p=u.vertical,g=p.show;if(g){var m=s.getXAxisPane().getAxisComponent(),d=m.getTicks().map(function(S){return{coordinates:[{x:S.coord,y:0},{x:S.coord,y:l.height}]}});(n=this.createFigure({name:"line",attrs:d,styles:p}))===null||n===void 0||n.draw(t)}t.restore()}},e}(Be),mr=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.eachChildren=function(t){var i=this.getWidget().getPane(),n=i.getChart().getChartStore(),o=n.getVisibleDataList(),a=n.getTimeScaleStore().getBarSpace();o.forEach(function(s,l){t(s,a,l)})},e}(Be),yi=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._boundCandleBarClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().getActionStore().execute(ye.OnCandleBarClick,i),!1}},t}return e.prototype.drawImp=function(t){var i=this,n=this.getWidget().getPane(),o=n.getId()===X.CANDLE,a=n.getChart().getChartStore(),s=this.getCandleBarOptions(a);if(s!==null){var l=0,u=0;if(s.type===de.Ohlc){var c=a.getTimeScaleStore().getBarSpace().gapBar;l=Math.min(Math.max(Math.round(c*.2),1),8),l>2&&l%2===1&&l--,u=Math.floor(u/2)}var h=n.getAxisComponent();this.eachChildren(function(f,v){var d=f.data,p=f.x;if(P(d)){var g=d.open,m=d.high,_=d.low,S=d.close,y=s.type,C=s.styles,w=[];S>g?(w[0]=C.upColor,w[1]=C.upBorderColor,w[2]=C.upWickColor):S<g?(w[0]=C.downColor,w[1]=C.downBorderColor,w[2]=C.downWickColor):(w[0]=C.noChangeColor,w[1]=C.noChangeBorderColor,w[2]=C.noChangeWickColor);var b=h.convertToPixel(g),x=h.convertToPixel(S),E=[b,x,h.convertToPixel(m),h.convertToPixel(_)];E.sort(function(D,A){return D-A});var I=[];switch(y){case de.CandleSolid:{I=i._createSolidBar(p,E,v,w);break}case de.CandleStroke:{I=i._createStrokeBar(p,E,v,w);break}case de.CandleUpStroke:{S>g?I=i._createStrokeBar(p,E,v,w):I=i._createSolidBar(p,E,v,w);break}case de.CandleDownStroke:{g>S?I=i._createStrokeBar(p,E,v,w):I=i._createSolidBar(p,E,v,w);break}case de.Ohlc:{I=[{name:"rect",attrs:[{x:p-u,y:E[0],width:l,height:E[3]-E[0]},{x:p-v.halfGapBar,y:b+l>E[3]?E[3]-l:b,width:v.halfGapBar,height:l},{x:p+u,y:x+l>E[3]?E[3]-l:x,width:v.halfGapBar-u,height:l}],styles:{color:w[0]}}];break}}I.forEach(function(D){var A,M;o&&(M={mouseClickEvent:i._boundCandleBarClickEvent(f)}),(A=i.createFigure(D,M))===null||A===void 0||A.draw(t)})}})}},e.prototype.getCandleBarOptions=function(t){var i=t.getStyles().candle;return{type:i.type,styles:i.bar}},e.prototype._createSolidBar=function(t,i,n,o){return[{name:"rect",attrs:{x:t,y:i[0],width:1,height:i[3]-i[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar,height:Math.max(1,i[2]-i[1])},styles:{style:O.StrokeFill,color:o[0],borderColor:o[1]}}]},e.prototype._createStrokeBar=function(t,i,n,o){return[{name:"rect",attrs:[{x:t,y:i[0],width:1,height:i[1]-i[0]},{x:t,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar,height:Math.max(1,i[2]-i[1])},styles:{style:O.Stroke,borderColor:o[1]}}]},e}(mr),ba=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCandleBarOptions=function(t){var i,n,o=this.getWidget().getPane(),a=o.getAxisComponent();if(!a.isInCandle()){var s=t.getIndicatorStore().getInstances(o.getId());try{for(var l=rt(s),u=l.next();!u.done;u=l.next()){var c=u.value;if(c.shouldOhlc&&c.visible){var h=c.styles,f=t.getStyles().indicator,v=ne(h,"ohlc.upColor",f.ohlc.upColor),d=ne(h,"ohlc.downColor",f.ohlc.downColor),p=ne(h,"ohlc.noChangeColor",f.ohlc.noChangeColor);return{type:de.Ohlc,styles:{upColor:v,downColor:d,noChangeColor:p,upBorderColor:v,downBorderColor:d,noChangeBorderColor:p,upWickColor:v,downWickColor:d,noChangeWickColor:p}}}}}catch(g){i={error:g}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}return null},e.prototype.drawImp=function(t){var i=this;r.prototype.drawImp.call(this,t);var n=this.getWidget(),o=n.getPane(),a=o.getChart(),s=n.getBounding(),l=a.getXAxisPane().getAxisComponent(),u=o.getAxisComponent(),c=a.getChartStore(),h=c.getDataList(),f=c.getTimeScaleStore(),v=f.getVisibleRange(),d=c.getIndicatorStore().getInstances(o.getId()),p=c.getStyles().indicator;t.save(),d.forEach(function(g){var m;if(g.visible){g.zLevel<0?t.globalCompositeOperation="destination-over":t.globalCompositeOperation="source-over";var _=!1;if(g.draw!==null&&(t.save(),_=(m=g.draw({ctx:t,kLineDataList:h,indicator:g,visibleRange:v,bounding:s,barSpace:f.getBarSpace(),defaultStyles:p,xAxis:l,yAxis:u}))!==null&&m!==void 0?m:!1,t.restore()),!_){var S=g.result,y=[];i.eachChildren(function(C,w){var b,x,E,I=w.halfGapBar,D=C.dataIndex,A=C.x,M=l.convertToPixel(D-1),T=l.convertToPixel(D+1),z=(b=S[D-1])!==null&&b!==void 0?b:null,L=(x=S[D])!==null&&x!==void 0?x:null,U=(E=S[D+1])!==null&&E!==void 0?E:null,K={x:M},oe={x:A},le={x:T};g.figures.forEach(function($){var Y=$.key,J=z==null?void 0:z[Y];F(J)&&(K[Y]=u.convertToPixel(J));var q=L==null?void 0:L[Y];F(q)&&(oe[Y]=u.convertToPixel(q));var Q=U==null?void 0:U[Y];F(Q)&&(le[Y]=u.convertToPixel(Q))}),vr(h,g,D,p,function($,Y,J){var q,Q,G;if(P(L==null?void 0:L[$.key])){var Pe=oe[$.key],Ce=(q=$.attrs)===null||q===void 0?void 0:q.call($,{data:{prev:z,current:L,next:U},coordinate:{prev:K,current:oe,next:le},bounding:s,barSpace:w,xAxis:l,yAxis:u});if(!P(Ce))switch($.type){case"circle":{Ce={x:A,y:Pe,r:Math.max(1,I)};break}case"rect":case"bar":{var Ne=(Q=$.baseValue)!==null&&Q!==void 0?Q:u.getRange().from,We=u.convertToPixel(Ne),Ke=Math.abs(We-Pe);Ne!==(L==null?void 0:L[$.key])&&(Ke=Math.max(1,Ke));var De=void 0;Pe>We?De=We:De=Pe,Ce={x:A-I,y:De,width:Math.max(1,I*2),height:Ke};break}case"line":{P(y[J])||(y[J]=[]),F(oe[$.key])&&F(le[$.key])&&y[J].push({coordinates:[{x:oe.x,y:oe[$.key]},{x:le.x,y:le[$.key]}],styles:Y});break}}var ot=$.type;P(Ce)&&ot!=="line"&&((G=i.createFigure({name:ot==="bar"?"rect":ot,attrs:Ce,styles:Y}))===null||G===void 0||G.draw(t))}})}),y.forEach(function(C){if(C.length>1){for(var w=[{coordinates:[C[0].coordinates[0],C[0].coordinates[1]],styles:C[0].styles}],b=1;b<C.length;b++){var x=w[w.length-1],E=C[b],I=x.coordinates[x.coordinates.length-1];I.x===E.coordinates[0].x&&I.y===E.coordinates[0].y&&x.styles.style===E.styles.style&&x.styles.color===E.styles.color&&x.styles.size===E.styles.size&&x.styles.smooth===E.styles.smooth&&x.styles.dashedValue[0]===E.styles.dashedValue[0]&&x.styles.dashedValue[1]===E.styles.dashedValue[1]?x.coordinates.push(E.coordinates[1]):w.push({coordinates:[E.coordinates[0],E.coordinates[1]],styles:E.styles})}w.forEach(function(D){var A,M=D.coordinates,T=D.styles;(A=i.createFigure({name:"line",attrs:{coordinates:M},styles:T}))===null||A===void 0||A.draw(t)})}})}}}),t.restore()},e}(yi),wa=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=i.getBounding(),a=i.getPane().getChart().getChartStore(),s=a.getTooltipStore().getCrosshair(),l=a.getStyles().crosshair;if(V(s.paneId)&&l.show){if(s.paneId===n.getId()){var u=s.y;this._drawLine(t,[{x:0,y:u},{x:o.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:o.height}],l.vertical)}},e.prototype._drawLine=function(t,i,n){var o;if(n.show){var a=n.line;a.show&&((o=this.createFigure({name:"line",attrs:{coordinates:i},styles:a}))===null||o===void 0||o.draw(t))}},e}(Be),Si=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._boundIconClickEvent=function(i){return function(){var n=t.getWidget().getPane();return n.getChart().getChartStore().getActionStore().execute(ye.OnTooltipIconClick,B({},i)),!0}},t._boundIconMouseMoveEvent=function(i){return function(){var n=t.getWidget().getPane(),o=n.getChart().getChartStore().getTooltipStore();return o.setActiveIcon(B({},i)),!0}},t}return e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=n.getChart().getChartStore(),a=o.getTooltipStore().getCrosshair();if(P(a.kLineData)){var s=i.getBounding(),l=o.getCustomApi(),u=o.getThousandsSeparator(),c=o.getDecimalFoldThreshold(),h=o.getIndicatorStore().getInstances(n.getId()),f=o.getTooltipStore().getActiveIcon(),v=o.getStyles().indicator,d=v.tooltip,p=d.offsetLeft,g=d.offsetTop,m=d.offsetRight;this.drawIndicatorTooltip(t,n.getId(),o.getDataList(),a,f,h,l,u,c,p,g,s.width-m,v)}},e.prototype.drawIndicatorTooltip=function(t,i,n,o,a,s,l,u,c,h,f,v,d){var p=this,g=d.tooltip;if(this.isDrawTooltip(o,g)){var m=g.text;s.forEach(function(_){var S=0,y={x:h,y:f},C=p.getIndicatorTooltipData(n,o,_,l,u,c,d),w=C.name,b=C.calcParamsText,x=C.values,E=C.icons,I=w.length>0,D=x.length>0;if(I||D){var A=nt(p.classifyTooltipIcons(E),3),M=A[0],T=A[1],z=A[2];if(S=p.drawStandardTooltipIcons(t,a,M,y,i,_.name,h,S,v),I){var L=w;b.length>0&&(L="".concat(L).concat(b)),S=p.drawStandardTooltipLegends(t,[{title:{text:"",color:m.color},value:{text:L,color:m.color}}],y,h,S,v,m)}S=p.drawStandardTooltipIcons(t,a,T,y,i,_.name,h,S,v),D&&(S=p.drawStandardTooltipLegends(t,x,y,h,S,v,g.text)),S=p.drawStandardTooltipIcons(t,a,z,y,i,_.name,h,S,v),f=y.y+S}})}return f},e.prototype.drawStandardTooltipIcons=function(t,i,n,o,a,s,l,u,c){var h=this;if(n.length>0){var f=0,v=0;n.forEach(function(d){var p=d.marginLeft,g=p===void 0?0:p,m=d.marginTop,_=m===void 0?0:m,S=d.marginRight,y=S===void 0?0:S,C=d.marginBottom,w=C===void 0?0:C,b=d.paddingLeft,x=b===void 0?0:b,E=d.paddingTop,I=E===void 0?0:E,D=d.paddingRight,A=D===void 0?0:D,M=d.paddingBottom,T=M===void 0?0:M,z=d.size,L=d.fontFamily,U=d.icon;t.font=it(z,"normal",L),f+=g+x+t.measureText(U).width+A+y,v=Math.max(v,_+I+z+T+w)}),o.x+f>c?(o.x=l,o.y+=u,u=v):u=Math.max(u,v),n.forEach(function(d){var p,g=d.marginLeft,m=g===void 0?0:g,_=d.marginTop,S=_===void 0?0:_,y=d.marginRight,C=y===void 0?0:y,w=d.paddingLeft,b=w===void 0?0:w,x=d.paddingTop,E=x===void 0?0:x,I=d.paddingRight,D=I===void 0?0:I,A=d.paddingBottom,M=A===void 0?0:A,T=d.color,z=d.activeColor,L=d.size,U=d.fontFamily,K=d.icon,oe=d.backgroundColor,le=d.activeBackgroundColor,$=(i==null?void 0:i.paneId)===a&&(i==null?void 0:i.indicatorName)===s&&(i==null?void 0:i.iconId)===d.id;(p=h.createFigure({name:"text",attrs:{text:K,x:o.x+m,y:o.y+S},styles:{paddingLeft:b,paddingTop:E,paddingRight:D,paddingBottom:M,color:$?z:T,size:L,family:U,backgroundColor:$?le:oe}},{mouseClickEvent:h._boundIconClickEvent({paneId:a,indicatorName:s,iconId:d.id}),mouseMoveEvent:h._boundIconMouseMoveEvent({paneId:a,indicatorName:s,iconId:d.id})}))===null||p===void 0||p.draw(t),o.x+=m+b+t.measureText(K).width+D+C})}return u},e.prototype.drawStandardTooltipLegends=function(t,i,n,o,a,s,l){var u=this;if(i.length>0){var c=l.marginLeft,h=l.marginTop,f=l.marginRight,v=l.marginBottom,d=l.size,p=l.family,g=l.weight;t.font=it(d,g,p),i.forEach(function(m){var _,S,y=m.title,C=m.value,w=t.measureText(y.text).width,b=t.measureText(C.text).width,x=w+b,E=h+d+v;n.x+c+x+f>s?(n.x=o,n.y+=a,a=E):a=Math.max(a,E),y.text.length>0&&((_=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+h,text:y.text},styles:{color:y.color,size:d,family:p,weight:g}}))===null||_===void 0||_.draw(t)),(S=u.createFigure({name:"text",attrs:{x:n.x+c+w,y:n.y+h,text:C.text},styles:{color:C.color,size:d,family:p,weight:g}}))===null||S===void 0||S.draw(t),n.x+=c+x+f})}return a},e.prototype.isDrawTooltip=function(t,i){var n=i.showRule;return n===je.Always||n===je.FollowCross&&V(t.paneId)},e.prototype.getIndicatorTooltipData=function(t,i,n,o,a,s,l){var u,c,h=l.tooltip,f=h.showName?n.shortName:"",v="",d=n.calcParams;d.length>0&&h.showParams&&(v="(".concat(d.join(","),")"));var p={name:f,calcParamsText:v,values:[],icons:h.icons},g=i.dataIndex,m=(u=n.result)!==null&&u!==void 0?u:[],_=[];if(n.visible){var S=(c=m[g])!==null&&c!==void 0?c:{};vr(t,n,g,l,function(T,z){if(V(T.title)){var L=z.color,U=S[T.key];F(U)&&(U=Z(U,n.precision),n.shouldFormatBigNumber&&(U=o.formatBigNumber(U))),_.push({title:{text:T.title,color:L},value:{text:ie(te(U??h.defaultValue,a),s),color:L}})}}),p.values=_}if(n.createTooltipDataSource!==null){var y=this.getWidget(),C=y.getPane(),w=C.getChart().getChartStore(),b=n.createTooltipDataSource({kLineDataList:t,indicator:n,visibleRange:w.getTimeScaleStore().getVisibleRange(),bounding:y.getBounding(),crosshair:i,defaultStyles:l,xAxis:C.getChart().getXAxisPane().getAxisComponent(),yAxis:C.getAxisComponent()}),x=b.name,E=b.calcParamsText,I=b.values,D=b.icons;if(V(x)&&h.showName&&(p.name=x),V(E)&&h.showParams&&(p.calcParamsText=E),P(D)&&(p.icons=D),P(I)&&n.visible){var A=[],M=l.tooltip.text.color;I.forEach(function(T){var z={text:"",color:M};ke(T.title)?z=T.title:z.text=T.title;var L={text:"",color:M};ke(T.value)?L=T.value:L.text=T.value,L.text=ie(te(L.text,a),s),A.push({title:z,value:L})}),p.values=A}}return p},e.prototype.classifyTooltipIcons=function(t){var i=[],n=[],o=[];return t.forEach(function(a){switch(a.position){case Et.Left:{i.push(a);break}case Et.Middle:{n.push(a);break}case Et.Right:{o.push(a);break}}}),[i,n,o]},e}(Be),Ci=function(r){N(e,r);function e(t){var i=r.call(this,t)||this;return i._initEvent(),i}return e.prototype._initEvent=function(){var t=this,i=this.getWidget().getPane(),n=i.getId(),o=i.getChart().getChartStore().getOverlayStore();this.registerEvent("mouseMoveEvent",function(a){var s,l=o.getProgressInstanceInfo();if(l!==null){var u=l.instance,c=l.paneId;u.isStart()&&(o.updateProgressInstanceInfo(n),c=n);var h=u.points.length-1,f="".concat(st,"point_").concat(h);return u.isDrawing()&&c===n&&(u.eventMoveForDrawing(t._coordinateToPoint(l.instance,a)),(s=u.onDrawing)===null||s===void 0||s.call(u,B({overlay:u,figureKey:f,figureIndex:h},a))),t._figureMouseMoveEvent(u,1,f,h,0)(a)}return o.setHoverInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseClickEvent",function(a){var s,l,u=o.getProgressInstanceInfo();if(u!==null){var c=u.instance,h=u.paneId;c.isStart()&&(o.updateProgressInstanceInfo(n,!0),h=n);var f=c.points.length-1,v="".concat(st,"point_").concat(f);return c.isDrawing()&&h===n&&(c.eventMoveForDrawing(t._coordinateToPoint(c,a)),(s=c.onDrawing)===null||s===void 0||s.call(c,B({overlay:c,figureKey:v,figureIndex:f},a)),c.nextStep(),c.isDrawing()||(o.progressInstanceComplete(),(l=c.onDrawEnd)===null||l===void 0||l.call(c,B({overlay:c,figureKey:v,figureIndex:f},a)))),t._figureMouseClickEvent(c,1,v,f,0)(a)}return o.setClickInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseDoubleClickEvent",function(a){var s,l=o.getProgressInstanceInfo();if(l!==null){var u=l.instance,c=l.paneId;if(u.isDrawing()&&c===n&&(u.forceComplete(),!u.isDrawing())){o.progressInstanceComplete();var h=u.points.length-1,f="".concat(st,"point_").concat(h);(s=u.onDrawEnd)===null||s===void 0||s.call(u,B({overlay:u,figureKey:f,figureIndex:h},a))}var v=u.points.length-1;return t._figureMouseClickEvent(u,1,"".concat(st,"point_").concat(v),v,0)(a)}return!1}).registerEvent("mouseRightClickEvent",function(a){var s=o.getProgressInstanceInfo();if(s!==null){var l=s.instance;if(l.isDrawing()){var u=l.points.length-1;return t._figureMouseRightClickEvent(l,1,"".concat(st,"point_").concat(u),u,0)(a)}}return!1}).registerEvent("mouseUpEvent",function(a){var s,l=o.getPressedInstanceInfo(),u=l.instance,c=l.figureIndex,h=l.figureKey;return u!==null&&((s=u.onPressedMoveEnd)===null||s===void 0||s.call(u,B({overlay:u,figureKey:h,figureIndex:c},a))),o.setPressedInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(a){var s,l,u=o.getPressedInstanceInfo(),c=u.instance,h=u.figureType,f=u.figureIndex,v=u.figureKey;if(c!==null){if(!c.lock&&!((l=(s=c.onPressedMoving)===null||s===void 0?void 0:s.call(c,B({overlay:c,figureIndex:f,figureKey:v},a)))!==null&&l!==void 0&&l)){var d=t._coordinateToPoint(c,a);h===1?c.eventPressedPointMove(d,f):c.eventPressedOtherMove(d,t.getWidget().getPane().getChart().getChartStore().getTimeScaleStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,i,n,o,a,s){var l;if(!t.isDrawing()){var u=[];if(P(s)&&(tt(s)?s&&(u=zn()):u=s),u.length===0)return{mouseMoveEvent:this._figureMouseMoveEvent(t,i,n,o,a),mouseDownEvent:this._figureMouseDownEvent(t,i,n,o,a),mouseClickEvent:this._figureMouseClickEvent(t,i,n,o,a),mouseRightClickEvent:this._figureMouseRightClickEvent(t,i,n,o,a),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,i,n,o,a)};l={},!u.includes("mouseMoveEvent")&&!u.includes("touchMoveEvent")&&(l.mouseMoveEvent=this._figureMouseMoveEvent(t,i,n,o,a)),!u.includes("mouseDownEvent")&&!u.includes("touchStartEvent")&&(l.mouseDownEvent=this._figureMouseDownEvent(t,i,n,o,a)),!u.includes("mouseClickEvent")&&!u.includes("tapEvent")&&(l.mouseClickEvent=this._figureMouseClickEvent(t,i,n,o,a)),!u.includes("mouseDoubleClickEvent")&&!u.includes("doubleTapEvent")&&(l.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(t,i,n,o,a)),u.includes("mouseRightClickEvent")||(l.mouseRightClickEvent=this._figureMouseRightClickEvent(t,i,n,o,a))}return l},e.prototype._figureMouseMoveEvent=function(t,i,n,o,a){var s=this;return function(l){var u=s.getWidget().getPane(),c=u.getChart().getChartStore().getOverlayStore();return c.setHoverInstanceInfo({paneId:u.getId(),instance:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a},l),!0}},e.prototype._figureMouseDownEvent=function(t,i,n,o,a){var s=this;return function(l){var u,c=s.getWidget().getPane(),h=c.getId(),f=c.getChart().getChartStore().getOverlayStore();return t.startPressedMove(s._coordinateToPoint(t,l)),(u=t.onPressedMoveStart)===null||u===void 0||u.call(t,B({overlay:t,figureIndex:o,figureKey:n},l)),f.setPressedInstanceInfo({paneId:h,instance:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a}),!0}},e.prototype._figureMouseClickEvent=function(t,i,n,o,a){var s=this;return function(l){var u=s.getWidget().getPane(),c=u.getId(),h=u.getChart().getChartStore().getOverlayStore();return h.setClickInstanceInfo({paneId:c,instance:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a},l),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,i,n,o,a){return function(s){var l;return(l=t.onDoubleClick)===null||l===void 0||l.call(t,B(B({},s),{figureIndex:o,figureKey:n,overlay:t})),!0}},e.prototype._figureMouseRightClickEvent=function(t,i,n,o,a){var s=this;return function(l){var u,c;if(!((c=(u=t.onRightClick)===null||u===void 0?void 0:u.call(t,B({overlay:t,figureIndex:o,figureKey:n},l)))!==null&&c!==void 0&&c)){var h=s.getWidget().getPane(),f=h.getChart().getChartStore().getOverlayStore();f.removeInstance(t)}return!0}},e.prototype._coordinateToPoint=function(t,i){var n,o={},a=this.getWidget().getPane(),s=a.getChart(),l=a.getId(),u=s.getChartStore().getTimeScaleStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=s.getXAxisPane().getAxisComponent(),h=c.convertFromPixel(i.x),f=(n=u.dataIndexToTimestamp(h))!==null&&n!==void 0?n:void 0;o.dataIndex=h,o.timestamp=f}if(this.coordinateToPointValueFlag()){var v=a.getAxisComponent(),d=v.convertFromPixel(i.y);if(t.mode!==pt.Normal&&l===X.CANDLE&&F(o.dataIndex)){var p=u.getDataByDataIndex(o.dataIndex);if(p!==null){var g=t.modeSensitivity;if(d>p.high)if(t.mode===pt.WeakMagnet){var m=v.convertToPixel(p.high),_=v.convertFromPixel(m-g);d<_&&(d=p.high)}else d=p.high;else if(d<p.low)if(t.mode===pt.WeakMagnet){var S=v.convertToPixel(p.low),_=v.convertFromPixel(S-g);d>_&&(d=p.low)}else d=p.low;else{var y=Math.max(p.open,p.close),C=Math.min(p.open,p.close);d>y?d-y<p.high-d?d=y:d=p.high:d<C?d-p.low<C-d?d=p.low:d=C:y-d<d-C?d=y:d=C}}}o.value=d}return o},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,i,n){return this.getWidget().getPane().getChart().getChartStore().getOverlayStore().isDrawing()?this.onEvent(t,i,n):r.prototype.dispatchEvent.call(this,t,i,n)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var i=this,n=this.getWidget(),o=n.getPane(),a=o.getId(),s=o.getChart(),l=o.getAxisComponent(),u=s.getXAxisPane().getAxisComponent(),c=n.getBounding(),h=s.getChartStore(),f=h.getCustomApi(),v=h.getThousandsSeparator(),d=h.getDecimalFoldThreshold(),p=h.getTimeScaleStore(),g=p.getDateTimeFormat(),m=p.getBarSpace(),_=h.getPrecision(),S=h.getStyles().overlay,y=h.getOverlayStore(),C=y.getHoverInstanceInfo(),w=y.getClickInstanceInfo(),b=this.getCompleteOverlays(y,a),x=h.getIndicatorStore().getInstances(a),E=x.reduce(function(A,M){var T=M.precision;return A[M.name]=T,A.max=Math.max(A.max,T),A.min=Math.min(A.min,T),A.excludePriceVolumeMax=Math.max(A.excludePriceVolumeMax,T),A.excludePriceVolumeMin=Math.min(A.excludePriceVolumeMin,T),A},B(B({},_),{max:Math.max(_.price,_.volume),min:Math.min(_.price,_.volume),excludePriceVolumeMax:Number.MIN_SAFE_INTEGER,excludePriceVolumeMin:Number.MAX_SAFE_INTEGER}));b.forEach(function(A){A.visible&&i._drawOverlay(t,A,c,m,E,g,f,v,d,S,u,l,C,w,p)});var I=y.getProgressInstanceInfo();if(I!==null){var D=this.getProgressOverlay(I,a);D!==null&&D.visible&&this._drawOverlay(t,D,c,m,E,g,f,v,d,S,u,l,C,w,p)}},e.prototype._drawOverlay=function(t,i,n,o,a,s,l,u,c,h,f,v,d,p,g){var m=i.points,_=m.map(function(y){var C,w,b=y.dataIndex;F(y.timestamp)&&(b=g.timestampToDataIndex(y.timestamp));var x={x:0,y:0};return F(b)&&(x.x=(C=f==null?void 0:f.convertToPixel(b))!==null&&C!==void 0?C:0),F(y.value)&&(x.y=(w=v==null?void 0:v.convertToPixel(y.value))!==null&&w!==void 0?w:0),x});if(_.length>0){var S=new Array().concat(this.getFigures(i,_,n,o,a,u,c,s,h,f,v));this.drawFigures(t,i,S,h)}this.drawDefaultFigures(t,i,_,n,a,s,l,u,c,h,f,v,d,p)},e.prototype.drawFigures=function(t,i,n,o){var a=this;n.forEach(function(s,l){var u=s.type,c=s.styles,h=s.attrs,f=s.ignoreEvent,v=[].concat(h);v.forEach(function(d,p){var g,m,_,S=a._createFigureEvents(i,2,(g=s.key)!==null&&g!==void 0?g:"",l,p,f),y=B(B(B({},o[u]),(m=i.styles)===null||m===void 0?void 0:m[u]),c);(_=a.createFigure({name:u,attrs:d,styles:y},S))===null||_===void 0||_.draw(t)})})},e.prototype.getCompleteOverlays=function(t,i){return t.getInstances(i)},e.prototype.getProgressOverlay=function(t,i){return t.paneId===i?t.instance:null},e.prototype.getFigures=function(t,i,n,o,a,s,l,u,c,h,f){var v,d;return(d=(v=t.createPointFigures)===null||v===void 0?void 0:v.call(t,{overlay:t,coordinates:i,bounding:n,barSpace:o,precision:a,thousandsSeparator:s,decimalFoldThreshold:l,dateTimeFormat:u,defaultStyles:c,xAxis:h,yAxis:f}))!==null&&d!==void 0?d:[]},e.prototype.drawDefaultFigures=function(t,i,n,o,a,s,l,u,c,h,f,v,d,p){var g=this,m,_;if(i.needDefaultPointFigure&&(((m=d.instance)===null||m===void 0?void 0:m.id)===i.id&&d.figureType!==0||((_=p.instance)===null||_===void 0?void 0:_.id)===i.id&&p.figureType!==0)){var S=i.styles,y=B(B({},h.point),S==null?void 0:S.point);n.forEach(function(C,w){var b,x,E,I=C.x,D=C.y,A=y.radius,M=y.color,T=y.borderColor,z=y.borderSize;((b=d.instance)===null||b===void 0?void 0:b.id)===i.id&&d.figureType===1&&d.figureIndex===w&&(A=y.activeRadius,M=y.activeColor,T=y.activeBorderColor,z=y.activeBorderSize),(x=g.createFigure({name:"circle",attrs:{x:I,y:D,r:A+z},styles:{color:T}},g._createFigureEvents(i,1,"".concat(st,"point_").concat(w),w,0)))===null||x===void 0||x.draw(t),(E=g.createFigure({name:"circle",attrs:{x:I,y:D,r:A},styles:{color:M}}))===null||E===void 0||E.draw(t)})}},e}(Be),bi=function(r){N(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n._gridView=new Ca(n),n._indicatorView=new ba(n),n._crosshairLineView=new wa(n),n._tooltipView=n.createTooltipView(),n._overlayView=new Ci(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return i.getChart().getChartStore().getTooltipStore().setActiveIcon(),!1}),n}return e.prototype.getName=function(){return W.MAIN},e.prototype.updateMain=function(t){this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t)},e.prototype.createTooltipView=function(){return new Si(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this._overlayView.draw(t),this._crosshairLineView.draw(t),this._tooltipView.draw(t)},e}(gr),Ea=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._ripplePoint=t.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),t._animationFrameTime=0,t._animation=new or({iterationCount:1/0}).doFrame(function(i){t._animationFrameTime=i;var n=t.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),t}return e.prototype.drawImp=function(t){var i,n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=l.getDataList(),c=u.length-1,h=a.getBounding(),f=s.getAxisComponent(),v=l.getStyles().candle.area,d=[],p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER,m=null;if(this.eachChildren(function(b){var x=b.data,E=b.x,I=x==null?void 0:x[v.value];if(F(I)){var D=f.convertToPixel(I);g===Number.MIN_SAFE_INTEGER&&(g=E),d.push({x:E,y:D}),p=Math.min(p,D),b.dataIndex===c&&(m={x:E,y:D})}}),d.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:v.lineColor,size:v.lineSize,smooth:v.smooth}}))===null||i===void 0||i.draw(t);var _=v.backgroundColor,S=void 0;if(xe(_)){var y=t.createLinearGradient(0,h.height,0,p);try{_.forEach(function(b){var x=b.offset,E=b.color;y.addColorStop(x,E)})}catch{}S=y}else S=_;t.fillStyle=S,t.beginPath(),t.moveTo(g,h.height),t.lineTo(d[0].x,d[0].y),ui(t,d,v.smooth),t.lineTo(d[d.length-1].x,h.height),t.closePath(),t.fill()}var C=v.point;if(C.show&&P(m)){(n=this.createFigure({name:"circle",attrs:{x:m.x,y:m.y,r:C.radius},styles:{style:"fill",color:C.color}}))===null||n===void 0||n.draw(t);var w=C.rippleRadius;C.animation&&(w=C.radius+this._animationFrameTime/C.animationDuration*(C.rippleRadius-C.radius),this._animation.setDuration(C.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:m.x,y:m.y,r:w}).setStyles({style:"fill",color:C.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(mr),xa=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=n.getChart().getChartStore(),a=o.getStyles().candle.priceMark,s=a.high,l=a.low;if(a.show&&(s.show||l.show)){var u=o.getThousandsSeparator(),c=o.getDecimalFoldThreshold(),h=o.getPrecision(),f=n.getAxisComponent(),v=Number.MIN_SAFE_INTEGER,d=0,p=Number.MAX_SAFE_INTEGER,g=0;this.eachChildren(function(S){var y=S.data,C=S.x;P(y)&&(v<y.high&&(v=y.high,d=C),p>y.low&&(p=y.low,g=C))});var m=f.convertToPixel(v),_=f.convertToPixel(p);s.show&&v!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,ie(te(Z(v,h.price),u),c),{x:d,y:m},m<_?[-2,-5]:[2,5],s),l.show&&p!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,ie(te(Z(p,h.price),u),c),{x:g,y:_},m<_?[2,5]:[-2,-5],l)}},e.prototype._drawMark=function(t,i,n,o,a){var s,l,u,c=n.x,h=n.y+o[0];(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+o[0]},{x:c,y:h},{x:c+2,y:h+o[0]}]},styles:{color:a.color}}))===null||s===void 0||s.draw(t);var f,v,d,p=this.getWidget().getBounding().width;c>p/2?(f=c-5,v=f-a.textOffset,d="right"):(f=c+5,d="left",v=f+a.textOffset);var g=h+o[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:g},{x:f,y:g}]},styles:{color:a.color}}))===null||l===void 0||l.draw(t),(u=this.createFigure({name:"text",attrs:{x:v,y:g,text:i,align:d,baseline:"middle"},styles:{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}}))===null||u===void 0||u.draw(t)},e}(mr),Ia=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.line;if(l.show&&u.show&&c.show){var h=o.getAxisComponent(),f=s.getDataList(),v=f[f.length-1];if(v!=null){var d=v.close,p=v.open,g=h.convertToNicePixel(d),m=void 0;d>p?m=u.upColor:d<p?m=u.downColor:m=u.noChangeColor,(i=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:g},{x:a.width,y:g}]},styles:{style:c.style,color:m,size:c.size,dashedValue:c.dashedValue}}))===null||i===void 0||i.draw(t)}}},e}(Be),Pa={time:"时间：",open:"开：",high:"高：",low:"低：",close:"收：",volume:"成交量：",turnover:"成交额：",change:"涨幅："},Da={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "},Aa={"zh-CN":Pa,"en-US":Da};function Ma(r,e){var t,i;return(i=(t=Aa[e])===null||t===void 0?void 0:t[r])!==null&&i!==void 0?i:r}var Ta=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=n.getId(),a=n.getChart().getChartStore(),s=a.getTooltipStore().getCrosshair();if(P(s.kLineData)){var l=i.getBounding(),u=n.getYAxisWidget().getBounding(),c=a.getDataList(),h=a.getPrecision(),f=a.getLocale(),v=a.getCustomApi(),d=a.getThousandsSeparator(),p=a.getDecimalFoldThreshold(),g=a.getTooltipStore().getActiveIcon(),m=a.getIndicatorStore().getInstances(n.getId()),_=a.getTimeScaleStore().getDateTimeFormat(),S=a.getStyles(),y=S.candle,C=S.indicator;if(y.tooltip.showType===me.Rect&&C.tooltip.showType===me.Rect){var w=this.isDrawTooltip(s,y.tooltip),b=this.isDrawTooltip(s,C.tooltip);this._drawRectTooltip(t,c,m,l,u,s,h,_,f,v,d,p,w,b,y.tooltip.offsetTop,S)}else if(y.tooltip.showType===me.Standard&&C.tooltip.showType===me.Standard){var x=y.tooltip,E=x.offsetLeft,I=x.offsetTop,D=x.offsetRight,A=l.width-D,M=this._drawCandleStandardTooltip(t,c,o,s,g,h,_,f,v,d,p,E,I,A,y);this.drawIndicatorTooltip(t,o,c,s,g,m,v,d,p,E,M,A,C)}else if(y.tooltip.showType===me.Rect&&C.tooltip.showType===me.Standard){var T=y.tooltip,E=T.offsetLeft,I=T.offsetTop,D=T.offsetRight,A=l.width-D,z=this.drawIndicatorTooltip(t,o,c,s,g,m,v,d,p,E,I,A,C),w=this.isDrawTooltip(s,y.tooltip);this._drawRectTooltip(t,c,m,l,u,s,h,_,f,v,d,p,w,!1,z,S)}else{var L=y.tooltip,E=L.offsetLeft,I=L.offsetTop,D=L.offsetRight,A=l.width-D,U=this._drawCandleStandardTooltip(t,c,o,s,g,h,_,f,v,d,p,E,I,A,y),b=this.isDrawTooltip(s,C.tooltip);this._drawRectTooltip(t,c,m,l,u,s,h,_,f,v,d,p,!1,b,U,S)}}},e.prototype._drawCandleStandardTooltip=function(t,i,n,o,a,s,l,u,c,h,f,v,d,p,g){var m,_,S,y=g.tooltip,C=y.text,w=0,b={x:v,y:d};if(this.isDrawTooltip(o,y)){var x=(m=o.dataIndex)!==null&&m!==void 0?m:0,E=this._getCandleTooltipLegends({prev:(_=i[x-1])!==null&&_!==void 0?_:null,current:o.kLineData,next:(S=i[x+1])!==null&&S!==void 0?S:null},s,l,u,c,h,f,g),I=nt(this.classifyTooltipIcons(y.icons),3),D=I[0],A=I[1],M=I[2];w=this.drawStandardTooltipIcons(t,a,D,b,n,"",v,w,p),w=this.drawStandardTooltipIcons(t,a,A,b,n,"",v,w,p),E.length>0&&(w=this.drawStandardTooltipLegends(t,E,b,v,w,p,C)),w=this.drawStandardTooltipIcons(t,a,M,b,n,"",v,w,p)}return b.y+w},e.prototype._drawRectTooltip=function(t,i,n,o,a,s,l,u,c,h,f,v,d,p,g,m){var _=this,S,y,C,w,b,x=m.candle,E=m.indicator,I=x.tooltip,D=E.tooltip;if(d||p){var A=(S=s.dataIndex)!==null&&S!==void 0?S:0,M=this._getCandleTooltipLegends({prev:(y=i[A-1])!==null&&y!==void 0?y:null,current:s.kLineData,next:(C=i[A+1])!==null&&C!==void 0?C:null},l,u,c,h,f,v,x),T=I.offsetLeft,z=I.offsetTop,L=I.offsetRight,U=I.offsetBottom,K=I.text,oe=K.marginLeft,le=K.marginRight,$=K.marginTop,Y=K.marginBottom,J=K.size,q=K.weight,Q=K.family,G=I.rect,Pe=G.position,Ce=G.paddingLeft,Ne=G.paddingRight,We=G.paddingTop,Ke=G.paddingBottom,De=G.offsetLeft,ot=G.offsetRight,Ut=G.offsetTop,_r=G.offsetBottom,Xe=G.borderSize,Ti=G.borderRadius,Fi=G.borderColor,ki=G.color,_t=0,He=0,Ue=0;d&&(t.font=it(J,q,Q),M.forEach(function(Re){var fe=Re.title,pe=Re.value,we="".concat(fe.text).concat(pe.text),Le=t.measureText(we).width+oe+le;_t=Math.max(_t,Le)}),Ue+=(Y+$+J)*M.length);var qe=D.text,yr=qe.marginLeft,Sr=qe.marginRight,Cr=qe.marginTop,br=qe.marginBottom,yt=qe.size,$t=qe.weight,Yt=qe.family,wr=[];if(p&&(t.font=it(yt,$t,Yt),n.forEach(function(Re){var fe,pe=(fe=_.getIndicatorTooltipData(i,s,Re,h,f,v,E).values)!==null&&fe!==void 0?fe:[];wr.push(pe),pe.forEach(function(we){var Le=we.title,At=we.value,Vi="".concat(Le.text).concat(At.text),Oi=t.measureText(Vi).width+yr+Sr;_t=Math.max(_t,Oi),Ue+=Cr+br+yt})})),He+=_t,He!==0&&Ue!==0){He+=Xe*2+Ce+Ne,Ue+=Xe*2+We+Ke;var Bi=o.width/2,Er=Pe===zt.Pointer&&s.paneId===X.CANDLE,xr=((w=s.realX)!==null&&w!==void 0?w:0)>Bi,be=0;if(Er){var Ir=s.realX;xr?be=Ir-ot-He:be=Ir+De}else xr?(be=De+T,m.yAxis.inside&&m.yAxis.position===ze.Left&&(be+=a.width)):(be=o.width-ot-He-L,m.yAxis.inside&&m.yAxis.position===ze.Right&&(be-=a.width));var Ze=g+Ut;if(Er){var Ri=s.y;Ze=Ri-Ue/2,Ze+Ue>o.height-_r-U&&(Ze=o.height-_r-Ue-U),Ze<g+Ut&&(Ze=g+Ut+z)}(b=this.createFigure({name:"rect",attrs:{x:be,y:Ze,width:He,height:Ue},styles:{style:O.StrokeFill,color:ki,borderColor:Fi,borderSize:Xe,borderRadius:Ti}}))===null||b===void 0||b.draw(t);var Li=be+Xe+Ce+oe,$e=Ze+Xe+We;if(d&&M.forEach(function(Re){var fe,pe;$e+=$;var we=Re.title;(fe=_.createFigure({name:"text",attrs:{x:Li,y:$e,text:we.text},styles:{color:we.color,size:J,family:Q,weight:q}}))===null||fe===void 0||fe.draw(t);var Le=Re.value;(pe=_.createFigure({name:"text",attrs:{x:be+He-Xe-le-Ne,y:$e,text:Le.text,align:"right"},styles:{color:Le.color,size:J,family:Q,weight:q}}))===null||pe===void 0||pe.draw(t),$e+=J+Y}),p){var zi=be+Xe+Ce+yr;wr.forEach(function(Re){Re.forEach(function(fe){var pe,we;$e+=Cr;var Le=fe.title,At=fe.value;(pe=_.createFigure({name:"text",attrs:{x:zi,y:$e,text:Le.text},styles:{color:Le.color,size:yt,family:Yt,weight:$t}}))===null||pe===void 0||pe.draw(t),(we=_.createFigure({name:"text",attrs:{x:be+He-Xe-Sr-Ne,y:$e,text:At.text,align:"right"},styles:{color:At.color,size:yt,family:Yt,weight:$t}}))===null||we===void 0||we.draw(t),$e+=yt+br})})}}}},e.prototype._getCandleTooltipLegends=function(t,i,n,o,a,s,l,u){var c,h,f,v,d,p=u.tooltip,g=p.text.color,m=t.current,_=(h=(c=t.prev)===null||c===void 0?void 0:c.close)!==null&&h!==void 0?h:m.close,S=m.close-_,y=i.price,C=i.volume,w={"{time}":a.formatDate(n,m.timestamp,"YYYY-MM-DD HH:mm",ae.Tooltip),"{open}":ie(te(Z(m.open,y),s),l),"{high}":ie(te(Z(m.high,y),s),l),"{low}":ie(te(Z(m.low,y),s),l),"{close}":ie(te(Z(m.close,y),s),l),"{volume}":ie(te(a.formatBigNumber(Z((f=m.volume)!==null&&f!==void 0?f:p.defaultValue,C)),s),l),"{turnover}":ie(te(Z((v=m.turnover)!==null&&v!==void 0?v:p.defaultValue,y),s),l),"{change}":_===0?p.defaultValue:"".concat(te(Z(S/_*100),s),"%")},b=(d=Ve(p.custom)?p.custom(t,u):p.custom)!==null&&d!==void 0?d:[];return b.map(function(x){var E,I=x.title,D=x.value,A={text:"",color:""};ke(I)?A=B({},I):(A.text=I,A.color=g),A.text=Ma(A.text,o);var M={text:p.defaultValue,color:""};ke(D)?M=B({},D):(M.text=D,M.color=g);var T=M.text.match(/{(\S*)}/);if(T!==null&&T.length>1){var z="{".concat(T[1],"}");M.text=M.text.replace(z,(E=w[z])!==null&&E!==void 0?E:p.defaultValue),z==="{change}"&&(M.color=S===0?u.priceMark.last.noChangeColor:S>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:A,value:M}})},e}(Si),Fa=function(r){N(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n._candleBarView=new yi(n),n._candleAreaView=new Ea(n),n._candleHighLowPriceView=new xa(n),n._candleLastPriceLineView=new Ia(n),n.addChild(n._candleBarView),n}return e.prototype.updateMainContent=function(t){var i=this.getPane().getChart().getStyles().candle;i.type!==de.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Ta(this)},e}(bi),wi=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i=this,n,o,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getAxisComponent(),c=this.getAxisStyles(s.getChart().getStyles());if(c.show){c.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(l,c),styles:c.axisLine}))===null||n===void 0||n.draw(t));var h=u.getTicks();if(c.tickLine.show){var f=this.createTickLines(h,l,c);f.forEach(function(d){var p;(p=i.createFigure({name:"line",attrs:d,styles:c.tickLine}))===null||p===void 0||p.draw(t)})}if(c.tickText.show){var v=this.createTickTexts(h,l,c);(o=this.createFigure({name:"text",attrs:v,styles:c.tickText}))===null||o===void 0||o.draw(t)}}},e}(Be),ka=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,i){var n=this.getWidget().getPane().getAxisComponent(),o=i.axisLine.size,a;return n.isFromZero()?a=0:a=t.width-o,{coordinates:[{x:a,y:0},{x:a,y:t.height}]}},e.prototype.createTickLines=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=0,u=0;return o.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=i.width,a.show&&(l-=a.size),u=l-s.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=n.tickText,u=0;o.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=i.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},e}(wi),Ba=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.text;if(l.show&&u.show&&c.show){var h=s.getPrecision(),f=o.getAxisComponent(),v=s.getDataList(),d=v[v.length-1];if(P(d)){var p=d.close,g=d.open,m=f.convertToNicePixel(p),_=void 0;p>g?_=u.upColor:p<g?_=u.downColor:_=u.noChangeColor;var S=void 0;if(f.getType()===ee.Percentage){var y=s.getVisibleFirstData(),C=y.close;S="".concat(((p-C)/C*100).toFixed(2),"%")}else S=Z(p,h.price);S=ie(te(S,s.getThousandsSeparator()),s.getDecimalFoldThreshold());var w=void 0,b=void 0;f.isFromZero()?(w=0,b="left"):(w=a.width,b="right"),(i=this.createFigure({name:"text",attrs:{x:w,y:m,text:S,align:b,baseline:"middle"},styles:B(B({},c),{backgroundColor:_})}))===null||i===void 0||i.draw(t)}}},e}(Be),Ra=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i=this,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getCustomApi(),u=s.getStyles().indicator,c=u.lastValueMark,h=c.text;if(c.show){var f=o.getAxisComponent(),v=s.getDataList(),d=v.length-1,p=s.getIndicatorStore().getInstances(o.getId()),g=s.getThousandsSeparator(),m=s.getDecimalFoldThreshold();p.forEach(function(_){var S=_.result,y=S[d];if(P(y)&&_.visible){var C=_.precision;vr(v,_,d,u,function(w,b){var x,E=y[w.key];if(F(E)){var I=f.convertToNicePixel(E),D=Z(E,C);_.shouldFormatBigNumber&&(D=l.formatBigNumber(D)),D=ie(te(D,g),m);var A=void 0,M=void 0;f.isFromZero()?(A=0,M="left"):(A=a.width,M="right"),(x=i.createFigure({name:"text",attrs:{x:A,y:I,text:D,align:M,baseline:"middle"},styles:B(B({},h),{backgroundColor:b.color})}))===null||x===void 0||x.draw(t)}})}})}},e}(Be),Ei=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,i,n,o,a,s,l,u,c,h,f,v,d,p){this.drawFigures(t,i,this.getDefaultFigures(i,n,o,a,s,l,u,c,f,v,p),h)},e.prototype.getDefaultFigures=function(t,i,n,o,a,s,l,u,c,h,f){var v,d,p=[];if(t.needDefaultYAxisFigure&&t.id===((v=f.instance)===null||v===void 0?void 0:v.id)&&f.paneId===this.getWidget().getPane().getId()){var g=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,_=(d=h==null?void 0:h.isFromZero())!==null&&d!==void 0?d:!1,S,y;_?(S="left",y=0):(S="right",y=n.width),i.forEach(function(C,w){var b=t.points[w];if(F(b.value)){g=Math.min(g,C.y),m=Math.max(m,C.y);var x=ie(te(Z(b.value,o.price),l),u);p.push({type:"text",attrs:{x:y,y:C.y,text:x,align:S,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&p.unshift({type:"rect",attrs:{x:0,y:g,width:n.width,height:m-g},ignoreEvent:!0})}return p},e.prototype.getFigures=function(t,i,n,o,a,s,l,u,c,h,f){var v,d;return(d=(v=t.createYAxisFigures)===null||v===void 0?void 0:v.call(t,{overlay:t,coordinates:i,bounding:n,barSpace:o,precision:a,thousandsSeparator:s,decimalFoldThreshold:l,dateTimeFormat:u,defaultStyles:c,xAxis:h,yAxis:f}))!==null&&d!==void 0?d:[]},e}(Ci),xi=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=n.getPane().getChart().getChartStore(),l=s.getTooltipStore().getCrosshair(),u=s.getStyles().crosshair;if(V(l.paneId)&&this.compare(l,o.getId())&&u.show){var c=this.getDirectionStyles(u),h=c.text;if(c.show&&h.show){var f=o.getAxisComponent(),v=this.getText(l,s,f);t.font=it(h.size,h.weight,h.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(v,t.measureText(v).width,l,a,f,h),styles:h}))===null||i===void 0||i.draw(t)}}},e.prototype.compare=function(t,i){return t.paneId===i},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,i,n){var o=n,a=n.convertFromPixel(t.y),s;if(o.getType()===ee.Percentage){var l=i.getVisibleFirstData();s="".concat(((a-l.close)/l.close*100).toFixed(2),"%")}else{var u=i.getIndicatorStore().getInstances(t.paneId),c=0,h=!1;o.isInCandle()?c=i.getPrecision().price:u.forEach(function(f){c=Math.max(f.precision,c),h||(h=f.shouldFormatBigNumber)}),s=Z(a,c),h&&(s=i.getCustomApi().formatBigNumber(s))}return ie(te(s,i.getThousandsSeparator()),i.getDecimalFoldThreshold())},e.prototype.getTextAttrs=function(t,i,n,o,a,s){var l=a,u,c;return l.isFromZero()?(u=0,c="left"):(u=o.width,c="right"),{x:u,y:n.y,text:t,align:c,baseline:"middle"}},e}(Be),La=function(r){N(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n._yAxisView=new ka(n),n._candleLastPriceLabelView=new Ba(n),n._indicatorLastValueView=new Ra(n),n._overlayYAxisView=new Ei(n),n._crosshairHorizontalLabelView=new xi(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return e.prototype.getName=function(){return W.Y_AXIS},e.prototype.updateMain=function(t){this._yAxisView.draw(t),this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t)},e}(gr),Ii=function(){function r(e){this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return r.prototype.getParent=function(){return this._parent},r.prototype.buildTicks=function(e){if(this._autoCalcTickFlag&&(this._range=this.calcRange()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||e){this._prevRange=this._range;var t=this.optimalTicks(this._calcTicks());return this._ticks=this.createTicks({range:this._range,bounding:this.getSelfBounding(),defaultTicks:t}),!0}return!1},r.prototype.getTicks=function(){return this._ticks},r.prototype.getScrollZoomEnabled=function(){var e;return(e=this.getParent().getOptions().axisOptions.scrollZoomEnabled)!==null&&e!==void 0?e:!0},r.prototype.setRange=function(e){this._autoCalcTickFlag=!1,this._range=e},r.prototype.getRange=function(){return this._range},r.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},r.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},r.prototype._calcTicks=function(){var e=this._range,t=e.realFrom,i=e.realTo,n=e.realRange,o=[];if(n>=0){var a=nt(this._calcTickInterval(n),2),s=a[0],l=a[1],u=zr(Math.ceil(t/s)*s,l),c=zr(Math.floor(i/s)*s,l),h=0,f=u;if(s!==0)for(;f<=c;){var v=f.toFixed(l);o[h]={text:v,coord:0,value:v},++h,f+=s}}return o},r.prototype._calcTickInterval=function(e){var t=Hn(e/8),i=Un(t);return[t,i]},r}(),za=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.calcRange=function(){var t,i,n,o,a=this.getParent(),s=a.getChart(),l=s.getChartStore(),u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=[],f=!1,v=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,g=l.getIndicatorStore().getInstances(a.getId());g.forEach(function(Y){var J,q,Q;f||(f=(J=Y.shouldOhlc)!==null&&J!==void 0?J:!1),p=Math.min(p,Y.precision),F(Y.minValue)&&(v=Math.min(v,Y.minValue)),F(Y.maxValue)&&(d=Math.max(d,Y.maxValue)),h.push({figures:(q=Y.figures)!==null&&q!==void 0?q:[],result:(Q=Y.result)!==null&&Q!==void 0?Q:[]})});var m=4,_=this.isInCandle();if(_){var S=l.getPrecision().price;p!==Number.MAX_SAFE_INTEGER?m=Math.min(p,S):m=S}else p!==Number.MAX_SAFE_INTEGER&&(m=p);var y=l.getVisibleDataList(),C=s.getStyles().candle,w=C.type===de.Area,b=C.area.value,x=_&&!w||!_&&f;y.forEach(function(Y){var J=Y.dataIndex,q=Y.data;if(P(q)&&(x&&(u=Math.min(u,q.low),c=Math.max(c,q.high)),_&&w)){var Q=q[b];F(Q)&&(u=Math.min(u,Q),c=Math.max(c,Q))}h.forEach(function(G){var Pe,Ce=G.figures,Ne=G.result,We=(Pe=Ne[J])!==null&&Pe!==void 0?Pe:{};Ce.forEach(function(Ke){var De=We[Ke.key];F(De)&&(u=Math.min(u,De),c=Math.max(c,De))})})}),u!==Number.MAX_SAFE_INTEGER&&c!==Number.MIN_SAFE_INTEGER?(u=Math.min(v,u),c=Math.max(d,c)):(u=0,c=10);var E=this.getType(),I;switch(E){case ee.Percentage:{var D=l.getVisibleFirstData();P(D)&&F(D.close)&&(u=(u-D.close)/D.close*100,c=(c-D.close)/D.close*100),I=Math.pow(10,-2);break}case ee.Log:{u=wt(u),c=wt(c),I=.05*Je(-m);break}default:I=Je(-m)}if(u===c||Math.abs(u-c)<I){var A=v===u,M=d===c;u=A?u:M?u-8*I:u-4*I,c=M?c:A?c+8*I:c+4*I}var T=(i=(t=this.getParent().getYAxisWidget())===null||t===void 0?void 0:t.getBounding().height)!==null&&i!==void 0?i:0,z=a.getOptions().gap,L=(n=z==null?void 0:z.top)!==null&&n!==void 0?n:.2;L>=1&&(L=L/T);var U=(o=z==null?void 0:z.bottom)!==null&&o!==void 0?o:.1;U>=1&&(U=U/T);var K=Math.abs(c-u);u=u-K*U,c=c+K*L,K=Math.abs(c-u);var oe,le,$;return E===ee.Log?(oe=Je(u),le=Je(c),$=Math.abs(le-oe)):(oe=u,le=c,$=K),{from:u,to:c,range:K,realFrom:oe,realTo:le,realRange:$}},e.prototype._innerConvertToPixel=function(t){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.getRange(),s=a.from,l=a.range,u=(t-s)/l;return this.isReverse()?Math.round(u*o):Math.round((1-u)*o)},e.prototype.isInCandle=function(){return this.getParent().getId()===X.CANDLE},e.prototype.getType=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.type:ee.Normal},e.prototype.getPosition=function(){return this.getParent().getChart().getStyles().yAxis.position},e.prototype.isReverse=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.reverse:!1},e.prototype.isFromZero=function(){var t=this.getParent().getChart().getStyles().yAxis,i=t.inside;return t.position===ze.Left&&i||t.position===ze.Right&&!i},e.prototype.optimalTicks=function(t){var i=this,n,o,a=this.getParent(),s=(o=(n=a.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&o!==void 0?o:0,l=a.getChart().getChartStore(),u=l.getCustomApi(),c=[],h=this.getType(),f=l.getIndicatorStore().getInstances(a.getId()),v=l.getThousandsSeparator(),d=l.getDecimalFoldThreshold(),p=0,g=!1;this.isInCandle()?p=l.getPrecision().price:f.forEach(function(S){p=Math.max(p,S.precision),g||(g=S.shouldFormatBigNumber)});var m=l.getStyles().xAxis.tickText.size,_;return t.forEach(function(S){var y=S.value,C,w=i._innerConvertToPixel(+y);switch(h){case ee.Percentage:{C="".concat(Z(y,2),"%");break}case ee.Log:{w=i._innerConvertToPixel(wt(+y)),C=Z(y,p);break}default:{C=Z(y,p),g&&(C=u.formatBigNumber(y));break}}C=ie(te(C,v),d);var b=F(_);w>m&&w<s-m&&(b&&Math.abs(_-w)>m*2||!b)&&(c.push({text:C,coord:w,value:y}),_=w)}),c},e.prototype.getAutoSize=function(){var t=this.getParent(),i=t.getChart(),n=i.getStyles(),o=n.yAxis,a=o.size;if(a!=="auto")return a;var s=i.getChartStore(),l=s.getCustomApi(),u=0;if(o.show&&(o.axisLine.show&&(u+=o.axisLine.size),o.tickLine.show&&(u+=o.tickLine.length),o.tickText.show)){var c=0;this.getTicks().forEach(function(y){c=Math.max(c,Vt(y.text,o.tickText.size,o.tickText.weight,o.tickText.family))}),u+=o.tickText.marginStart+o.tickText.marginEnd+c}var h=n.crosshair,f=0;if(h.show&&h.horizontal.show&&h.horizontal.text.show){var v=s.getIndicatorStore().getInstances(t.getId()),d=0,p=!1;v.forEach(function(y){d=Math.max(y.precision,d),p||(p=y.shouldFormatBigNumber)});var g=2;if(this.getType()!==ee.Percentage)if(this.isInCandle()){var m=s.getPrecision().price,_=n.indicator.lastValueMark;_.show&&_.text.show?g=Math.max(d,m):g=m}else g=d;var S=Z(this.getRange().to,g);p&&(S=l.formatBigNumber(S)),S=ie(S,s.getDecimalFoldThreshold()),f+=h.horizontal.text.paddingLeft+h.horizontal.text.paddingRight+h.horizontal.text.borderSize*2+Vt(S,h.horizontal.text.size,h.horizontal.text.weight,h.horizontal.text.family)}return Math.max(u,f)},e.prototype.getSelfBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.getRange(),s=a.from,l=a.range,u=this.isReverse()?t/o:1-t/o,c=u*l+s;switch(this.getType()){case ee.Percentage:{var h=this.getParent().getChart().getChartStore().getVisibleFirstData();return P(h)&&F(h.close)?h.close*c/100+h.close:0}case ee.Log:return Je(c);default:return c}},e.prototype.convertToRealValue=function(t){var i=t;return this.getType()===ee.Log&&(i=Je(t)),i},e.prototype.convertToPixel=function(t){var i=t;switch(this.getType()){case ee.Percentage:{var n=this.getParent().getChart().getChartStore().getVisibleFirstData();P(n)&&F(n.close)&&(i=(t-n.close)/n.close*100);break}case ee.Log:{i=wt(t);break}default:i=t}return this._innerConvertToPixel(i)},e.prototype.convertToNicePixel=function(t){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.convertToPixel(t);return Math.round(Math.max(o*.05,Math.min(a,o*.98)))},e.extend=function(t){var i=function(n){N(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}return o.prototype.createTicks=function(a){return t.createTicks(a)},o}(e);return i},e}(Ii),Va={name:"default",createTicks:function(r){var e=r.defaultTicks;return e}},Xr={default:za.extend(Va)};function Oa(r){var e;return(e=Xr[r])!==null&&e!==void 0?e:Xr.default}var Pi=function(){function r(e,t,i,n){this._bounding=vi(),this._chart=i,this._id=n,this._init(e,t)}return r.prototype._init=function(e,t){this._rootContainer=e,this._container=Oe("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),t!==null?e.insertBefore(this._container,t):e.appendChild(this._container)},r.prototype.getContainer=function(){return this._container},r.prototype.getId=function(){return this._id},r.prototype.getChart=function(){return this._chart},r.prototype.getBounding=function(){return this._bounding},r.prototype.update=function(e){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(e??3,this._container,this._bounding)},r.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},r}(),Di=function(r){N(e,r);function e(t,i,n,o,a){var s=r.call(this,t,i,n,o)||this;s._yAxisWidget=null,s._options={minHeight:Ko,dragEnabled:!0,gap:{top:.2,bottom:.1},axisOptions:{name:"default",scrollZoomEnabled:!0}};var l=s.getContainer();return s._mainWidget=s.createMainWidget(l),s._yAxisWidget=s.createYAxisWidget(l),s.setOptions(a),s}return e.prototype.setOptions=function(t){var i,n,o,a=(i=t.axisOptions)===null||i===void 0?void 0:i.name;(this._options.axisOptions.name!==a&&V(a)||!P(this._axis))&&(this._axis=this.createAxisComponent(a??"default")),Se(this._options,t);var s,l;return this.getId()===X.X_AXIS?(s=this.getMainWidget().getContainer(),l="ew-resize"):(s=this.getYAxisWidget().getContainer(),l="ns-resize"),!((o=(n=t.axisOptions)===null||n===void 0?void 0:n.scrollZoomEnabled)!==null&&o!==void 0)||o?s.style.cursor=l:s.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,i,n){var o,a;Se(this.getBounding(),t);var s={};return P(t.height)&&(s.height=t.height),P(t.top)&&(s.top=t.top),this._mainWidget.setBounding(s),(o=this._yAxisWidget)===null||o===void 0||o.setBounding(s),P(i)&&this._mainWidget.setBounding(i),P(n)&&((a=this._yAxisWidget)===null||a===void 0||a.setBounding(n)),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var i;this._mainWidget.update(t),(i=this._yAxisWidget)===null||i===void 0||i.update(t)},e.prototype.destroy=function(){var t;r.prototype.destroy.call(this),this._mainWidget.destroy(),(t=this._yAxisWidget)===null||t===void 0||t.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=Oe("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Ge(a);a.width=n*l,a.height=o*l,s.scale(l,l);var u=this._mainWidget.getBounding();if(s.drawImage(this._mainWidget.getImage(t),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();s.drawImage(this._yAxisWidget.getImage(t),c.left,0,c.width,c.height)}return a},e.prototype.createYAxisWidget=function(t){return null},e}(Pi),Ai=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAxisComponent=function(t){var i=Oa(t??"default");return new i(this)},e.prototype.createMainWidget=function(t){return new bi(t,this)},e.prototype.createYAxisWidget=function(t){return new La(t,this)},e}(Di),Na=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createMainWidget=function(t){return new Fa(t,this)},e}(Ai),Wa=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,i,n){var o=n.tickLine,a=n.axisLine.size;return t.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+o.length}]}})},e.prototype.createTickTexts=function(t,i,n){var o=n.tickText,a=n.axisLine.size,s=n.tickLine.length;return t.map(function(l){return{x:l.coord,y:a+s+o.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(wi),Xa=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(t){return t.getInstances()},e.prototype.getProgressOverlay=function(t){return t.instance},e.prototype.getDefaultFigures=function(t,i,n,o,a,s,l,u,c,h,f){var v,d=[];if(t.needDefaultXAxisFigure&&t.id===((v=f.instance)===null||v===void 0?void 0:v.id)){var p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;i.forEach(function(m,_){p=Math.min(p,m.x),g=Math.max(g,m.x);var S=t.points[_];if(F(S.timestamp)){var y=s.formatDate(a,S.timestamp,"YYYY-MM-DD HH:mm",ae.Crosshair);d.push({type:"text",attrs:{x:m.x,y:0,text:y,align:"center"},ignoreEvent:!0})}}),i.length>1&&d.unshift({type:"rect",attrs:{x:p,y:0,width:g-p,height:n.height},ignoreEvent:!0})}return d},e.prototype.getFigures=function(t,i,n,o,a,s,l,u,c,h,f){var v,d;return(d=(v=t.createXAxisFigures)===null||v===void 0?void 0:v.call(t,{overlay:t,coordinates:i,bounding:n,barSpace:o,precision:a,thousandsSeparator:s,decimalFoldThreshold:l,dateTimeFormat:u,defaultStyles:c,xAxis:h,yAxis:f}))!==null&&d!==void 0?d:[]},e}(Ei),Ha=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.compare=function(t){return P(t.kLineData)&&t.dataIndex===t.realDataIndex},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,i){var n,o=(n=t.kLineData)===null||n===void 0?void 0:n.timestamp;return i.getCustomApi().formatDate(i.getTimeScaleStore().getDateTimeFormat(),o,"YYYY-MM-DD HH:mm",ae.Crosshair)},e.prototype.getTextAttrs=function(t,i,n,o,a,s){var l=n.realX,u,c="center";return l-i/2-s.paddingLeft<0?(u=0,c="left"):l+i/2+s.paddingRight>o.width?(u=o.width,c="right"):u=l,{x:u,y:0,text:t,align:c,baseline:"top"}},e}(xi),Ua=function(r){N(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n._xAxisView=new Wa(n),n._overlayXAxisView=new Xa(n),n._crosshairVerticalLabelView=new Ha(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return e.prototype.getName=function(){return W.X_AXIS},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(gr),$a=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.calcRange=function(){var t=this.getParent().getChart().getChartStore(),i=t.getTimeScaleStore().getVisibleRange(),n=i.from,o=i.to,a=n,s=o-1,l=o-n;return{from:a,to:s,range:l,realFrom:a,realTo:s,realRange:l}},e.prototype.optimalTicks=function(t){var i,n,o=this.getParent().getChart(),a=o.getChartStore(),s=a.getCustomApi().formatDate,l=[],u=t.length,c=a.getDataList();if(u>0){var h=a.getTimeScaleStore().getDateTimeFormat(),f=o.getStyles().xAxis.tickText,v=Vt("00-00 00:00",f.size,f.weight,f.family),d=parseInt(t[0].value,10),p=this.convertToPixel(d),g=1;if(u>1){var m=parseInt(t[1].value,10),_=this.convertToPixel(m),S=Math.abs(_-p);S<v&&(g=Math.ceil(v/S))}for(var y=0;y<u;y+=g){var C=parseInt(t[y].value,10),w=c[C],b=w.timestamp,x=s(h,b,"HH:mm",ae.XAxis);if(y!==0){var E=parseInt(t[y-g].value,10),I=c[E],D=I.timestamp;x=(i=this._optimalTickLabel(s,h,b,D))!==null&&i!==void 0?i:x}var A=this.convertToPixel(C);l.push({text:x,coord:A,value:b})}var M=l.length;if(M===1)l[0].text=s(h,l[0].value,"YYYY-MM-DD HH:mm",ae.XAxis);else{var T=l[0].value,z=l[1].value;if(P(l[2])){var L=l[2].text;/^[0-9]{2}-[0-9]{2}$/.test(L)?l[0].text=s(h,T,"MM-DD",ae.XAxis):/^[0-9]{4}-[0-9]{2}$/.test(L)?l[0].text=s(h,T,"YYYY-MM",ae.XAxis):/^[0-9]{4}$/.test(L)&&(l[0].text=s(h,T,"YYYY",ae.XAxis))}else l[0].text=(n=this._optimalTickLabel(s,h,T,z))!==null&&n!==void 0?n:l[0].text}}return l},e.prototype._optimalTickLabel=function(t,i,n,o){var a=t(i,n,"YYYY",ae.XAxis),s=t(i,n,"YYYY-MM",ae.XAxis),l=t(i,n,"MM-DD",ae.XAxis);return a!==t(i,o,"YYYY",ae.XAxis)?a:s!==t(i,o,"YYYY-MM",ae.XAxis)?s:l!==t(i,o,"MM-DD",ae.XAxis)?l:null},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),i=t.xAxis,n=i.size;if(n!=="auto")return n;var o=t.crosshair,a=0;i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show&&(a+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var s=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(s+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+o.vertical.text.borderSize*2+o.vertical.text.size),Math.max(a,s)},e.prototype.getSelfBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var i=this.getParent().getChart().getChartStore().getTimeScaleStore(),n=i.coordinateToDataIndex(t);return i.dataIndexToTimestamp(n)},e.prototype.convertTimestampToPixel=function(t){var i=this.getParent().getChart().getChartStore().getTimeScaleStore(),n=i.timestampToDataIndex(t);return i.dataIndexToCoordinate(n)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().getTimeScaleStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().getTimeScaleStore().dataIndexToCoordinate(t)},e.extend=function(t){var i=function(n){N(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}return o.prototype.createTicks=function(a){return t.createTicks(a)},o}(e);return i},e}(Ii),Ya={name:"default",createTicks:function(r){var e=r.defaultTicks;return e}},Hr={default:$a.extend(Ya)};function Ga(r){var e;return(e=Hr[r])!==null&&e!==void 0?e:Hr.default}var ja=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAxisComponent=function(t){var i=Ga(t);return new i(this)},e.prototype.createMainWidget=function(t){return new Ua(t,this)},e}(Di);function Ka(r,e){var t=0;return function(){var i=Date.now();i-t>e&&(r.apply(this,arguments),t=i)}}var qa=function(r){N(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n._dragFlag=!1,n._dragStartY=0,n._topPaneHeight=0,n._bottomPaneHeight=0,n._pressedMouseMoveEvent=Ka(n._pressedTouchMouseMoveEvent,20),n.registerEvent("touchStartEvent",n._mouseDownEvent.bind(n)).registerEvent("touchMoveEvent",n._pressedMouseMoveEvent.bind(n)).registerEvent("touchEndEvent",n._mouseUpEvent.bind(n)).registerEvent("mouseDownEvent",n._mouseDownEvent.bind(n)).registerEvent("mouseUpEvent",n._mouseUpEvent.bind(n)).registerEvent("pressedMouseMoveEvent",n._pressedMouseMoveEvent.bind(n)).registerEvent("mouseEnterEvent",n._mouseEnterEvent.bind(n)).registerEvent("mouseLeaveEvent",n._mouseLeaveEvent.bind(n)),n}return e.prototype.getName=function(){return W.SEPARATOR},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){this._dragFlag=!0,this._dragStartY=t.pageY;var i=this.getPane();return this._topPaneHeight=i.getTopPane().getBounding().height,this._bottomPaneHeight=i.getBottomPane().getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var i=t.pageY-this._dragStartY,n=this.getPane(),o=n.getTopPane(),a=n.getBottomPane(),s=i<0;if(o!==null&&(a!=null&&a.getOptions().dragEnabled)){var l=void 0,u=void 0,c=void 0,h=void 0;s?(l=o,u=a,c=this._topPaneHeight,h=this._bottomPaneHeight):(l=a,u=o,c=this._bottomPaneHeight,h=this._topPaneHeight);var f=l.getOptions().minHeight;if(c>f){var v=Math.max(c-Math.abs(i),f),d=c-v;l.setBounding({height:v}),u.setBounding({height:h+d});var p=n.getChart();p.getChartStore().getActionStore().execute(ye.OnPaneDrag,{paneId:n.getId()}),p.adjustPaneViewport(!0,!0,!0,!0,!0)}}return!0},e.prototype._mouseEnterEvent=function(){var t,i=this.getPane(),n=i.getBottomPane();if((t=n==null?void 0:n.getOptions().dragEnabled)!==null&&t!==void 0&&t){var o=i.getChart(),a=o.getStyles().separator;return this.getContainer().style.background=a.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="",!0)},e.prototype.createContainer=function(){return Oe("div",{width:"100%",height:"".concat(xt,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,i,n){if(n===4||n===2){var o=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((xt-o.size)/2),"px"),t.style.height="".concat(xt,"px")}},e}(fi),Ur=function(r){N(e,r);function e(t,i,n,o,a,s){var l=r.call(this,t,i,n,o)||this;return l.getContainer().style.overflow="",l._topPane=a,l._bottomPane=s,l._separatorWidget=new qa(l.getContainer(),l),l}return e.prototype.setBounding=function(t){return Se(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=this.getChart().getStyles().separator,s=Oe("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=Ge(s);return s.width=n*u,s.height=o*u,l.scale(u,u),l.fillStyle=a.color,l.fillRect(0,0,n,o),s},e.prototype.updateImp=function(t,i,n){if(t===4||t===2){var o=this.getChart().getStyles().separator;i.style.backgroundColor=o.color,i.style.height="".concat(n.height,"px"),i.style.marginLeft="".concat(n.left,"px"),i.style.width="".concat(n.width,"px"),this._separatorWidget.update(t)}},e}(Pi);function $r(){var r;return typeof window>"u"?!1:((r=window.navigator.userAgent.toLowerCase().indexOf("firefox"))!==null&&r!==void 0?r:-1)>-1}function Zt(){return typeof window>"u"?!1:/iPhone|iPad|iPod/.test(window.navigator.platform)}var Za=10,Ja=function(){function r(e,t,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Zt(),this._onFirefoxOutsideMouseUp=function(o){n._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){if(n._firesTouchEvents(o)){if(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1){var a=n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._tapCoordinate).manhattanDistance;a<30&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(o),n._handler.doubleTapEvent),n._resetTapTimeout()}}else if(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1){var a=n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._clickCoordinate).manhattanDistance;a<5&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(o),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()}},this._target=e,this._handler=t,this._options=i,this._init()}return r.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},r.prototype._mouseEnterHandler=function(e){var t=this,i,n,o;(i=this._unsubscribeMousemove)===null||i===void 0||i.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(o=this._unsubscribeContextMenu)===null||o===void 0||o.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){t._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){t._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){t._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),!this._firesTouchEvents(e)&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},r.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},r.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(!P(this._handler.mouseWheelHortEvent)||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(!P(this._handler.mouseWheelVertEvent))return;var t=-(e.deltaY/100);if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32;break}if(t!==0){var i=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),i)}}},r.prototype._contextMenuHandler=function(e){this._preventDefault(e)},r.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),n=i.xOffset,o=i.yOffset,a=i.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&a<5)){if(!this._touchMoveExceededManhattanDistance){var s=n*.5,l=o>=s&&!this._options.treatVertDragAsPageScroll(),u=s>o&&!this._options.treatHorzDragAsPageScroll();!l&&!u&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},r.prototype._mouseMoveWithDownHandler=function(e){if(e.button===0){var t=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate),i=t.manhattanDistance;i>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent)}},r.prototype._mouseTouchMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),o=i+n;return{xOffset:i,yOffset:n,manhattanDistance:o}},r.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(e,t);if(this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance;n<30&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(i,this._handler.tapEvent),P(this._handler.tapEvent)&&this._preventDefault(e));this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},r.prototype._mouseUpHandler=function(e){if(e.button===0){var t=this._makeCompatEvent(e);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),$r()){var i=this._target.ownerDocument.documentElement;i.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(e))if(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance;n<5&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent)}},r.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},r.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var n=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),500)}this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(t))}},r.prototype._mouseDownHandler=function(e){if(e.button===2){this._preventDefault(e),this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);return}if(e.button===0){var t=this._target.ownerDocument.documentElement;$r()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",n)}this._mousePressed=!0,!this._firesTouchEvents(e)&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(e)))}},r.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var t=this._target.ownerDocument,i=function(n){e._handler.mouseDownOutsideEvent!=null&&(n.composed&&e._target.contains(n.composedPath()[0])||n.target!==null&&e._target.contains(n.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0})}Zt()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===1)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},r.prototype._initPinch=function(){var e=this;!P(this._handler.pinchStartEvent)&&!P(this._handler.pinchEvent)&&!P(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(t){e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(!(t.touches.length!==2||e._startPinchMiddleCoordinate===null)&&P(e._handler.pinchEvent)){var i=e._getTouchDistance(t.touches[0],t.touches[1]),n=i/e._startPinchDistance;e._handler.pinchEvent(B(B({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),n),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},r.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},r.prototype._startPinch=function(e){var t,i=(t=this._target.getBoundingClientRect())!==null&&t!==void 0?t:{left:0,top:0};this._startPinchMiddleCoordinate={x:(e[0].clientX-i.left+(e[1].clientX-i.left))/2,y:(e[0].clientY-i.top+(e[1].clientY-i.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),P(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},r.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,P(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},r.prototype._mouseLeaveHandler=function(e){var t,i,n;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),!this._firesTouchEvents(e)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Zt())},r.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},r.prototype._firesTouchEvents=function(e){var t;return P((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+500},r.prototype._processEvent=function(e,t){t==null||t.call(this._handler,e)},r.prototype._makeCompatEvent=function(e,t){var i=this,n,o=t??e,a=(n=this._target.getBoundingClientRect())!==null&&n!==void 0?n:{left:0,top:0};return{x:o.clientX-a.left,y:o.clientY-a.top,pageX:o.pageX,pageY:o.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click"&&e.type!=="wheel",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},r.prototype._getTouchDistance=function(e,t){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},r.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},r.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},r.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},r.prototype._touchWithId=function(e,t){for(var i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null},r}(),Qa=function(){function r(e,t){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":{i._chart.getChartStore().getTimeScaleStore().zoom(.5);break}case"Minus":{i._chart.getChartStore().getTimeScaleStore().zoom(-.5);break}case"ArrowLeft":{var o=i._chart.getChartStore().getTimeScaleStore();o.startScroll(),o.scroll(-3*o.getBarSpace().bar);break}case"ArrowRight":{var o=i._chart.getChartStore().getTimeScaleStore();o.startScroll(),o.scroll(3*o.getBarSpace().bar);break}}},this._container=e,this._chart=t,this._event=new Ja(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return r.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},r.prototype.pinchEvent=function(e,t){var i=this._findWidgetByEvent(e),n=i.pane,o=i.widget;if((n==null?void 0:n.getId())!==X.X_AXIS&&(o==null?void 0:o.getName())===W.MAIN){var a=this._makeWidgetEvent(e,o),s=(t-this._pinchScale)*5;return this._pinchScale=t,this._chart.getChartStore().getTimeScaleStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},r.prototype.mouseWheelHortEvent=function(e,t){var i=this._chart.getChartStore().getTimeScaleStore();return i.startScroll(),i.scroll(t),!0},r.prototype.mouseWheelVertEvent=function(e,t){var i=this._findWidgetByEvent(e).widget,n=this._makeWidgetEvent(e,i),o=i==null?void 0:i.getName();return o===W.MAIN?(this._chart.getChartStore().getTimeScaleStore().zoom(t,{x:n.x,y:n.y}),!0):!1},r.prototype.mouseDownEvent=function(e){var t,i,n=this._findWidgetByEvent(e),o=n.pane,a=n.widget;if(this._mouseDownWidget=a,a!==null){var s=this._makeWidgetEvent(e,a),l=a.getName();switch(l){case W.SEPARATOR:return a.dispatchEvent("mouseDownEvent",s);case W.MAIN:{var u=(t=o.getAxisComponent().getRange())!==null&&t!==void 0?t:null;return this._prevYAxisRange=u===null?u:B({},u),this._startScrollCoordinate={x:s.x,y:s.y},this._chart.getChartStore().getTimeScaleStore().startScroll(),a.dispatchEvent("mouseDownEvent",s)}case W.X_AXIS:{var c=a.dispatchEvent("mouseDownEvent",s);return c&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:s.x,y:s.y},this._xAxisStartScaleDistance=s.pageX,c}case W.Y_AXIS:{var c=a.dispatchEvent("mouseDownEvent",s);c&&this._chart.updatePane(1);var u=(i=o.getAxisComponent().getRange())!==null&&i!==void 0?i:null;return this._prevYAxisRange=u===null?u:B({},u),this._yAxisStartScaleDistance=s.pageY,c}}}return!1},r.prototype.mouseMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),a=o.pane,s=o.widget,l=this._makeWidgetEvent(e,s);if((((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())!==(a==null?void 0:a.getId())||((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())!==(s==null?void 0:s.getName()))&&(s==null||s.dispatchEvent("mouseEnterEvent",l),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null){var u=s.getName();switch(u){case W.MAIN:{var c=s.dispatchEvent("mouseMoveEvent",l),h=this._chart.getChartStore(),f={x:l.x,y:l.y,paneId:a==null?void 0:a.getId()};return c&&h.getTooltipStore().getActiveIcon()!==null&&(f=void 0,s!==null&&(s.getContainer().style.cursor="pointer")),this._chart.getChartStore().getTooltipStore().setCrosshair(f),c}case W.SEPARATOR:case W.X_AXIS:case W.Y_AXIS:{var c=s.dispatchEvent("mouseMoveEvent",l);return this._chart.getChartStore().getTooltipStore().setCrosshair(),c}}}return!1},r.prototype.pressedMouseMoveEvent=function(e){var t,i,n,o,a;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===W.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var s=this._findWidgetByEvent(e),l=s.pane,u=s.widget;if(u!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===(l==null?void 0:l.getId())&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===u.getName()){var c=this._makeWidgetEvent(e,u),h=u.getName();switch(h){case W.MAIN:{var f=u.getBounding(),v=u.dispatchEvent("pressedMouseMoveEvent",c);if(!v&&this._startScrollCoordinate!==null){var d=l.getAxisComponent();if(this._prevYAxisRange!==null&&!d.getAutoCalcTickFlag()&&d.getScrollZoomEnabled()){var p=this._prevYAxisRange,g=p.from,m=p.to,_=p.range,S;(n=d==null?void 0:d.isReverse())!==null&&n!==void 0&&n?S=this._startScrollCoordinate.y-c.y:S=c.y-this._startScrollCoordinate.y;var y=S/f.height,C=_*y,w=g+C,b=m+C,x=d.convertToRealValue(w),E=d.convertToRealValue(b);d.setRange({from:w,to:b,range:b-w,realFrom:x,realTo:E,realRange:E-x})}var I=c.x-this._startScrollCoordinate.x;this._chart.getChartStore().getTimeScaleStore().scroll(I)}return this._chart.getChartStore().getTooltipStore().setCrosshair({x:c.x,y:c.y,paneId:l==null?void 0:l.getId()}),v}case W.X_AXIS:{var v=u.dispatchEvent("pressedMouseMoveEvent",c);if(v)this._chart.updatePane(1);else{var D=l.getAxisComponent();if(!((o=D==null?void 0:D.getScrollZoomEnabled())!==null&&o!==void 0)||o){var y=this._xAxisStartScaleDistance/c.pageX;if(Number.isFinite(y)){var A=(y-this._xAxisScale)*10;this._xAxisScale=y,this._chart.getChartStore().getTimeScaleStore().zoom(A,(a=this._xAxisStartScaleCoordinate)!==null&&a!==void 0?a:void 0)}}}return v}case W.Y_AXIS:{var v=u.dispatchEvent("pressedMouseMoveEvent",c);if(v)this._chart.updatePane(1);else{var d=l.getAxisComponent();if(this._prevYAxisRange!==null&&d.getScrollZoomEnabled()){var M=this._prevYAxisRange,g=M.from,m=M.to,_=M.range,y=c.pageY/this._yAxisStartScaleDistance,T=_*y,C=(T-_)/2,w=g-C,b=m+C,x=d.convertToRealValue(w),E=d.convertToRealValue(b);d.setRange({from:w,to:b,range:T,realFrom:x,realTo:E,realRange:E-x}),this._chart.adjustPaneViewport(!1,!0,!0,!0)}}return v}}}return!1},r.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t),o=t.getName();switch(o){case W.MAIN:case W.SEPARATOR:case W.X_AXIS:case W.Y_AXIS:{i=t.dispatchEvent("mouseUpEvent",n);break}}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},r.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var i=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",i)}return!1},r.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t),o=t.getName();switch(o){case W.MAIN:case W.X_AXIS:case W.Y_AXIS:{i=t.dispatchEvent("mouseRightClickEvent",n);break}}i&&this._chart.updatePane(1)}return!1},r.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null){var o=n.getName();switch(o){case W.MAIN:{var a=this._makeWidgetEvent(e,n);return n.dispatchEvent("mouseDoubleClickEvent",a)}case W.Y_AXIS:{var s=i.getAxisComponent();if(!s.getAutoCalcTickFlag())return s.setAutoCalcTickFlag(!0),this._chart.adjustPaneViewport(!1,!0,!0,!0),!0;break}}}return!1},r.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().getTooltipStore().setCrosshair(),!0},r.prototype.touchStartEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null){var o=this._makeWidgetEvent(e,n),a=n.getName();switch(a){case W.MAIN:{var s=this._chart.getChartStore(),l=s.getTooltipStore();if(n.dispatchEvent("mouseDownEvent",o))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,l.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._flingScrollRequestId!==null&&(Rr(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:o.x,y:o.y},s.getTimeScaleStore().startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var u=o.x-this._touchCoordinate.x,c=o.y-this._touchCoordinate.y,h=Math.sqrt(u*u+c*c);h<Za?(this._touchCoordinate={x:o.x,y:o.y},l.setCrosshair({x:o.x,y:o.y,paneId:i==null?void 0:i.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,l.setCrosshair())}return!0}case W.X_AXIS:case W.Y_AXIS:{var f=n.dispatchEvent("mouseDownEvent",o);return f&&this._chart.updatePane(1),f}}}return!1},r.prototype.touchMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),a=o.pane,s=o.widget;if(s!==null){var l=this._makeWidgetEvent(e,s),u=s.getName(),c=this._chart.getChartStore(),h=c.getTooltipStore();switch(u){case W.MAIN:{if(s.dispatchEvent("pressedMouseMoveEvent",l))return(t=l.preventDefault)===null||t===void 0||t.call(l),h.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._touchCoordinate!==null)(i=l.preventDefault)===null||i===void 0||i.call(l),h.setCrosshair({x:l.x,y:l.y,paneId:a==null?void 0:a.getId()});else if(this._startScrollCoordinate!==null&&Math.abs(this._startScrollCoordinate.x-l.x)>this._startScrollCoordinate.y-l.y){var f=l.x-this._startScrollCoordinate.x;c.getTimeScaleStore().scroll(f)}return!0}case W.X_AXIS:case W.Y_AXIS:{var v=s.dispatchEvent("pressedMouseMoveEvent",l);return v&&((n=l.preventDefault)===null||n===void 0||n.call(l),this._chart.updatePane(1)),v}}}return!1},r.prototype.touchEndEvent=function(e){var t=this,i=this._findWidgetByEvent(e).widget;if(i!==null){var n=this._makeWidgetEvent(e,i),o=i.getName();switch(o){case W.MAIN:{if(i.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var a=new Date().getTime()-this._flingStartTime,s=n.x-this._startScrollCoordinate.x,l=s/(a>0?a:1)*20;if(a<200&&Math.abs(l)>0){var u=this._chart.getChartStore().getTimeScaleStore(),c=function(){t._flingScrollRequestId=Ot(function(){u.startScroll(),u.scroll(l),l=l*(1-.025),Math.abs(l)<1?t._flingScrollRequestId!==null&&(Rr(t._flingScrollRequestId),t._flingScrollRequestId=null):c()})};c()}}return!0}case W.X_AXIS:case W.Y_AXIS:{var h=i.dispatchEvent("mouseUpEvent",n);h&&this._chart.updatePane(1)}}}return!1},r.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget,o=!1;if(n!==null){var a=this._makeWidgetEvent(e,n),s=n.dispatchEvent("mouseClickEvent",a);if(n.getName()===W.MAIN){var l=this._makeWidgetEvent(e,n),u=this._chart.getChartStore(),c=u.getTooltipStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,c.setCrosshair(void 0,!0),o=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:l.x,y:l.y},c.setCrosshair({x:l.x,y:l.y,paneId:i==null?void 0:i.getId()},!0),o=!0),this._touchCancelCrosshair=!1)}(o||s)&&this._chart.updatePane(1)}return o},r.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},r.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null&&n.getName()===W.MAIN){var o=this._makeWidgetEvent(e,n);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().getTooltipStore().setCrosshair({x:o.x,y:o.y,paneId:i==null?void 0:i.getId()}),!0}return!1},r.prototype._findWidgetByEvent=function(e){var t,i,n,o,a=e.x,s=e.y,l=this._chart.getAllSeparatorPanes(),u=this._chart.getChartStore().getStyles().separator.size;try{for(var c=rt(l),h=c.next();!h.done;h=c.next()){var f=nt(h.value,2),v=f[1],d=v.getBounding(),p=d.top-Math.round((xt-u)/2);if(a>=d.left&&a<=d.left+d.width&&s>=p&&s<=p+xt)return{pane:v,widget:v.getWidget()}}}catch(I){t={error:I}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}var g=this._chart.getAllDrawPanes(),m=null;try{for(var _=rt(g),S=_.next();!S.done;S=_.next()){var y=S.value,d=y.getBounding();if(a>=d.left&&a<=d.left+d.width&&s>=d.top&&s<=d.top+d.height){m=y;break}}}catch(I){n={error:I}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}var C=null;if(m!==null){if(C===null){var w=m.getMainWidget(),b=w.getBounding();a>=b.left&&a<=b.left+b.width&&s>=b.top&&s<=b.top+b.height&&(C=w)}if(C===null){var x=m.getYAxisWidget();if(x!==null){var E=x.getBounding();a>=E.left&&a<=E.left+E.width&&s>=E.top&&s<=E.top+E.height&&(C=x)}}}return{pane:m,widget:C}},r.prototype._makeWidgetEvent=function(e,t){var i,n,o,a=(i=t==null?void 0:t.getBounding())!==null&&i!==void 0?i:null;return B(B({},e),{x:e.x-((n=a==null?void 0:a.left)!==null&&n!==void 0?n:0),y:e.y-((o=a==null?void 0:a.top)!==null&&o!==void 0?o:0)})},r.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},r}(),Me;(function(r){r.Root="root",r.Main="main",r.YAxis="yAxis"})(Me||(Me={}));var es=function(){function r(e,t){this._drawPanes=[],this._separatorPanes=new Map,this._initContainer(e),this._chartEvent=new Qa(this._chartContainer,this),this._chartStore=new ra(this,t),this._initPanes(t),this.adjustPaneViewport(!0,!0,!0)}return r.prototype._initContainer=function(e){this._container=e,this._chartContainer=Oe("div",{position:"relative",width:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer)},r.prototype._initPanes=function(e){var t=this,i,n=(i=e==null?void 0:e.layout)!==null&&i!==void 0?i:[{type:"candle"}],o=!1,a=!1,s=function(l){if(!a){var u=t._createPane(ja,X.X_AXIS,l??{});t._xAxisPane=u,a=!0}};n.forEach(function(l){var u,c,h;switch(l.type){case"candle":{if(!o){var f=(u=l.options)!==null&&u!==void 0?u:{};Se(f,{id:X.CANDLE}),t._candlePane=t._createPane(Na,X.CANDLE,f);var v=(c=l.content)!==null&&c!==void 0?c:[];v.forEach(function(p){t.createIndicator(p,!0,f)}),o=!0}break}case"indicator":{var v=(h=l.content)!==null&&h!==void 0?h:[];if(v.length>0){var d;v.forEach(function(g){P(d)?t.createIndicator(g,!0,{id:d}):d=t.createIndicator(g,!0,l.options)})}break}case"xAxis":{s(l.options);break}}}),s({position:"bottom"})},r.prototype._createPane=function(e,t,i){var n=null,o=null,a=i==null?void 0:i.position;switch(a){case"top":{var s=this._drawPanes[0];P(s)&&(o=new e(this._chartContainer,s.getContainer(),this,t,i??{}),n=0);break}case"bottom":break;default:for(var l=this._drawPanes.length-1;l>-1;l--){var u=this._drawPanes[l],c=this._drawPanes[l-1];if((u==null?void 0:u.getOptions().position)==="bottom"&&(c==null?void 0:c.getOptions().position)!=="bottom"){o=new e(this._chartContainer,u.getContainer(),this,t,i??{}),n=l;break}}}P(o)||(o=new e(this._chartContainer,null,this,t,i??{}));var h;if(F(n)?(this._drawPanes.splice(n,0,o),h=n):(this._drawPanes.push(o),h=this._drawPanes.length-1),o.getId()!==X.X_AXIS){var f=this._drawPanes[h+1];if(P(f)&&f.getId()===X.X_AXIS&&(f=this._drawPanes[h+2]),P(f)){var v=this._separatorPanes.get(f);P(v)?v.setTopPane(o):(v=new Ur(this._chartContainer,f.getContainer(),this,"",o,f),this._separatorPanes.set(f,v))}var d=this._drawPanes[h-1];if(P(d)&&d.getId()===X.X_AXIS&&(d=this._drawPanes[h-2]),P(d)){var v=new Ur(this._chartContainer,o.getContainer(),this,"",d,o);this._separatorPanes.set(o,v)}}return o},r.prototype._measurePaneHeight=function(){var e=this,t,i=Math.floor(this._container.clientHeight),n=this._chartStore.getStyles().separator.size,o=this._xAxisPane.getAxisComponent().getAutoSize(),a=i-o-this._separatorPanes.size*n;a<0&&(a=0);var s=0;this._drawPanes.forEach(function(c){if(c.getId()!==X.CANDLE&&c.getId()!==X.X_AXIS){var h=c.getBounding().height,f=c.getOptions().minHeight;h<f&&(h=f),s+h>a?(s=a,h=Math.max(a-s,0)):s+=h,c.setBounding({height:h})}});var l=a-s;(t=this._candlePane)===null||t===void 0||t.setBounding({height:l}),this._xAxisPane.setBounding({height:o});var u=0;this._drawPanes.forEach(function(c){var h=e._separatorPanes.get(c);P(h)&&(h.setBounding({height:n,top:u}),u+=n),c.setBounding({top:u}),u+=c.getBounding().height})},r.prototype._measurePaneWidth=function(){var e=this,t=Math.floor(this._container.clientWidth),i=this._chartStore.getStyles(),n=i.yAxis,o=n.position===ze.Left,a=!n.inside,s=0,l=0,u=0,c=0;this._drawPanes.forEach(function(g){g.getId()!==X.X_AXIS&&(l=Math.max(l,g.getAxisComponent().getAutoSize()))}),l>t&&(l=t),a?(s=t-l,o?(u=0,c=l):(u=t-l,c=0)):(s=t,c=0,o?u=0:u=t-l),this._chartStore.getTimeScaleStore().setTotalBarSpace(s);var h={width:t},f={width:s,left:c},v={width:l,left:u},d=i.separator.fill,p;a&&!d?p=f:p=h,this._drawPanes.forEach(function(g){var m;(m=e._separatorPanes.get(g))===null||m===void 0||m.setBounding(p),g.setBounding(h,f,v)})},r.prototype._setPaneOptions=function(e,t){var i,n;if(V(e.id)){var o=this.getDrawPaneById(e.id),a=!1;if(o!==null){var s=t;if(e.id!==X.CANDLE&&F(e.height)&&e.height>0){var l=Math.max((i=e.minHeight)!==null&&i!==void 0?i:o.getOptions().minHeight,0),u=Math.max(l,e.height);o.setBounding({height:u}),s=!0,a=!0}(V((n=e.axisOptions)===null||n===void 0?void 0:n.name)||P(e.gap))&&(s=!0),o.setOptions(e),s&&this.adjustPaneViewport(a,!0,!0,!0,!0)}}},r.prototype.getDrawPaneById=function(e){if(e===X.CANDLE)return this._candlePane;if(e===X.X_AXIS)return this._xAxisPane;var t=this._drawPanes.find(function(i){return i.getId()===e});return t??null},r.prototype.getContainer=function(){return this._container},r.prototype.getChartStore=function(){return this._chartStore},r.prototype.getXAxisPane=function(){return this._xAxisPane},r.prototype.getAllDrawPanes=function(){return this._drawPanes},r.prototype.getAllSeparatorPanes=function(){return this._separatorPanes},r.prototype.adjustPaneViewport=function(e,t,i,n,o){e&&this._measurePaneHeight();var a=t,s=n??!1,l=o??!1;(s||l)&&this._drawPanes.forEach(function(u){var c=u.getAxisComponent().buildTicks(l);a||(a=c)}),a&&this._measurePaneWidth(),(i??!1)&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4))},r.prototype.updatePane=function(e,t){if(P(t)){var i=this.getDrawPaneById(t);i==null||i.update(e)}else this._separatorPanes.forEach(function(n){n.update(e)}),this._drawPanes.forEach(function(n){n.update(e)})},r.prototype.crosshairChange=function(e){var t=this,i=this._chartStore.getActionStore();if(i.has(ye.OnCrosshairChange)){var n={};this._drawPanes.forEach(function(o){var a=o.getId(),s={},l=t._chartStore.getIndicatorStore().getInstances(a);l.forEach(function(u){var c,h=u.result;s[u.name]=h[(c=e.dataIndex)!==null&&c!==void 0?c:h.length-1]}),n[a]=s}),V(e.paneId)&&i.execute(ye.OnCrosshairChange,B(B({},e),{indicatorData:n}))}},r.prototype.getDom=function(e,t){var i,n;if(V(e)){var o=this.getDrawPaneById(e);if(o!==null){var a=t??Me.Root;switch(a){case Me.Root:return o.getContainer();case Me.Main:return o.getMainWidget().getContainer();case Me.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&n!==void 0?n:null}}}else return this._chartContainer;return null},r.prototype.getSize=function(e,t){var i,n;if(P(e)){var o=this.getDrawPaneById(e);if(o!==null){var a=t??Me.Root;switch(a){case Me.Root:return o.getBounding();case Me.Main:return o.getMainWidget().getBounding();case Me.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&n!==void 0?n:null}}}else return{width:Math.floor(this._chartContainer.clientWidth),height:Math.floor(this._chartContainer.clientHeight),left:0,top:0,right:0,bottom:0};return null},r.prototype.setStyles=function(e){var t,i;this._chartStore.setOptions({styles:e});var n;V(e)?n=di(e):n=e,P((t=n==null?void 0:n.yAxis)===null||t===void 0?void 0:t.type)&&((i=this._candlePane)===null||i===void 0||i.getAxisComponent().setAutoCalcTickFlag(!0)),this.adjustPaneViewport(!0,!0,!0,!0,!0)},r.prototype.getStyles=function(){return this._chartStore.getStyles()},r.prototype.setLocale=function(e){this._chartStore.setOptions({locale:e}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},r.prototype.getLocale=function(){return this._chartStore.getLocale()},r.prototype.setCustomApi=function(e){this._chartStore.setOptions({customApi:e}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},r.prototype.setPriceVolumePrecision=function(e,t){this._chartStore.setPrecision({price:e,volume:t})},r.prototype.getPriceVolumePrecision=function(){return this._chartStore.getPrecision()},r.prototype.setTimezone=function(e){this._chartStore.setOptions({timezone:e}),this._xAxisPane.getAxisComponent().buildTicks(!0),this._xAxisPane.update(3)},r.prototype.getTimezone=function(){return this._chartStore.getTimeScaleStore().getTimezone()},r.prototype.setOffsetRightDistance=function(e){this._chartStore.getTimeScaleStore().setOffsetRightDistance(e,!0)},r.prototype.getOffsetRightDistance=function(){return this._chartStore.getTimeScaleStore().getOffsetRightDistance()},r.prototype.setMaxOffsetLeftDistance=function(e){e<0||this._chartStore.getTimeScaleStore().setMaxOffsetLeftDistance(e)},r.prototype.setMaxOffsetRightDistance=function(e){e<0||this._chartStore.getTimeScaleStore().setMaxOffsetRightDistance(e)},r.prototype.setLeftMinVisibleBarCount=function(e){e<0||this._chartStore.getTimeScaleStore().setLeftMinVisibleBarCount(Math.ceil(e))},r.prototype.setRightMinVisibleBarCount=function(e){e<0||this._chartStore.getTimeScaleStore().setRightMinVisibleBarCount(Math.ceil(e))},r.prototype.setBarSpace=function(e){this._chartStore.getTimeScaleStore().setBarSpace(e)},r.prototype.getBarSpace=function(){return this._chartStore.getTimeScaleStore().getBarSpace().bar},r.prototype.getVisibleRange=function(){return this._chartStore.getTimeScaleStore().getVisibleRange()},r.prototype.clearData=function(){this._chartStore.clear()},r.prototype.getDataList=function(){return this._chartStore.getDataList()},r.prototype.applyNewData=function(e,t,i){this._chartStore.addData(e,_e.Init,t).then(function(){}).catch(function(){}).finally(function(){i==null||i()})},r.prototype.applyMoreData=function(e,t,i){this._chartStore.addData(e,_e.Forward,t??!0).then(function(){}).catch(function(){}).finally(function(){i==null||i()})},r.prototype.updateData=function(e,t){this._chartStore.addData(e).then(function(){}).catch(function(){}).finally(function(){t==null||t()})},r.prototype.loadMore=function(e){this._chartStore.setLoadMoreCallback(e)},r.prototype.setLoadDataCallback=function(e){this._chartStore.setLoadDataCallback(e)},r.prototype.createIndicator=function(e,t,i,n){var o=this,a,s=V(e)?{name:e}:e;if(si(s.name)===null)return null;var l=i==null?void 0:i.id,u=this.getDrawPaneById(l??"");if(u!==null)this._chartStore.getIndicatorStore().addInstance(s,l??"",t??!1).then(function(f){var v;o._setPaneOptions(i??{},(v=u.getAxisComponent().buildTicks(!0))!==null&&v!==void 0?v:!1)}).catch(function(f){});else{l??(l=ni(X.INDICATOR));var c=this._createPane(Ai,l,i??{}),h=(a=i==null?void 0:i.height)!==null&&a!==void 0?a:qo;c.setBounding({height:h}),this._chartStore.getIndicatorStore().addInstance(s,l,t??!1).finally(function(){o.adjustPaneViewport(!0,!0,!0,!0,!0),n==null||n()})}return l??null},r.prototype.overrideIndicator=function(e,t,i){var n=this;this._chartStore.getIndicatorStore().override(e,t??null).then(function(o){var a=nt(o,2),s=a[0],l=a[1];(s||l)&&(n.adjustPaneViewport(!1,l,!0,l),i==null||i())}).catch(function(){})},r.prototype.getIndicatorByPaneId=function(e,t){return this._chartStore.getIndicatorStore().getInstanceByPaneId(e,t)},r.prototype.removeIndicator=function(e,t){var i,n,o,a=this._chartStore.getIndicatorStore(),s=a.removeInstance(e,t);if(s){var l=!1;if(e!==X.CANDLE&&!a.hasInstances(e)){var u=this.getDrawPaneById(e),c=this._drawPanes.findIndex(function(m){return m.getId()===e});if(u!==null){l=!0;var h=this._separatorPanes.get(u);if(P(h)){var f=h==null?void 0:h.getTopPane();try{for(var v=rt(this._separatorPanes),d=v.next();!d.done;d=v.next()){var p=d.value;if(p[1].getTopPane().getId()===u.getId()){p[1].setTopPane(f);break}}}catch(m){i={error:m}}finally{try{d&&!d.done&&(n=v.return)&&n.call(v)}finally{if(i)throw i.error}}h.destroy(),this._separatorPanes.delete(u)}this._drawPanes.splice(c,1),u.destroy();var g=this._drawPanes[0];P(g)&&g.getId()===X.X_AXIS&&(g=this._drawPanes[1]),(o=this._separatorPanes.get(g))===null||o===void 0||o.destroy(),this._separatorPanes.delete(g)}}this.adjustPaneViewport(l,!0,!0,!0,!0)}},r.prototype.createOverlay=function(e,t){var i=[];if(V(e))i=[{name:e}];else if(xe(e))i=e.map(function(s){return V(s)?{name:s}:s});else{var n=e;i=[n]}var o=!0;(!P(t)||this.getDrawPaneById(t)===null)&&(t=X.CANDLE,o=!1);var a=this._chartStore.getOverlayStore().addInstances(i,t,o);return xe(e)?a:a[0]},r.prototype.getOverlayById=function(e){return this._chartStore.getOverlayStore().getInstanceById(e)},r.prototype.overrideOverlay=function(e){this._chartStore.getOverlayStore().override(e)},r.prototype.removeOverlay=function(e){var t;P(e)&&(V(e)?t={id:e}:t=e),this._chartStore.getOverlayStore().removeInstance(t)},r.prototype.setPaneOptions=function(e){this._setPaneOptions(e,!1)},r.prototype.setZoomEnabled=function(e){this._chartStore.getTimeScaleStore().setZoomEnabled(e)},r.prototype.isZoomEnabled=function(){return this._chartStore.getTimeScaleStore().getZoomEnabled()},r.prototype.setScrollEnabled=function(e){this._chartStore.getTimeScaleStore().setScrollEnabled(e)},r.prototype.isScrollEnabled=function(){return this._chartStore.getTimeScaleStore().getScrollEnabled()},r.prototype.scrollByDistance=function(e,t){var i=F(t)&&t>0?t:0,n=this._chartStore.getTimeScaleStore();if(n.startScroll(),i>0){var o=new or({duration:i});o.doFrame(function(a){var s=e*(a/i);n.scroll(s)}),o.start()}else n.scroll(e)},r.prototype.scrollToRealTime=function(e){var t=this._chartStore.getTimeScaleStore(),i=t.getBarSpace().bar,n=t.getLastBarRightSideDiffBarCount()-t.getInitialOffsetRightDistance()/i,o=n*i;this.scrollByDistance(o,e)},r.prototype.scrollToDataIndex=function(e,t){var i=this._chartStore.getTimeScaleStore(),n=(i.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-e))*i.getBarSpace().bar;this.scrollByDistance(n,t)},r.prototype.scrollToTimestamp=function(e,t){var i=ar(this.getDataList(),"timestamp",e);this.scrollToDataIndex(i,t)},r.prototype.zoomAtCoordinate=function(e,t,i){var n=F(i)&&i>0?i:0,o=this._chartStore.getTimeScaleStore(),a=o.getBarSpace().bar,s=a*e,l=s-a;if(n>0){var u=0,c=new or({duration:n});c.doFrame(function(h){var f=l*(h/n),v=(f-u)/o.getBarSpace().bar*sr;o.zoom(v,t),u=f}),c.start()}else o.zoom(l/a*sr,t)},r.prototype.zoomAtDataIndex=function(e,t,i){var n=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:n,y:0},i)},r.prototype.zoomAtTimestamp=function(e,t,i){var n=ar(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,n,i)},r.prototype.convertToPixel=function(e,t){var i,n=t.paneId,o=n===void 0?X.CANDLE:n,a=t.absolute,s=a===void 0?!1:a,l=[];if(o!==X.X_AXIS){var u=this.getDrawPaneById(o);if(u!==null){var c=this._chartStore.getTimeScaleStore(),h=u.getBounding(),f=new Array().concat(e),v=this._xAxisPane.getAxisComponent(),d=u.getAxisComponent();l=f.map(function(p){var g={},m=p.dataIndex;if(F(p.timestamp)&&(m=c.timestampToDataIndex(p.timestamp)),F(m)&&(g.x=v==null?void 0:v.convertToPixel(m)),F(p.value)){var _=d==null?void 0:d.convertToPixel(p.value);g.y=s?h.top+_:_}return g})}}return xe(e)?l:(i=l[0])!==null&&i!==void 0?i:{}},r.prototype.convertFromPixel=function(e,t){var i,n=t.paneId,o=n===void 0?X.CANDLE:n,a=t.absolute,s=a===void 0?!1:a,l=[];if(o!==X.X_AXIS){var u=this.getDrawPaneById(o);if(u!==null){var c=this._chartStore.getTimeScaleStore(),h=u.getBounding(),f=new Array().concat(e),v=this._xAxisPane.getAxisComponent(),d=u.getAxisComponent();l=f.map(function(p){var g,m,_={};if(F(p.x)){var S=(g=v==null?void 0:v.convertFromPixel(p.x))!==null&&g!==void 0?g:-1;_.dataIndex=S,_.timestamp=(m=c.dataIndexToTimestamp(S))!==null&&m!==void 0?m:void 0}if(F(p.y)){var y=s?p.y-h.top:p.y;_.value=d.convertFromPixel(y)}return _})}}return xe(e)?l:(i=l[0])!==null&&i!==void 0?i:{}},r.prototype.executeAction=function(e,t){var i;switch(e){case ye.OnCrosshairChange:{var n=B({},t);n.paneId=(i=n.paneId)!==null&&i!==void 0?i:X.CANDLE,this._chartStore.getTooltipStore().setCrosshair(n);break}}},r.prototype.subscribeAction=function(e,t){this._chartStore.getActionStore().subscribe(e,t)},r.prototype.unsubscribeAction=function(e,t){this._chartStore.getActionStore().unsubscribe(e,t)},r.prototype.getConvertPictureUrl=function(e,t,i){var n=this,o=this._chartContainer.clientWidth,a=this._chartContainer.clientHeight,s=Oe("canvas",{width:"".concat(o,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=Ge(s);s.width=o*u,s.height=a*u,l.scale(u,u),l.fillStyle=i??"#FFFFFF",l.fillRect(0,0,o,a);var c=e??!1;return this._drawPanes.forEach(function(h){var f=n._separatorPanes.get(h);if(P(f)){var v=f.getBounding();l.drawImage(f.getImage(c),v.left,v.top,v.width,v.height)}var d=h.getBounding();l.drawImage(h.getImage(c),0,d.top,o,d.height)}),s.toDataURL("image/".concat(t??"jpeg"))},r.prototype.resize=function(){this.adjustPaneViewport(!0,!0,!0,!0,!0)},r.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(e){e.destroy()}),this._drawPanes=[],this._separatorPanes.forEach(function(e){e.destroy()}),this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},r}(),Yr=new Map,ts=1;function rs(r,e){var t;if(V(r)?t=document.getElementById(r):t=r,t===null)return null;var i=Yr.get(t.id);if(P(i))return i;var n="k_line_chart_".concat(ts++);return i=new es(t,e),i.id=n,t.setAttribute("k-line-chart-id",n),Yr.set(n,i),i}const Gr=r=>{const e=Lt[r]||Lt.dark;return{grid:{show:!0,horizontal:{show:!0,size:1,color:e.grid,style:R.Dashed,dashedValue:[2,2]},vertical:{show:!0,size:1,color:e.grid,style:R.Dashed,dashedValue:[2,2]}},candle:{type:de.CandleSolid,bar:{upColor:e.up,downColor:e.down,noChangeColor:e.up,upBorderColor:e.up,downBorderColor:e.down,noChangeBorderColor:e.up,upWickColor:e.up,downWickColor:e.down,noChangeWickColor:e.up},area:{lineSize:2,lineColor:"#2196F3",value:"close",smooth:!0,backgroundColor:[{offset:0,color:"rgba(33, 150, 243, 0.01)"},{offset:1,color:"rgba(33, 150, 243, 0.2)"}],point:{show:!0,color:"blue",radius:4,rippleColor:"0.3",rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:{show:!0,color:e.price_mark,textOffset:4,textSize:e.text_size,textFamily:e.family,textWeight:"normal"},low:{show:!0,color:e.price_mark,textOffset:4,textSize:e.text_size,textFamily:e.family,textWeight:"normal"},last:{show:!0,upColor:e.up,downColor:e.down,noChangeColor:e.up,line:{show:!0,style:R.Dashed,dashedValue:[4,4],size:.4},text:{show:!0,style:O.Fill,size:e.text_size,paddingLeft:7,paddingTop:3,paddingRight:5,paddingBottom:2,borderStyle:R.Solid,borderSize:1,borderColor:"transparent",borderDashedValue:[2,2],color:"#FFFFFF",family:e.family,weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:je.Always,showType:me.Standard,custom:[],defaultValue:"n/a",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#f2f3f5",color:"#FEFEFE"},text:{size:11,family:e.family,weight:"normal",color:e.tooltip_color,marginLeft:12,marginTop:12,marginRight:-6,marginBottom:0},icons:[]}},indicator:{ohlc:{upColor:e.up_opacity,downColor:e.down_opacity,noChangeColor:e.up_opacity},bars:[{style:O.Fill,borderStyle:R.Solid,borderSize:1,borderDashedValue:[2,2],upColor:e.up_opacity,downColor:e.down_opacity,noChangeColor:e.up_opacity}],lines:[{style:R.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#FF9600"},{style:R.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#935EBD"},{style:R.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#2196F3"},{style:R.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#E11D74"},{style:R.Solid,smooth:!1,size:.4,dashedValue:[2,2],color:"#01C5C4"}],circles:[{style:O.Fill,borderStyle:R.Solid,borderSize:1,borderDashedValue:[2,2],upColor:e.up_opacity,downColor:e.down_opacity,noChangeColor:e.up_opacity}],lastValueMark:{show:!1,text:{show:!1,style:O.Fill,color:"#FFFFFF",size:e.text_size,family:e.family,weight:"normal",borderStyle:R.Solid,borderSize:1,borderDashedValue:[2,2],paddingLeft:7,paddingTop:3,paddingRight:5,paddingBottom:2,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:je.Always,showType:me.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:e.family,weight:"normal",color:e.tooltip_color,marginTop:12,marginRight:-6,marginBottom:0,marginLeft:12},icons:[]}},xAxis:{show:!0,size:"auto",axisLine:{show:!0,color:e.scales_line,size:1},tickText:{show:!0,color:e.scales_text,family:e.family,weight:"normal",size:e.text_size,marginStart:3,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:e.scales_line}},yAxis:{show:!0,size:"auto",position:ze.Right,type:ee.Normal,inside:!1,reverse:!1,axisLine:{show:!0,color:e.scales_line,size:1},tickText:{show:!0,color:e.scales_text,family:e.family,weight:"normal",size:e.text_size,marginStart:3,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:e.scales_line}},separator:{size:1,color:e.scales_line,fill:!0,activeBackgroundColor:"rgba(230, 230, 230, .15)"},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:R.Dashed,dashedValue:[6,6],size:1,color:e.cross_line},text:{show:!0,style:O.Fill,color:e.crosshair,size:e.text_size,family:e.family,weight:"normal",borderStyle:R.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:e.crosshair_bg,borderRadius:2,paddingLeft:7,paddingRight:5,paddingTop:3,paddingBottom:2,backgroundColor:e.crosshair_bg}},vertical:{show:!0,line:{show:!0,style:R.Dashed,dashedValue:[6,6],size:1,color:"#888888"},text:{show:!0,style:O.Fill,color:"#FFFFFF",size:e.text_size,family:e.family,weight:"normal",borderStyle:R.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:e.crosshair_bg,borderRadius:2,paddingLeft:2,paddingRight:2,paddingTop:3,paddingBottom:2,backgroundColor:e.crosshair_bg}}},overlay:{point:{color:"#1677FF",borderColor:"rgba(22, 119, 255, 0.35)",borderSize:1,radius:5,activeColor:"#1677FF",activeBorderColor:"rgba(22, 119, 255, 0.35)",activeBorderSize:3,activeRadius:5},line:{style:R.Solid,smooth:!1,color:"#1677FF",size:1,dashedValue:[2,2]},rect:{style:O.Fill,color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderRadius:0,borderStyle:R.Solid,borderDashedValue:[2,2]},polygon:{style:O.Fill,color:"#1677FF",borderColor:"#1677FF",borderSize:1,borderStyle:R.Solid,borderDashedValue:[2,2]},circle:{style:O.Fill,color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderStyle:R.Solid,borderDashedValue:[2,2]},arc:{style:R.Solid,color:"#1677FF",size:1,dashedValue:[2,2]},text:{color:"#1677FF",size:12,family:e.family,weight:"normal",borderStyle:R.Solid,borderDashedValue:[2,2],borderSize:0,borderRadius:2,borderColor:"#1677FF",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,backgroundColor:"transparent"},rectText:{style:O.Fill,color:"#FFFFFF",size:12,family:e.family,weight:"normal",borderStyle:R.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"#1677FF"}}}},Ft={o:"O",h:"H",l:"L",c:"C"},is={[H["en-US"]]:Ft,[H["vi-VN"]]:Ft,[H["es-ES"]]:Ft,[H["id-ID"]]:Ft,[H["zh-CN"]]:{o:"开=",h:"高=",l:"低=",c:"收="},[H["zh-TW"]]:{o:"開=",h:"高=",l:"低=",c:"收="},[H["ja-JP"]]:{o:"始値",h:"高値",l:"安値",c:"終値"},[H["ru-RU"]]:{o:"ОТКР",h:"МАКС",l:"МИН",c:"ЗАКР"},[H["tr-TR"]]:{o:"A",h:"Y",l:"D",c:"K"},[H["pt-BR"]]:{o:"Abr",h:"Máx.",l:"Mín.",c:"Fch"},[H["fr-FR"]]:{o:"O",h:"H",l:"B",c:"C"},[H["th-TH"]]:{o:"เปิด",h:"สูง",l:"ต่ำ",c:"ปิด"},[H["ko-KR"]]:{o:"시",h:"고",l:"저",c:"종"}};function ns(r){const{data:e,pricePrecision:t,locale:i}=r,n=is[H[i]],o=Qr(e.close,e.open),a=Yi(Gi(o,e.open),100),s=Jr(o,0)?r.downColor:r.upColor,l=`${Dr(o,0)?"+":""}${at(o,t,7)}`,u=`(${Dr(a,0)?"+":""}${at(a,2,7)}%)`;return[{title:n.o,value:{text:at(e.open,t),color:s}},{title:n.h,value:{text:at(e.high,t),color:s}},{title:n.l,value:{text:at(e.low,t),color:s}},{title:n.c,value:{text:at(e.close,t),color:s}},{title:"",value:{text:`${l} ${u}`,color:s}}]}function ys(r,e){if(typeof r=="string"&&!r.length)throw new Error("Dom id 不能为空");e.styles||(e.styles=Gr((e==null?void 0:e.theme)||ht)),e.locale=H[e.locale]||dr;const t=rs(r,e);if(!t)return null;t.$updateTooltip=()=>{const{candle:n}=t.getStyles();n.tooltip.custom=({current:o},{bar:a})=>{const s={data:o,pricePrecision:t.getPriceVolumePrecision().price,locale:t.getLocale(),upColor:a.upColor,downColor:a.downColor};return ns(s)},t.setStyles({candle:n})},t.$setTheme=n=>{const o=Gr(n);o&&t.setStyles(o)};const i=()=>{const n=new ResizeObserver(()=>{setTimeout(()=>{t.resize()},0)});t.getDom()&&n.observe(t.getDom())};return t.$addDefaultMa=()=>{t.getIndicatorByPaneId("candle_pane","MA")&&t.removeIndicator("candle_pane","MA"),t.createIndicator({name:"MA",calcParams:[10,30,60]},!1,{id:"candle_pane",dragEnabled:!0})},t.$addVol=()=>{t.getIndicatorByPaneId("default_vol","VOL")&&t.removeIndicator("default_vol","VOL"),t.createIndicator({name:"VOL",calcParams:[20],precision:t.getPriceVolumePrecision().volume,figures:[{key:"ma1",title:"",type:"line"},{key:"volume",title:"",type:"bar",baseValue:0,styles({current:n},o,{bars:a}){const{close:s,open:l}=n.kLineData||{close:0,open:0},{upColor:u,downColor:c}=a[0];return{color:Jr(Qr(s,l),0)?c:u}}}]},!1,{id:"default_vol"})},t.$screenshot=()=>{const n=t.getConvertPictureUrl(!0),o=new Image,a=window.open("","_blank");o.src=n,a==null||a.document.write(o.outerHTML),a==null||a.document.close()},t.$setGraph=n=>{const o=t.getStyles();o.candle.type=rr.simple_map[n]||rr.simple_map[1],t.setStyles(o)},i(),t.$updateTooltip(),t.setLeftMinVisibleBarCount(2),t.setRightMinVisibleBarCount(2),t.setOffsetRightDistance(42),t.setBarSpace(6.2),t.setPaneOptions({id:"candle_pane",gap:{top:.3}}),e.showMa&&t.$addDefaultMa(),e.showVol&&t.$addVol(),t}function lr(r,e){const t={...r};for(const i in e)typeof r[i]!="object"||r[i]===null||Array.isArray(r[i])?e[i]!==void 0&&(t[i]=e[i]):t[i]=lr(r[i],e[i]);return t}const os={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},jr=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]');let Kr=!1;function as(){return"CL v26.003 (internal id e793d706 @ 2023-10-05T20:27:44.510Z)"}const ss=class{constructor(r){var e,t;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!r.datafeed)throw new Error("Datafeed is not defined");!((e=r.overrides)===null||e===void 0)&&e["mainSeriesProperties.priceAxisProperties.lockScale"]&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete r.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=lr(os,r),((t=this._options.theme)!==null&&t!==void 0?t:"light").toLowerCase()==="dark"&&this._options.loading_screen===void 0&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(Kr||(Kr=!0,console.log("Using CL v26.003 (internal id e793d706 @ 2023-10-05T20:27:44.510Z)"))),this._create()}setDebugMode(r){this._innerAPI().setDebugMode(r)}onChartReady(r){this._ready?r.call(this):this._readyHandlers.push(r)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(r){this._doWhenInnerApiLoaded(e=>{e.onGrayedObjectClicked(r)})}onShortcut(r,e){this._doWhenInnerWindowLoaded(t=>{t.createShortcutAction(r,e)})}subscribe(r,e){this._doWhenInnerApiLoaded(t=>{t.subscribe(r,e)})}unsubscribe(r,e){this._doWhenInnerApiLoaded(t=>{t.unsubscribe(r,e)})}chart(r){return this._innerAPI().chart(r)}getLanguage(){return this._options.locale}setSymbol(r,e,t){this._innerAPI().changeSymbol(r,e,t)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(r=>{r.closePopupsAndDialogs()})}selectLineTool(r,e){this._innerAPI().selectLineTool(r,e)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(r){this._innerAPI().saveChart(r)}load(r,e){this._innerAPI().loadChart({json:r,extendedData:e})}getSavedCharts(r){this._innerAPI().getSavedCharts(r)}loadChartFromServer(r){this._innerAPI().loadChartFromServer(r)}saveChartToServer(r,e,t){this._innerAPI().saveChartToServer(r,e,t)}removeChartFromServer(r,e){this._innerAPI().removeChartFromServer(r,e)}onContextMenu(r){this._doWhenInnerApiLoaded(e=>{e.onContextMenu(r)})}createButton(r){return this._innerWindow().createButton(r)}createDropdown(r){return this._innerWindow().createDropdown(r)}showNoticeDialog(r){this._doWhenInnerApiLoaded(e=>{e.showNoticeDialog(r)})}showConfirmDialog(r){this._doWhenInnerApiLoaded(e=>{e.showConfirmDialog(r)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(r){return this._innerAPI().getStudyInputs(r)}getStudyStyles(r){return this._innerAPI().getStudyStyles(r)}addCustomCSSFile(r){this._innerWindow().addCustomCSSFile(r)}applyOverrides(r){this._options=lr(this._options,{overrides:r}),this._doWhenInnerWindowLoaded(e=>{e.applyOverrides(r)})}applyStudiesOverrides(r){this._doWhenInnerWindowLoaded(e=>{e.applyStudiesOverrides(r)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}activeChartIndex(){return this._innerAPI().activeChartIndex()}setActiveChart(r){return this._innerAPI().setActiveChart(r)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(r){this._innerAPI().setLayout(r)}layoutName(){return this._innerAPI().layoutName()}changeTheme(r,e){return this._innerWindow().changeTheme(r,e)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(r=>{r.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(r){this._innerAPI().drawOnAllCharts(r)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(r){this._innerAPI().setIntervalLinkingEnabled(r)}setDateRangeLinkingEnabled(r){this._innerAPI().setDateRangeLinkingEnabled(r)}setTimeFrame(r){this._innerAPI().setTimeFrame(r)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(r,e){this._innerAPI().setFeatureEnabled(r,e)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(r){return this._innerAPI().takeClientScreenshot(r)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}watermark(){return this._innerAPI().watermark()}customSymbolStatus(){return this._innerWindow().customSymbolStatus()}setCSSCustomProperty(r,e){if(r.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");this._innerWindow().document.body.style.setProperty(r,e)}getCSSCustomPropertyValue(r){if(r.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");const e=this._innerWindow().document.body;return e.style.getPropertyValue(r)||getComputedStyle(e).getPropertyValue(r)}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(r){this._ready?r(this._innerWindow()):this._innerWindowLoaded.then(()=>{r(this._innerWindow())})}_doWhenInnerApiLoaded(r){this._doWhenInnerWindowLoaded(e=>{e.doWhenApiIsReady(()=>r(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",ls&&setTimeout(()=>{this._iFrame.style.height=window.innerHeight+"px"},30))}_create(){var r,e;const t=(e=(r=this._options.enabled_features)===null||r===void 0?void 0:r.includes("iframe_loading_compatibility_mode"))!==null&&e!==void 0&&e,[i,n]=this._render(!t),o=this._options.container,a=typeof o=="string"?document.getElementById(o):o;if(a===null)throw new Error(`There is no such element - #${this._options.container}`);a.innerHTML=i,this._iFrame=a.querySelector(`#${this._id}`);const s=this._iFrame;t&&(s.contentWindow?(s.contentWindow.document.open(),s.contentWindow.document.write(n),s.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(s.style.width="100%",this._options.fullscreen||(s.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(l=>{const u=()=>{s.removeEventListener("load",u,!1),l()};s.addEventListener("load",u,!1)}),this._innerWindowLoaded.then(()=>{try{this._innerWindow().widgetReady(()=>{this._ready=!0;for(const l of this._readyHandlers)try{l.call(this)}catch(u){console.error(u)}this._innerWindow().initializationFinished()})}catch(l){if(l instanceof Error&&/widgetReady is not a function/.test(l.message))throw new Error(`There was an error when loading the library. Usually this error means the library failed to load its static files. Check that the library files are available at ${window.location.host}/${this._options.library_path||""} or correct the library_path option.`)}})}_render(r){const e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,rss_news_title:this._options.rss_news_title,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){const o=encodeURIComponent(this._options.locale);jr.findIndex(a=>a.language===o)>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}const t=function(o,a){var s;const l=new URL(`${o||""}`,location.href).href,u=JSON.parse('["bundles/runtime.0809a655c13b333b6a76.js","bundles/__LANG__.5008.e5d7d914577969582fa4.js","bundles/3515.2f722d33cebe31a154b1.css","bundles/9401.4792ed983286dcafa79b.js","bundles/library.847f247511d3f9997d72.js"]'),c=encodeURIComponent(a),h=(s=jr.find(d=>d.language===c))!==null&&s!==void 0?s:{iso:"en",dir:"ltr"},f=`lang="${h.iso}" dir="${h.dir}"`;return`<!DOCTYPE html><html ${(v={bundles:`
${function(d,p,g){if(d===void 0)return"";const m=[],_=[];for(const S of d)S.endsWith(".js")?m.push(`<script defer crossorigin="anonymous" src="${S.replace("__LANG__",g)}"><\/script>`):S.endsWith(".css")&&_.push(`<link type="text/css" href="${p?S.replace(/\.css$/i,".rtl.css"):S}" rel="stylesheet"/>`);return[...m,..._].join(`
`)}(u,h.dir==="rtl",c)}
`,localeLanguage:c,htmlAttrs:f,libraryPath:l}).htmlAttrs}><head><base href="${v.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${v.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]<\/script><script>(function() {
		window.urlParams = (function () {
			var match,
				pl	 = /\\+/g,  // Regex for replacing addition symbol with a space
				search = /([^&=]+)=?([^&]*)/g,
				decode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },
				query = function() {
					// We don't use hash on the url because: safari 13 throws an error if you attempt this
					// on a blob, and safari 14 will strip hash from blob urls.
					if (frameElement && frameElement.dataset.widgetOptions) {
						return frameElement.dataset.widgetOptions;
					} else {
						throw "Unexpected use of this page";
					}
				}(),
				result = {};

			while (match = search.exec(query)) {
				result[decode(match[1])] = decode(match[2]);
			}

			var additionalSettingsObject = window.parent[result.uid];

			var customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];

			for (var p in additionalSettingsObject) {
				if (customObjectNames.indexOf(p) === -1) {
					result[p] = JSON.stringify(additionalSettingsObject[p]);
				}
			}

			return result;
		})();

		window.locale = urlParams.locale;
		window.language = urlParams.locale; // a very big attention needed here
		window.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;

		window.addCustomCSSFile = function(href) {
			var link = document.createElement('link');
			link.setAttribute('type', 'text/css');
			link.setAttribute('rel', 'stylesheet');
			link.setAttribute('href', href);
			link.setAttribute('cross-origin', 'anonymous');

			window.loadedCustomCss = new Promise((resolve) => {
				link.onload = resolve;
				link.onerror = resolve;
			});
			document.body.appendChild(link);
		};

		window.loadedCustomCss = Promise.resolve();
		if (!!urlParams.customCSS) {
			window.addCustomCSSFile(urlParams.customCSS);
		}

		var loadingScreenParams = {};

		if (typeof urlParams.loading_screen === 'string') {
			try {
				loadingScreenParams = JSON.parse(urlParams.loading_screen);
			} catch(e) {}
		}

		var loadingIndicatorElement = document.getElementById('loading-indicator');

		if (loadingScreenParams.backgroundColor) {
			loadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;
		}

		!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var i,s,o,r,l,c=(void 0===l&&(l=""),i='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),o=function(n,i){var s,o;return s=null==i?document.documentElement:i.nodeType===t.Document?i.documentElement:i,e&&(o=e.get(s)),o||((o=s.ownerDocument.createRange()).selectNodeContents(s),e&&e.set(s,o)),o.createContextualFragment(n)}(i,s),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&e._el.style.setProperty(n,i)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();


		var spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;

		var loadingSpinner = new Spinner('large').setStyle({
			'--tv-spinner-color': spinnerColor,
			zIndex: String(2e9),
		});
		loadingSpinner.getEl().classList.add('spinner');
		loadingSpinner.spin(loadingIndicatorElement);
	})();<\/script></body></html>`;var v}(this._options.library_path||"",this._options.locale);let i=new URL("about:blank");if(r){const o=new Blob([t],{type:"text/html"}),a=URL.createObjectURL(o);i=new URL(a)}const n="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return[`<iframe
		id="${this._id}" name="${this._id}" src="${i.href}" data-widget-options="${n}"
		${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;opacity:0">
	</iframe>`,t]}};typeof window<"u"&&(window.TradingView=window.TradingView||{},window.TradingView.version=as);const ls=!(typeof window>"u"||!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS"),us={supported_resolutions:ti,supports_marks:!0,supports_time:!0,supports_timescale_marks:!0,supports_search:!0,reset_cache_timeout:.001},cs={onReady:r=>{setTimeout(()=>r(us))},searchSymbols:()=>{},resolveSymbol:(r,e)=>{const t={name:r,full_name:`${r}:Example Exchange`,ticker:r,description:r,exchange:"Example Exchange",listed_exchange:"Example Exchange",type:"crypto",session:"24x7",timezone:"Etc/UTC",format:"price",minmov:1,minmove2:0,pricescale:1e8,has_seconds:!0,has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,volume_precision:4,visible_plots_set:"ohlcv"};setTimeout(()=>{e(t)})},getBars:()=>{},subscribeBars:()=>{},unsubscribeBars:()=>{}},hs=(r=ht)=>{const e=Lt[r];return{volumePaneSize:"medium","scalesProperties.fontSize":10,"scalesProperties.lineColor":e.scales_line,"scalesProperties.textColor":e.scales_text,"scalesProperties.crosshairLabelBgColorLight":e.crosshair_bg,"scalesProperties.crosshairLabelBgColorDark":e.crosshair_bg,"paneProperties.background":e.background,"paneProperties.backgroundType":"solid","paneProperties.vertGridProperties.style":1,"paneProperties.horzGridProperties.style":1,"paneProperties.vertGridProperties.color":e.grid,"paneProperties.horzGridProperties.color":e.grid,"paneProperties.crossHairProperties.color":e.cross_line,"mainSeriesProperties.candleStyle.upColor":e.up,"mainSeriesProperties.candleStyle.downColor":e.down,"mainSeriesProperties.candleStyle.borderUpColor":e.up,"mainSeriesProperties.candleStyle.borderDownColor":e.down,"mainSeriesProperties.candleStyle.wickUpColor":e.up,"mainSeriesProperties.candleStyle.wickDownColor":e.down,"mainSeriesProperties.hollowCandleStyle.upColor":e.up,"mainSeriesProperties.hollowCandleStyle.downColor":e.down,"mainSeriesProperties.hollowCandleStyle.borderUpColor":e.up,"mainSeriesProperties.hollowCandleStyle.borderDownColor":e.down,"mainSeriesProperties.hollowCandleStyle.wickUpColor":e.up,"mainSeriesProperties.hollowCandleStyle.wickDownColor":e.down,"mainSeriesProperties.haStyle.upColor":e.up,"mainSeriesProperties.haStyle.downColor":e.down,"mainSeriesProperties.haStyle.borderUpColor":e.up,"mainSeriesProperties.haStyle.borderDownColor":e.down,"mainSeriesProperties.haStyle.wickUpColor":e.up,"mainSeriesProperties.haStyle.wickDownColor":e.down,"mainSeriesProperties.barStyle.upColor":e.up,"mainSeriesProperties.barStyle.downColor":e.down,"mainSeriesProperties.baselineStyle.topFillColor1":"rgba(21, 187, 122, 0.1)","mainSeriesProperties.baselineStyle.topFillColor2":"rgba(21, 187, 122, 0.1)","mainSeriesProperties.baselineStyle.bottomFillColor1":"rgba(210, 51, 77, 0.1)","mainSeriesProperties.baselineStyle.bottomFillColor2":"rgba(210, 51, 77, 0.1)","mainSeriesProperties.baselineStyle.topLineColor":e.up,"mainSeriesProperties.baselineStyle.bottomLineColor":e.down,"mainSeriesProperties.columnStyle.upColor":e.up,"mainSeriesProperties.columnStyle.downColor":e.down,"mainSeriesProperties.lineStyle.color":e.up,"mainSeriesProperties.lineWithMarkersStyle.color":e.up,"mainSeriesProperties.highLowAvgPrice.highLowPriceLabelsVisible":!0}},{getStore:Jt,removeStore:qr,setStore:Qt}=tn;function Ss(r,e){var l,u,c,h,f;if(typeof r=="string"&&!r.length)throw new Error("Dom id 不能为空");const t={...e},i=e.storeKey||ei;["locale","datafeed","storeKey"].forEach(v=>{delete t[v]});const n=Lt[e.theme||ht],o=Jt(i);if(o&&((l=o.charts)!=null&&l.length)){const v=(h=(c=(u=o.charts[0].panes)==null?void 0:u[0])==null?void 0:c.sources)==null?void 0:h[0].state;v&&(v.symbol=e.symbol,v.interval=e.interval)}const a={container:r,locale:Bt[e.locale]||Bt[dr],datafeed:Object.assign(cs,e.datafeed||{}),autosize:!0,time_frames:[],timezone:"Etc/UTC",theme:ht,custom_css_url:e.custom_css_url||"theme.css",custom_font_family:n.family,overrides:hs(e.theme||ht),header_widget_buttons_mode:"compact",enabled_features:["hide_left_toolbar_by_default","move_logo_to_main_pane","chart_crosshair_menu"],disabled_features:["header_symbol_search","header_compare","symbol_search_hot_key","volume_force_overlay","display_market_status","header_widget"],studies_overrides:{"volume.volume.color.0":n.down,"volume.volume.color.1":n.up,"volume.volume ma.color":n.ma},auto_save_delay:.05,settings_adapter:{initialSettings:{...o},setValue(v,d){const p=Jt(i)||{};["chartproperties","chartproperties.mainSeriesProperties"].includes(v)||(p[v]=d),Qt(i,p)},removeValue(v){const d=Jt(i)||{};Object.hasOwn(d,v)&&delete d[v],Qt(i,d)}},...t};o||(qr("tradingview.chartproperties.mainSeriesProperties"),qr("tradingview.chartproperties")),o!=null&&o.layout&&((f=o.charts)!=null&&f.length)&&(a.saved_data=o);const s=new ss(a);return s.$addDefaultMa=()=>{const v=s.activeChart();[10,30,60].forEach(d=>{v.createStudy("Moving Average",!1,!1,{length:d},{showLabelsOnPriceScale:!1})})},s.onChartReady(()=>{e.showMa&&!o&&s.$addDefaultMa(),s.subscribe("onAutoSaveNeeded",()=>{s.save(v=>{Qt(i,v)})}),s.subscribe("onScreenshotReady",v=>{window.open(`https://www.tradingview.com/x/${v}/`,"_blank")}),s.subscribe("onPlusClick",v=>{typeof e.onPlusClick=="function"&&(e==null||e.onPlusClick(v))})}),s}const Mi={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",720:"12h","1D":"1d","1W":"1w","1M":"1M"};function Cs(r){const{isDark:e}=Hi(),t=Xt({el:null,chartEl:null,theme:"dark",fullscreen:!1,graph:1,lang:"zh-CN",showIntervals:Te.showIntervals,intervals:Object.keys(Mi)}),i=Ie(()=>[{label:"(zh-CN) 简体中文",value:"zh-CN"},{label:"(zh-TW) 繁體中文",value:"zh-TW"},{label:"(en-US) English",value:"en-US"},{label:"(ja-JP) 日本語",value:"ja-JP"},{label:"(vi-VN) 越南语",value:"vi-VN"},{label:"(es-ES) 西班牙语(国际)",value:"es-ES"},{label:"(ru-RU) 俄语",value:"ru-RU"},{label:"(tr-TR) 土耳其语",value:"tr-TR"},{label:"(pt-BR) 葡萄牙语(巴西)",value:"pt-BR"},{label:"(fr-FR) 法语(法国)",value:"fr-FR"},{label:"(th-TH) 泰语",value:"th-TH"},{label:"(id-ID) 印度尼西亚语",value:"id-ID"},{label:"(ko-KR) 韩语",value:"ko-KR"}]),n={screenshot(){var o,a;r==="tv"?(o=t.chartEl.chart)==null||o.takeScreenshot():(a=t.chartEl.chart)==null||a.$screenshot()},fullScreenHandle(){t.fullscreen&&St.exitFullscreen?St.exitFullscreen():St.requestFullscreen(t.el)},showIndicator(){var o;if(r==="tv"){const a=(o=t.chartEl.chart)==null?void 0:o.activeChart();a==null||a.executeActionById("insertIndicator")}},onFullscreenChange(){t.fullscreen=!t.fullscreen}};return Ui(()=>{t.theme=e.value?"dark":"light"}),ur(()=>{St.addEventListener("fullscreenchange",n.onFullscreenChange,!1)}),Wt(()=>{St.removeEventListener("fullscreenchange",n.onFullscreenChange,!1)}),{...Zr(t),langList:i,...n}}function bs(){const r=$i(null);r.value=new ji(Ki,{heart:!0});const e=Xt({interval:"",symbol:"BTCUSDT",symbols:null,loading:!1,list:[],subList:[],latestData:null,limitSize:1e3,unsub:()=>{}}),t=Ie(()=>({symbol:`301.${e.symbol}`,interval:Mi[e.interval],limit:e.limitSize})),i={init(){e.unsub(),e.latestData=null,i.req(),e.unsub=i.sub()},async req(){var u,c;e.loading=!0,e.subList=[];const n=t.value,o=Object.entries(n).map(([h,f])=>`${h}=${f}`).join("&"),a=await fetch(`https://bapi-glb.hashkey.com/api/quote/v1/klines?${o}`).then(h=>h.json());let s=[];const l=JSON.stringify(n)===JSON.stringify(t.value);if(a.code===200&&l&&(s=i.formatList(a.data)),e.subList.length){const h=((u=s.slice(-1)[0])==null?void 0:u.time)||0;((c=e.subList[0])==null?void 0:c.timestamp)>h&&s.push(...e.subList),e.subList=[]}l&&(e.list=s,e.loading=!1)},loadMore(n,o){if(!n)return o([]);const a=t.value,s=Object.entries({...a,to:n-1e3}).map(([l,u])=>`${l}=${u}`).join("&");fetch(`https://bapi-glb.hashkey.com/api/quote/v1/klines?${s}`).then(l=>l.json()).then(l=>{if(l.code===200&&JSON.stringify(a)===JSON.stringify(t.value)){const u=i.formatList(l.data);o(u),e.list.unshift(...u)}})},sub(){var o;const n={event:"sub",topic:`kline_${t.value.interval}`,symbol:t.value.symbol,id:`sub_kline_${t.value.interval}_${t.value.symbol}`,params:{limit:1}};return(o=r.value)==null||o.send(n,a=>{if(n.id===`sub_kline_${t.value.interval}_${t.value.symbol}`){const s=i.formatList(a.data);e.loading?e.subList=s:([e.latestData]=s,i.updateLastData())}}),()=>{var a;(a=r.value)==null||a.send({...n,event:"cancel"},()=>{})}},updateLastData(){var n;if(e.latestData){const o=e.latestData.timestamp,a=(n=e.list.slice(-1)[0])==null?void 0:n.time;o===a?e.list.splice(-1,1,e.latestData):o&&(!a||o>a)&&e.list.push(e.latestData)}},changeSymbol(n){e.symbols=n,e.interval&&i.init()},formatList(n){return n.map(o=>({id:`${e.symbol}_${e.interval}`,timestamp:o.t,time:o.t,open:+o.o,close:+o.c,high:+o.h,low:+o.l,volume:+o.v}))}};return Wt(()=>{var n;e.unsub(),(n=r.value)==null||n.close()}),{...Zr(e),...i}}export{ms as K,_s as M,hs as V,bs as a,Ss as b,k as c,ys as e,Te as h,St as k,tn as p,gs as s,ps as t,Cs as u};
